[
    {
        "id": "d7405c5b52baf018",
        "type": "tab",
        "label": "Inicio",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "ad2d793d37b001d7",
        "type": "tab",
        "label": "Cozinha",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "624e12446ae56fec",
        "type": "tab",
        "label": "Sala",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "4f0d36b27ba46340",
        "type": "tab",
        "label": "Armazem",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "91731f4ba480b30a",
        "type": "tab",
        "label": "Esplanada",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "36c8992b04a40e1e",
        "type": "tab",
        "label": "Todos os Sensores",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "a48db0b1.9dac6",
        "type": "subflow",
        "name": "Zigbee Low Battery Setting",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 260,
                "y": 80,
                "wires": [
                    {
                        "id": "8e65b3ed.9f24"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 540,
                "y": 80,
                "wires": [
                    {
                        "id": "8e65b3ed.9f24",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [
            {
                "name": "NotificationDevice",
                "type": "str",
                "value": ""
            },
            {
                "name": "BatteryWarning",
                "type": "num",
                "value": "",
                "ui": {
                    "icon": "font-awesome/fa-battery-0",
                    "label": {
                        "en-US": "Min Value"
                    },
                    "type": "spinner",
                    "opts": {
                        "min": 1,
                        "max": 25
                    }
                }
            }
        ],
        "color": "#DDAA99"
    },
    {
        "id": "97561555.3ea248",
        "type": "subflow",
        "name": "Subflow 1",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 300,
                "y": 100,
                "wires": [
                    {
                        "id": "9b62f1c2.e1c83"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 580,
                "y": 100,
                "wires": [
                    {
                        "id": "9b62f1c2.e1c83",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [
            {
                "name": "BatteryType",
                "type": "str",
                "value": "CR2032",
                "ui": {
                    "icon": "font-awesome/fa-battery-4",
                    "label": {
                        "en-US": "CR2450"
                    },
                    "type": "select",
                    "opts": {
                        "opts": [
                            {
                                "l": {
                                    "en-US": "CR2450"
                                },
                                "v": "CR2450"
                            },
                            {
                                "l": {
                                    "en-US": "CR2032"
                                },
                                "v": "CR2032"
                            }
                        ]
                    }
                }
            },
            {
                "name": "Name",
                "type": "str",
                "value": "",
                "ui": {
                    "type": "input",
                    "opts": {
                        "types": [
                            "str",
                            "num"
                        ]
                    },
                    "label": {}
                }
            }
        ],
        "color": "#DDAA99"
    },
    {
        "id": "71b06249b6fc5a0d",
        "type": "group",
        "z": "d7405c5b52baf018",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "f0c3b5f7a99a25db",
            "c289e6881bd6ac27",
            "5b2428dcce4f3ef7",
            "d09ed05d8706827c"
        ],
        "x": 174,
        "y": 767,
        "w": 800,
        "h": 94
    },
    {
        "id": "5d577c3f019f32be",
        "type": "group",
        "z": "d7405c5b52baf018",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "1203dde8ceb89211",
            "c88f00beeb1f37b4",
            "f78c697cca71e6b5",
            "f22f3d55706b7508",
            "968dd920bf71ecdc",
            "fe9a8ca413bf3e12",
            "854c7633be593cdf",
            "5be2f6286745a75c",
            "544054946cf53e1a",
            "7de792a66156fa4a",
            "b038797f6abead80"
        ],
        "x": 174,
        "y": 139,
        "w": 752,
        "h": 362
    },
    {
        "id": "0c6b1c6becf1922d",
        "type": "group",
        "z": "36c8992b04a40e1e",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "b00723e34767c0c7",
            "e79c43acd36ae345",
            "d16a84f01932309d",
            "681b5d9b1d7ed582",
            "f6fdd4d9d4d0cc00"
        ],
        "x": 134,
        "y": 79,
        "w": 1112,
        "h": 82
    },
    {
        "id": "0f8a26a80991c307",
        "type": "group",
        "z": "36c8992b04a40e1e",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "13fcdf9028308c76",
            "46b420a7c63a66da",
            "201a253f846fe099",
            "667094cd23d520a3",
            "99a0fe8cc3e0ae7e"
        ],
        "x": 334,
        "y": 739,
        "w": 232,
        "h": 262
    },
    {
        "id": "1337715c3b617aff",
        "type": "group",
        "z": "36c8992b04a40e1e",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "a45c7b57dc59ee94",
            "5df1bfcab848bf99",
            "d3d8d41f31773392",
            "3bb512f68988f8aa"
        ],
        "x": 334,
        "y": 1019,
        "w": 212,
        "h": 222
    },
    {
        "id": "e67fc5d601bdb679",
        "type": "group",
        "z": "36c8992b04a40e1e",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "1b0790b533e545c0",
            "a759eecdb08b887b",
            "53172258cb283587",
            "e432cb28ddf300bd",
            "ae700d6f1f9bf195"
        ],
        "x": 334,
        "y": 1259,
        "w": 232,
        "h": 262
    },
    {
        "id": "1590ba15a1cb58f1",
        "type": "group",
        "z": "36c8992b04a40e1e",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "16924de7a4d6f8fe",
            "5c0a837cab816a98",
            "6e40317b21f7b89f",
            "c725f46ed8b41206",
            "6558dbe568fad49d",
            "320975db2844637a"
        ],
        "x": 634,
        "y": 1319,
        "w": 232,
        "h": 302
    },
    {
        "id": "9b6527f7.cad8b8",
        "type": "MySQLdatabase",
        "name": "Sensores MySQL",
        "host": "localhost",
        "port": "3306",
        "db": "sensores",
        "tz": "",
        "charset": "UTF8"
    },
    {
        "id": "a22cb5334c925d0b",
        "type": "mqtt-broker",
        "name": "MQTT Mosquitto",
        "broker": "192.168.1.97",
        "port": "1883",
        "clientid": "",
        "autoConnect": true,
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthRetain": "true",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "userProps": "",
        "sessionExpiry": ""
    },
    {
        "id": "2f3f0cbcd32c5f7e",
        "type": "ui_tab",
        "name": "Sala",
        "icon": "free_breakfast",
        "order": 3,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "dc52882060b46d70",
        "type": "ui_tab",
        "name": "Armazem",
        "icon": "dashboard",
        "order": 4,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "f43d992ed8084385",
        "type": "ui_group",
        "name": "Sensor 1",
        "tab": "dc52882060b46d70",
        "order": 1,
        "disp": false,
        "width": "7",
        "collapse": false,
        "className": ""
    },
    {
        "id": "8af8109be17f63fd",
        "type": "ui_group",
        "name": "Sensor 1",
        "tab": "2f3f0cbcd32c5f7e",
        "order": 1,
        "disp": false,
        "width": 7,
        "collapse": false,
        "className": ""
    },
    {
        "id": "8197199fe2265f15",
        "type": "ui_tab",
        "name": "Esplanada",
        "icon": "room_service",
        "order": 5,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "155ed888acecbf5d",
        "type": "ui_group",
        "name": "Sensor 1",
        "tab": "8197199fe2265f15",
        "order": 1,
        "disp": false,
        "width": 7,
        "collapse": false,
        "className": ""
    },
    {
        "id": "a96b4083f028a971",
        "type": "ui_group",
        "name": "Sensor 1",
        "tab": "71017cd790ef88be",
        "order": 2,
        "disp": false,
        "width": 7,
        "collapse": false,
        "className": "",
        "info": "<style>\r\n    #Small_Screen_Group_2 {\r\n        font-size: 30px !important;\r\n        background-color: \"#FF0000\" !important;\r\n        left: 120px;\r\n        top: 40px;\r\n    }\r\n</style>"
    },
    {
        "id": "64574ae0ae410483",
        "type": "ui_group",
        "name": "Sensor 2",
        "tab": "8197199fe2265f15",
        "order": 2,
        "disp": false,
        "width": 7,
        "collapse": false,
        "className": ""
    },
    {
        "id": "0ad7ea62b52c2f50",
        "type": "ui_group",
        "name": "Sensor 3",
        "tab": "8197199fe2265f15",
        "order": 3,
        "disp": false,
        "width": 7,
        "collapse": false,
        "className": ""
    },
    {
        "id": "115e4776225f9599",
        "type": "ui_group",
        "name": "Sensor 2",
        "tab": "2f3f0cbcd32c5f7e",
        "order": 3,
        "disp": false,
        "width": 7,
        "collapse": false,
        "className": ""
    },
    {
        "id": "0c30edc512b4f860",
        "type": "ui_group",
        "name": "Sensor 3",
        "tab": "2f3f0cbcd32c5f7e",
        "order": 4,
        "disp": false,
        "width": 7,
        "collapse": false,
        "className": ""
    },
    {
        "id": "219b5fb70833fc55",
        "type": "ui_group",
        "name": "Sensor 2",
        "tab": "71017cd790ef88be",
        "order": 3,
        "disp": false,
        "width": 7,
        "collapse": false,
        "className": ""
    },
    {
        "id": "db42c97b640f2a96",
        "type": "ui_group",
        "name": "Sensor 3",
        "tab": "71017cd790ef88be",
        "order": 4,
        "disp": false,
        "width": 7,
        "collapse": false,
        "className": ""
    },
    {
        "id": "904b7af53bb14c68",
        "type": "ui_group",
        "name": "Sensor 2",
        "tab": "dc52882060b46d70",
        "order": 2,
        "disp": false,
        "width": "7",
        "collapse": false,
        "className": ""
    },
    {
        "id": "3210ac3b6423b62c",
        "type": "ui_group",
        "name": "Sensor 3",
        "tab": "dc52882060b46d70",
        "order": 3,
        "disp": false,
        "width": "7",
        "collapse": false,
        "className": ""
    },
    {
        "id": "1ed55c3a77d04c43",
        "type": "ui_tab",
        "name": "Listagem",
        "icon": "dashboard",
        "order": 6,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "2da9c0ea5c1db297",
        "type": "ui_group",
        "name": "Todos",
        "tab": "1ed55c3a77d04c43",
        "order": 2,
        "disp": false,
        "width": "15",
        "collapse": false,
        "className": ""
    },
    {
        "id": "3ec56b872df1fe43",
        "type": "ui_base",
        "theme": {
            "name": "theme-light",
            "lightTheme": {
                "default": "#0094CE",
                "baseColor": "#0094CE",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": true,
                "reset": false
            },
            "darkTheme": {
                "default": "#097479",
                "baseColor": "#097479",
                "baseFont": "Trebuchet MS,Helvetica,sans-serif",
                "edited": true,
                "reset": false
            },
            "customTheme": {
                "name": "Untitled Theme 1",
                "default": "#4B7930",
                "baseColor": "#4B7930",
                "baseFont": "Trebuchet MS,Helvetica,sans-serif",
                "reset": false
            },
            "themeState": {
                "base-color": {
                    "default": "#0094CE",
                    "value": "#0094CE",
                    "edited": false
                },
                "page-titlebar-backgroundColor": {
                    "value": "#0094CE",
                    "edited": false
                },
                "page-backgroundColor": {
                    "value": "#fafafa",
                    "edited": false
                },
                "page-sidebar-backgroundColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "group-textColor": {
                    "value": "#1bbfff",
                    "edited": false
                },
                "group-borderColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "group-backgroundColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "widget-textColor": {
                    "value": "#111111",
                    "edited": false
                },
                "widget-backgroundColor": {
                    "value": "#0094ce",
                    "edited": false
                },
                "widget-borderColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "base-font": {
                    "value": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"
                }
            },
            "angularTheme": {
                "primary": "indigo",
                "accents": "blue",
                "warn": "red",
                "background": "grey",
                "palette": "light"
            }
        },
        "site": {
            "name": "Sensores Arimar",
            "hideToolbar": "false",
            "allowSwipe": "false",
            "lockMenu": "false",
            "allowTempTheme": "false",
            "dateFormat": "DD/MM/YYYY",
            "sizes": {
                "sx": 46,
                "sy": 46,
                "gx": 35,
                "gy": 25,
                "cx": 4,
                "cy": 4,
                "px": 10,
                "py": 5
            }
        }
    },
    {
        "id": "74ed309ae0e8faf0",
        "type": "ui_group",
        "name": "Sensor 4",
        "tab": "71017cd790ef88be",
        "order": 5,
        "disp": false,
        "width": 7,
        "collapse": false,
        "className": ""
    },
    {
        "id": "027aafb04853fa75",
        "type": "ui_group",
        "name": "Sensor 4",
        "tab": "8197199fe2265f15",
        "order": 4,
        "disp": false,
        "width": 7,
        "collapse": false,
        "className": ""
    },
    {
        "id": "72c10720b3a93ebf",
        "type": "ui_group",
        "name": "Sensor 5",
        "tab": "8197199fe2265f15",
        "order": 5,
        "disp": false,
        "width": 7,
        "collapse": false,
        "className": ""
    },
    {
        "id": "fdc59d5b5fd5ad33",
        "type": "ui_group",
        "name": "Sensor 4",
        "tab": "dc52882060b46d70",
        "order": 4,
        "disp": false,
        "width": "7",
        "collapse": false,
        "className": ""
    },
    {
        "id": "7d014fad0e42db08",
        "type": "ui_group",
        "name": "Zonas",
        "tab": "1ed55c3a77d04c43",
        "order": 1,
        "disp": false,
        "width": "5",
        "collapse": false,
        "className": ""
    },
    {
        "id": "b5b4b586aa40dcf0",
        "type": "node-red-contrib-whatsapp-cmb-account",
        "name": "CallmeBot"
    },
    {
        "id": "d976d8589f739436",
        "type": "ui_tab",
        "name": "Inicio",
        "icon": "dashboard",
        "order": 1,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "db17b25f952ca87f",
        "type": "ui_group",
        "name": "Inicio",
        "tab": "d976d8589f739436",
        "order": 1,
        "disp": false,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "1a3f5ad466273a3a",
        "type": "ui_spacer",
        "z": "ad2d793d37b001d7",
        "name": "spacer",
        "group": "a96b4083f028a971",
        "order": 3,
        "width": 1,
        "height": 1
    },
    {
        "id": "33853962932261e2",
        "type": "ui_spacer",
        "z": "ad2d793d37b001d7",
        "name": "spacer",
        "group": "a96b4083f028a971",
        "order": 6,
        "width": 1,
        "height": 1
    },
    {
        "id": "42d758025dc820f6",
        "type": "ui_spacer",
        "z": "ad2d793d37b001d7",
        "name": "spacer",
        "group": "a96b4083f028a971",
        "order": 8,
        "width": 1,
        "height": 1
    },
    {
        "id": "18a9df838985733a",
        "type": "ui_spacer",
        "z": "ad2d793d37b001d7",
        "name": "spacer",
        "group": "a96b4083f028a971",
        "order": 12,
        "width": 1,
        "height": 1
    },
    {
        "id": "84cafb07207a9017",
        "type": "ui_spacer",
        "z": "ad2d793d37b001d7",
        "name": "spacer",
        "group": "219b5fb70833fc55",
        "order": 5,
        "width": 1,
        "height": 1
    },
    {
        "id": "0da31914d9846f18",
        "type": "ui_spacer",
        "z": "ad2d793d37b001d7",
        "name": "spacer",
        "group": "219b5fb70833fc55",
        "order": 7,
        "width": 1,
        "height": 1
    },
    {
        "id": "b0a760d9baca4543",
        "type": "ui_spacer",
        "z": "ad2d793d37b001d7",
        "name": "spacer",
        "group": "219b5fb70833fc55",
        "order": 11,
        "width": 1,
        "height": 1
    },
    {
        "id": "d02aee12be8bfa72",
        "type": "ui_spacer",
        "z": "ad2d793d37b001d7",
        "name": "spacer",
        "group": "219b5fb70833fc55",
        "order": 14,
        "width": 2,
        "height": 1
    },
    {
        "id": "135f5dd1a5e12fc3",
        "type": "ui_spacer",
        "z": "ad2d793d37b001d7",
        "name": "spacer",
        "group": "db42c97b640f2a96",
        "order": 5,
        "width": 1,
        "height": 1
    },
    {
        "id": "685ecb071470012e",
        "type": "ui_spacer",
        "z": "ad2d793d37b001d7",
        "name": "spacer",
        "group": "db42c97b640f2a96",
        "order": 7,
        "width": 1,
        "height": 1
    },
    {
        "id": "282646ebb678c933",
        "type": "ui_spacer",
        "z": "ad2d793d37b001d7",
        "name": "spacer",
        "group": "db42c97b640f2a96",
        "order": 11,
        "width": 1,
        "height": 1
    },
    {
        "id": "5aac9d70cd655d0e",
        "type": "ui_spacer",
        "z": "ad2d793d37b001d7",
        "name": "spacer",
        "group": "db42c97b640f2a96",
        "order": 14,
        "width": 2,
        "height": 1
    },
    {
        "id": "98c152a31f853a41",
        "type": "ui_spacer",
        "z": "ad2d793d37b001d7",
        "name": "spacer",
        "group": "74ed309ae0e8faf0",
        "order": 5,
        "width": 1,
        "height": 1
    },
    {
        "id": "193be15e4a871aee",
        "type": "ui_spacer",
        "z": "ad2d793d37b001d7",
        "name": "spacer",
        "group": "74ed309ae0e8faf0",
        "order": 7,
        "width": 1,
        "height": 1
    },
    {
        "id": "1545c58e5657ae67",
        "type": "ui_spacer",
        "z": "ad2d793d37b001d7",
        "name": "spacer",
        "group": "74ed309ae0e8faf0",
        "order": 11,
        "width": 1,
        "height": 1
    },
    {
        "id": "96f91fd0fcaac6c2",
        "type": "ui_spacer",
        "z": "ad2d793d37b001d7",
        "name": "spacer",
        "group": "74ed309ae0e8faf0",
        "order": 14,
        "width": 2,
        "height": 1
    },
    {
        "id": "1b04e26890ebd2fc",
        "type": "ui_spacer",
        "z": "4f0d36b27ba46340",
        "name": "spacer",
        "group": "f43d992ed8084385",
        "order": 5,
        "width": 1,
        "height": 1
    },
    {
        "id": "947569db06245105",
        "type": "ui_spacer",
        "z": "4f0d36b27ba46340",
        "name": "spacer",
        "group": "f43d992ed8084385",
        "order": 7,
        "width": 1,
        "height": 1
    },
    {
        "id": "04149c4d1a905d27",
        "type": "ui_spacer",
        "z": "4f0d36b27ba46340",
        "name": "spacer",
        "group": "f43d992ed8084385",
        "order": 11,
        "width": 1,
        "height": 1
    },
    {
        "id": "987153d74f2d7cad",
        "type": "ui_spacer",
        "z": "4f0d36b27ba46340",
        "name": "spacer",
        "group": "904b7af53bb14c68",
        "order": 5,
        "width": 1,
        "height": 1
    },
    {
        "id": "e533fa279f2a4ced",
        "type": "ui_spacer",
        "z": "4f0d36b27ba46340",
        "name": "spacer",
        "group": "904b7af53bb14c68",
        "order": 7,
        "width": 1,
        "height": 1
    },
    {
        "id": "5d16b1789467a2c1",
        "type": "ui_spacer",
        "z": "4f0d36b27ba46340",
        "name": "spacer",
        "group": "904b7af53bb14c68",
        "order": 11,
        "width": 1,
        "height": 1
    },
    {
        "id": "4ee8eee57fc8379c",
        "type": "ui_spacer",
        "z": "4f0d36b27ba46340",
        "name": "spacer",
        "group": "3210ac3b6423b62c",
        "order": 5,
        "width": 1,
        "height": 1
    },
    {
        "id": "2882cdf202756979",
        "type": "ui_spacer",
        "z": "4f0d36b27ba46340",
        "name": "spacer",
        "group": "3210ac3b6423b62c",
        "order": 7,
        "width": 1,
        "height": 1
    },
    {
        "id": "331f9875ebcd91a8",
        "type": "ui_spacer",
        "z": "4f0d36b27ba46340",
        "name": "spacer",
        "group": "3210ac3b6423b62c",
        "order": 11,
        "width": 1,
        "height": 1
    },
    {
        "id": "b469a20d82e94d0b",
        "type": "ui_spacer",
        "z": "4f0d36b27ba46340",
        "name": "spacer",
        "group": "fdc59d5b5fd5ad33",
        "order": 5,
        "width": 1,
        "height": 1
    },
    {
        "id": "fb675851c67b645e",
        "type": "ui_spacer",
        "z": "4f0d36b27ba46340",
        "name": "spacer",
        "group": "fdc59d5b5fd5ad33",
        "order": 7,
        "width": 1,
        "height": 1
    },
    {
        "id": "a820351327b08fa0",
        "type": "ui_spacer",
        "z": "4f0d36b27ba46340",
        "name": "spacer",
        "group": "fdc59d5b5fd5ad33",
        "order": 11,
        "width": 1,
        "height": 1
    },
    {
        "id": "e6ee3c1ff30c7f40",
        "type": "ui_spacer",
        "z": "4f0d36b27ba46340",
        "name": "spacer",
        "group": "8af8109be17f63fd",
        "order": 3,
        "width": 1,
        "height": 1
    },
    {
        "id": "fbedc3fdccef364f",
        "type": "ui_spacer",
        "z": "4f0d36b27ba46340",
        "name": "spacer",
        "group": "8af8109be17f63fd",
        "order": 6,
        "width": 1,
        "height": 1
    },
    {
        "id": "a3a28462d7725dd3",
        "type": "ui_spacer",
        "z": "4f0d36b27ba46340",
        "name": "spacer",
        "group": "8af8109be17f63fd",
        "order": 8,
        "width": 1,
        "height": 1
    },
    {
        "id": "1b6fda278ffbe2d1",
        "type": "ui_spacer",
        "z": "4f0d36b27ba46340",
        "name": "spacer",
        "group": "8af8109be17f63fd",
        "order": 12,
        "width": 1,
        "height": 1
    },
    {
        "id": "55ca038ac8fde35f",
        "type": "ui_spacer",
        "z": "4f0d36b27ba46340",
        "name": "spacer",
        "group": "8af8109be17f63fd",
        "order": 15,
        "width": 2,
        "height": 1
    },
    {
        "id": "6f24144160763c89",
        "type": "ui_spacer",
        "z": "4f0d36b27ba46340",
        "name": "spacer",
        "group": "115e4776225f9599",
        "order": 3,
        "width": 1,
        "height": 1
    },
    {
        "id": "61234617cee48f02",
        "type": "ui_spacer",
        "z": "4f0d36b27ba46340",
        "name": "spacer",
        "group": "115e4776225f9599",
        "order": 6,
        "width": 1,
        "height": 1
    },
    {
        "id": "0d0917f98f63d2d0",
        "type": "ui_spacer",
        "z": "4f0d36b27ba46340",
        "name": "spacer",
        "group": "115e4776225f9599",
        "order": 8,
        "width": 1,
        "height": 1
    },
    {
        "id": "45b5fbcfabb85ebd",
        "type": "ui_spacer",
        "z": "4f0d36b27ba46340",
        "name": "spacer",
        "group": "115e4776225f9599",
        "order": 12,
        "width": 1,
        "height": 1
    },
    {
        "id": "02ceb1cd4b268d59",
        "type": "ui_spacer",
        "z": "4f0d36b27ba46340",
        "name": "spacer",
        "group": "115e4776225f9599",
        "order": 15,
        "width": 2,
        "height": 1
    },
    {
        "id": "2851c5f2150915f8",
        "type": "ui_spacer",
        "z": "4f0d36b27ba46340",
        "name": "spacer",
        "group": "0c30edc512b4f860",
        "order": 3,
        "width": 1,
        "height": 1
    },
    {
        "id": "9b5991f196d07aef",
        "type": "ui_spacer",
        "z": "4f0d36b27ba46340",
        "name": "spacer",
        "group": "0c30edc512b4f860",
        "order": 6,
        "width": 1,
        "height": 1
    },
    {
        "id": "48331cf84d2c02c2",
        "type": "ui_spacer",
        "z": "4f0d36b27ba46340",
        "name": "spacer",
        "group": "0c30edc512b4f860",
        "order": 8,
        "width": 1,
        "height": 1
    },
    {
        "id": "06aaa281207428c3",
        "type": "ui_spacer",
        "z": "4f0d36b27ba46340",
        "name": "spacer",
        "group": "0c30edc512b4f860",
        "order": 12,
        "width": 1,
        "height": 1
    },
    {
        "id": "df1fa05eb623cc37",
        "type": "ui_spacer",
        "z": "4f0d36b27ba46340",
        "name": "spacer",
        "group": "0c30edc512b4f860",
        "order": 15,
        "width": 2,
        "height": 1
    },
    {
        "id": "dcf24a367790cc6a",
        "type": "ui_spacer",
        "z": "91731f4ba480b30a",
        "name": "spacer",
        "group": "155ed888acecbf5d",
        "order": 5,
        "width": 1,
        "height": 1
    },
    {
        "id": "d014d626859cd803",
        "type": "ui_spacer",
        "z": "91731f4ba480b30a",
        "name": "spacer",
        "group": "155ed888acecbf5d",
        "order": 7,
        "width": 1,
        "height": 1
    },
    {
        "id": "1fa5b74616a2befe",
        "type": "ui_spacer",
        "z": "91731f4ba480b30a",
        "name": "spacer",
        "group": "155ed888acecbf5d",
        "order": 11,
        "width": 1,
        "height": 1
    },
    {
        "id": "c7a8276d82005b83",
        "type": "ui_spacer",
        "z": "91731f4ba480b30a",
        "name": "spacer",
        "group": "155ed888acecbf5d",
        "order": 14,
        "width": 1,
        "height": 1
    },
    {
        "id": "ab6dc668e15ff099",
        "type": "ui_spacer",
        "z": "91731f4ba480b30a",
        "name": "spacer",
        "group": "64574ae0ae410483",
        "order": 5,
        "width": 1,
        "height": 1
    },
    {
        "id": "dbc8f560f2cd8d87",
        "type": "ui_spacer",
        "z": "91731f4ba480b30a",
        "name": "spacer",
        "group": "64574ae0ae410483",
        "order": 7,
        "width": 1,
        "height": 1
    },
    {
        "id": "dd672ea6ed70d8d0",
        "type": "ui_spacer",
        "z": "91731f4ba480b30a",
        "name": "spacer",
        "group": "64574ae0ae410483",
        "order": 11,
        "width": 1,
        "height": 1
    },
    {
        "id": "0f95c1bcebd201b0",
        "type": "ui_spacer",
        "z": "91731f4ba480b30a",
        "name": "spacer",
        "group": "64574ae0ae410483",
        "order": 14,
        "width": 1,
        "height": 1
    },
    {
        "id": "be1e10eb134876c2",
        "type": "ui_spacer",
        "z": "91731f4ba480b30a",
        "name": "spacer",
        "group": "0ad7ea62b52c2f50",
        "order": 5,
        "width": 1,
        "height": 1
    },
    {
        "id": "2ffc7fff1e715353",
        "type": "ui_spacer",
        "z": "91731f4ba480b30a",
        "name": "spacer",
        "group": "0ad7ea62b52c2f50",
        "order": 7,
        "width": 1,
        "height": 1
    },
    {
        "id": "a08ae6100a67f187",
        "type": "ui_spacer",
        "z": "91731f4ba480b30a",
        "name": "spacer",
        "group": "0ad7ea62b52c2f50",
        "order": 11,
        "width": 1,
        "height": 1
    },
    {
        "id": "4c450d2b914601a6",
        "type": "ui_spacer",
        "z": "91731f4ba480b30a",
        "name": "spacer",
        "group": "0ad7ea62b52c2f50",
        "order": 14,
        "width": 1,
        "height": 1
    },
    {
        "id": "f6118cdcad572582",
        "type": "ui_spacer",
        "z": "91731f4ba480b30a",
        "name": "spacer",
        "group": "027aafb04853fa75",
        "order": 5,
        "width": 1,
        "height": 1
    },
    {
        "id": "fd62baa82b219a2e",
        "type": "ui_spacer",
        "z": "91731f4ba480b30a",
        "name": "spacer",
        "group": "027aafb04853fa75",
        "order": 7,
        "width": 1,
        "height": 1
    },
    {
        "id": "c770b7574f380de7",
        "type": "ui_spacer",
        "z": "91731f4ba480b30a",
        "name": "spacer",
        "group": "027aafb04853fa75",
        "order": 11,
        "width": 1,
        "height": 1
    },
    {
        "id": "4d91896beed00378",
        "type": "ui_spacer",
        "z": "91731f4ba480b30a",
        "name": "spacer",
        "group": "027aafb04853fa75",
        "order": 14,
        "width": 1,
        "height": 1
    },
    {
        "id": "afeafb7aee43b473",
        "type": "ui_spacer",
        "z": "91731f4ba480b30a",
        "name": "spacer",
        "group": "72c10720b3a93ebf",
        "order": 5,
        "width": 1,
        "height": 1
    },
    {
        "id": "6f2e8eb861485e23",
        "type": "ui_spacer",
        "z": "91731f4ba480b30a",
        "name": "spacer",
        "group": "72c10720b3a93ebf",
        "order": 7,
        "width": 1,
        "height": 1
    },
    {
        "id": "2c99225c3ea77b69",
        "type": "ui_spacer",
        "z": "91731f4ba480b30a",
        "name": "spacer",
        "group": "72c10720b3a93ebf",
        "order": 11,
        "width": 1,
        "height": 1
    },
    {
        "id": "e3c8f3db38879160",
        "type": "ui_spacer",
        "z": "91731f4ba480b30a",
        "name": "spacer",
        "group": "72c10720b3a93ebf",
        "order": 14,
        "width": 1,
        "height": 1
    },
    {
        "id": "71017cd790ef88be",
        "type": "ui_tab",
        "name": "Cozinha",
        "icon": "kitchen",
        "order": 2,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "d62edd72661fa6e4",
        "type": "ui_group",
        "name": "Cozinha",
        "tab": "1ed55c3a77d04c43",
        "order": 3,
        "disp": true,
        "width": "4",
        "collapse": false,
        "className": ""
    },
    {
        "id": "2bb6283f8d9a7d24",
        "type": "ui_group",
        "name": "Sala",
        "tab": "1ed55c3a77d04c43",
        "order": 4,
        "disp": true,
        "width": "4",
        "collapse": false,
        "className": ""
    },
    {
        "id": "2e83e67765158d1f",
        "type": "ui_group",
        "name": "Armazem",
        "tab": "1ed55c3a77d04c43",
        "order": 5,
        "disp": true,
        "width": "4",
        "collapse": false,
        "className": ""
    },
    {
        "id": "de4f8ddf3439e797",
        "type": "ui_group",
        "name": "Esplanada",
        "tab": "1ed55c3a77d04c43",
        "order": 6,
        "disp": true,
        "width": "4",
        "collapse": false,
        "className": ""
    },
    {
        "id": "8e65b3ed.9f24",
        "type": "function",
        "z": "a48db0b1.9dac6",
        "name": "Set Values",
        "func": "var minBattLevel = env.get(\"BatteryWarning\");\nflow.set(\"$parent.BatteryWarning\", parseInt(minBattLevel, 10));\n\nvar device = env.get(\"NotificationDevice\");\nflow.set(\"$parent.NotificationDevice\", device);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 390,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "9b62f1c2.e1c83",
        "type": "function",
        "z": "97561555.3ea248",
        "name": "Update Battery",
        "func": "var battType = env.get(\"BatteryType\");\nvar name = env.get(\"Name\");\nvar data = flow.get(\"$parent.zigbeeBattery\");\n\n\nvar battTRL = [\n  {\n    \"battery\": \"CR2032\",\n    \"url\": \"https://amzn.to/2RflnOx\"\n  },\n  {\n    \"battery\": \"CR2450\",\n    \"url\": \"https://amzn.to/2Tlaf5n\"\n  }\n];\n\nvar pos = data.map(function(e) { return e.info.name; }).indexOf(name);\nvar bat = battTRL.map(function(e) { return e.battery; }).indexOf(battType);\nif(pos !== -1){\n    if(bat => 0){data[pos].info.batteryURL = battTRL[bat].url;}\n    \n    data[pos].info.batteryType = battType;\n    flow.set(\"$parent.zigbeeBattery\", data);\n    msg.payload = battType +\" saved as default battery for \"+ name;\n}\nelse {\n    msg.payload = \"Check device name\";\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 440,
        "y": 100,
        "wires": [
            []
        ]
    },
    {
        "id": "f0c3b5f7a99a25db",
        "type": "http in",
        "z": "d7405c5b52baf018",
        "g": "71b06249b6fc5a0d",
        "name": "",
        "url": "/ui",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 250,
        "y": 820,
        "wires": [
            [
                "d09ed05d8706827c"
            ]
        ]
    },
    {
        "id": "c289e6881bd6ac27",
        "type": "http response",
        "z": "d7405c5b52baf018",
        "g": "71b06249b6fc5a0d",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 898,
        "y": 808,
        "wires": []
    },
    {
        "id": "5b2428dcce4f3ef7",
        "type": "template",
        "z": "d7405c5b52baf018",
        "g": "71b06249b6fc5a0d",
        "name": "",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "This is the payload: {{payload}} !",
        "output": "str",
        "x": 709,
        "y": 811,
        "wires": [
            [
                "c289e6881bd6ac27"
            ]
        ]
    },
    {
        "id": "d09ed05d8706827c",
        "type": "node-red-contrib-httpauth",
        "z": "d7405c5b52baf018",
        "g": "71b06249b6fc5a0d",
        "name": "Autenticação",
        "file": "",
        "cred": "",
        "authType": "Basic",
        "realm": "",
        "username": "Arimar",
        "password": "sensores",
        "hashed": false,
        "x": 474.5,
        "y": 816,
        "wires": [
            [
                "5b2428dcce4f3ef7"
            ]
        ]
    },
    {
        "id": "f833aec1ce25d7f1",
        "type": "ui_template",
        "z": "d7405c5b52baf018",
        "group": "",
        "name": "Logo / Relógio",
        "order": 0,
        "width": 0,
        "height": 0,
        "format": "<script id=\"clockScript1\" type=\"text/javascript\">\n    var clockInterval;\n    $(function () {\n        if (clockInterval) return;\n\n        //add logo\n        var div1 = $('<div/>');\n        var logo = new Image();\n\n        logo.src = '/logotipo.png'\n        logo.height = 40;\n        div1[0].style.margin = '0px auto';\n\n        div1.append(logo);\n\n        //add clock\n        var div2 = $('<div/>');\n        var p = $('<p/>');\n\n        div2.append(p);\n        div2[0].style.margin = '5px';\n        div2[0].style.fontSize = 'small';\n\n        function displayTime() {\n            p.text(new Date().toLocaleString());\n        }\n        \n        clockInterval = setInterval(displayTime, 1000);\n\n        //add to toolbar when it's available\n        var addToToolbarTimer;\n        \n        function addToToolbar() {\n            var toolbar = $('.md-toolbar-tools');\n            \n            if(!toolbar.length) return;\n            \n            toolbar.append(div1);\n            toolbar.append(div2);\n            clearInterval(addToToolbarTimer);\n        }\n        addToToolbarTimer = setInterval(addToToolbar, 100);\n    });\n</script>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": false,
        "templateScope": "global",
        "className": "",
        "x": 260,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "5f0e5fccbfab062d",
        "type": "ui_template",
        "z": "d7405c5b52baf018",
        "group": "a96b4083f028a971",
        "name": "CSS",
        "order": 15,
        "width": 2,
        "height": 1,
        "format": "\n<style>\n  \n  * {\n    font-family: -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,\"Helvetica Neue\",Arial,\"Noto Sans\",sans-serif,\"Apple\n  Color Emoji\",\"Segoe UI Emoji\",\"Segoe UI Symbol\",\"Noto Color Emoji\";\n    font-size: .7rem;\n  }\n\n  ui-card-panel {\n      box-shadow: rgba(0, 0, 0, 0.35) 0px 5px 15px;\n      border-radius: 15px;\n      background-color: #0094CE;\n\n  }\n    ui-card-panel * {\n       border-radius: 5px;\n    }\n\n    /* Styling of the Group Title */~\n    .nr-dashboard-cardtitle {\n      font-weight: bold !important;\n    }\n\n.p2 {\n  font-family: -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,\"Helvetica Neue\",Arial,\"Noto Sans\",sans-serif,\"Apple\n  Color Emoji\",\"Segoe UI Emoji\",\"Segoe UI Symbol\",\"Noto Color Emoji\";\n  color: #119900;\n}\n\n.nr-dashboard-text {\n  padding: 0 7px;\n}\n\n.fundo_azul{\n  background-color: #0094ce;\n  font-family: -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,\"Helvetica Neue\",Arial,\"Noto Sans\",sans-serif,\"Apple\n  Color Emoji\",\"Segoe UI Emoji\",\"Segoe UI Symbol\",\"Noto Color Emoji\";\n  font-color: #ffffff;\n}\n</style>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": true,
        "templateScope": "global",
        "className": "",
        "x": 510,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "1203dde8ceb89211",
        "type": "change",
        "z": "d7405c5b52baf018",
        "g": "5d577c3f019f32be",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"tab\":\"Cozinha\"}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 560,
        "y": 180,
        "wires": [
            [
                "c88f00beeb1f37b4"
            ]
        ]
    },
    {
        "id": "c88f00beeb1f37b4",
        "type": "ui_ui_control",
        "z": "d7405c5b52baf018",
        "g": "5d577c3f019f32be",
        "name": "",
        "events": "all",
        "x": 840,
        "y": 320,
        "wires": [
            []
        ]
    },
    {
        "id": "f78c697cca71e6b5",
        "type": "change",
        "z": "d7405c5b52baf018",
        "g": "5d577c3f019f32be",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"tab\":\"Sala\"}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 560,
        "y": 260,
        "wires": [
            [
                "c88f00beeb1f37b4"
            ]
        ]
    },
    {
        "id": "f22f3d55706b7508",
        "type": "change",
        "z": "d7405c5b52baf018",
        "g": "5d577c3f019f32be",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"tab\":\"Armazem\"}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 560,
        "y": 320,
        "wires": [
            [
                "c88f00beeb1f37b4"
            ]
        ]
    },
    {
        "id": "968dd920bf71ecdc",
        "type": "change",
        "z": "d7405c5b52baf018",
        "g": "5d577c3f019f32be",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"tab\":\"Esplanada\"}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 560,
        "y": 380,
        "wires": [
            [
                "c88f00beeb1f37b4"
            ]
        ]
    },
    {
        "id": "fe9a8ca413bf3e12",
        "type": "change",
        "z": "d7405c5b52baf018",
        "g": "5d577c3f019f32be",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"tab\":\"Listagem\"}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 560,
        "y": 460,
        "wires": [
            [
                "c88f00beeb1f37b4"
            ]
        ]
    },
    {
        "id": "a047f4aa02f376ee",
        "type": "inject",
        "z": "d7405c5b52baf018",
        "name": "Inicio",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"group\":{\"hide\":[\"Listagem_Cozinha\",\"Listagem_Sala\",\"Listagem_Armazem\",\"Listagem_Esplanada\"]}}",
        "payloadType": "json",
        "x": 250,
        "y": 600,
        "wires": [
            [
                "63683b69116eb62d"
            ]
        ]
    },
    {
        "id": "63683b69116eb62d",
        "type": "function",
        "z": "d7405c5b52baf018",
        "name": "Globais",
        "func": "var count = global.get('imprimir') || 0;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 460,
        "y": 600,
        "wires": [
            []
        ]
    },
    {
        "id": "854c7633be593cdf",
        "type": "ui_button",
        "z": "d7405c5b52baf018",
        "g": "5d577c3f019f32be",
        "name": "",
        "group": "db17b25f952ca87f",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "Sala",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "free_breakfast",
        "payload": "Sala",
        "payloadType": "str",
        "topic": "",
        "topicType": "str",
        "x": 250,
        "y": 260,
        "wires": [
            [
                "f78c697cca71e6b5"
            ]
        ]
    },
    {
        "id": "5be2f6286745a75c",
        "type": "ui_button",
        "z": "d7405c5b52baf018",
        "g": "5d577c3f019f32be",
        "name": "",
        "group": "db17b25f952ca87f",
        "order": 1,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "Cozinha",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "kitchen",
        "payload": "Cozinha",
        "payloadType": "str",
        "topic": "",
        "topicType": "str",
        "x": 260,
        "y": 180,
        "wires": [
            [
                "1203dde8ceb89211"
            ]
        ]
    },
    {
        "id": "544054946cf53e1a",
        "type": "ui_button",
        "z": "d7405c5b52baf018",
        "g": "5d577c3f019f32be",
        "name": "",
        "group": "db17b25f952ca87f",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "Armazém",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "dashboard",
        "payload": "Armazém",
        "payloadType": "str",
        "topic": "",
        "topicType": "str",
        "x": 260,
        "y": 320,
        "wires": [
            [
                "f22f3d55706b7508"
            ]
        ]
    },
    {
        "id": "7de792a66156fa4a",
        "type": "ui_button",
        "z": "d7405c5b52baf018",
        "g": "5d577c3f019f32be",
        "name": "",
        "group": "db17b25f952ca87f",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": true,
        "label": "Esplanada",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "room_service",
        "payload": "Esplanada",
        "payloadType": "str",
        "topic": "",
        "topicType": "str",
        "x": 270,
        "y": 380,
        "wires": [
            [
                "968dd920bf71ecdc"
            ]
        ]
    },
    {
        "id": "b038797f6abead80",
        "type": "ui_button",
        "z": "d7405c5b52baf018",
        "g": "5d577c3f019f32be",
        "name": "",
        "group": "db17b25f952ca87f",
        "order": 5,
        "width": 0,
        "height": 0,
        "passthru": true,
        "label": "Listagem",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "list",
        "payload": "Listagem",
        "payloadType": "str",
        "topic": "",
        "topicType": "str",
        "x": 260,
        "y": 460,
        "wires": [
            [
                "fe9a8ca413bf3e12"
            ]
        ]
    },
    {
        "id": "67957440b48dd113",
        "type": "comment",
        "z": "d7405c5b52baf018",
        "name": "Autenticação para aceder ao site",
        "info": "",
        "x": 310,
        "y": 720,
        "wires": []
    },
    {
        "id": "2b45c29bea461164",
        "type": "mqtt in",
        "z": "ad2d793d37b001d7",
        "name": "Sensor 1",
        "topic": "TFC/Cozinha/Sensor1",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "a22cb5334c925d0b",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 1040,
        "y": 740,
        "wires": [
            [
                "d3c9ad2d985409ec"
            ]
        ]
    },
    {
        "id": "f304c61990dc148e",
        "type": "ui_gauge",
        "z": "ad2d793d37b001d7",
        "name": "Coz_Sensor1",
        "group": "a96b4083f028a971",
        "order": 5,
        "width": 3,
        "height": 2,
        "gtype": "gage",
        "title": "<i class=\"fa fa-thermometer-full\" aria-hidden=\"true\"></i>Temperatura ",
        "label": "Cº",
        "format": "{{msg.Temperatura}}",
        "min": "0",
        "max": "12",
        "colors": [
            "#ca3838",
            "#0dc50d",
            "#ca3838"
        ],
        "seg1": "2",
        "seg2": "10",
        "diff": false,
        "className": "",
        "x": 2580,
        "y": 340,
        "wires": []
    },
    {
        "id": "182057021560fd93",
        "type": "mqtt in",
        "z": "ad2d793d37b001d7",
        "name": "Sensor 3",
        "topic": "TFC/Cozinha/Sensor3",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "a22cb5334c925d0b",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 1040,
        "y": 880,
        "wires": [
            [
                "d3c9ad2d985409ec"
            ]
        ]
    },
    {
        "id": "db8d047983817f2d",
        "type": "mqtt in",
        "z": "ad2d793d37b001d7",
        "name": "Sensor 2",
        "topic": "TFC/Cozinha/Sensor2",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "a22cb5334c925d0b",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 1040,
        "y": 820,
        "wires": [
            [
                "d3c9ad2d985409ec"
            ]
        ]
    },
    {
        "id": "6fbe29ad72708115",
        "type": "function",
        "z": "ad2d793d37b001d7",
        "name": "Max e Min",
        "func": "msg.topic = \"SELECT maximo,minimo FROM equipamento where idtipo = '\" + msg.Tipo + \"'\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1510,
        "y": 740,
        "wires": [
            [
                "06524dbe3d63afeb"
            ]
        ]
    },
    {
        "id": "b69cea2d0978ed36",
        "type": "function",
        "z": "ad2d793d37b001d7",
        "name": "Gráficos",
        "func": "// Bateria\nvar recebido = msg.Bateria;\nvar porcento = ((recebido - 3.2) * 100) / 1;\nif (porcento > 100)\n    msg.Bateria = 100;\nelse\n    msg.Bateria = porcento;\n\nmsg.Bateria = msg.Bateria.toFixed(2);\nmsg.Temperatura = msg.Temperatura.toFixed(2);\nmsg.Volts = msg.Volts.toFixed(2);\nconst value = msg.payload;\n\nif (msg.Sensor == 1) {\n    msg.Sensor_Nome = \"Sensor 1 - \" + msg.Sensor_Nome;\n    msg.ui_control = {\n        \"id\": \"Coz_Sensor1\",\n        \"gtype\": \"gage\",\n        \"options\": {\n            \"min\": msg.payload[0].minimo,\n            \"max\": msg.payload[0].maximo,\n            \"colors\": [[202, 56, 56], [13, 197, 13], [202, 56, 56]]\n        }\n    }\n    msg.ui_control = {\n        \"id\": \"BAT_Sensor1\",\n        \"gtype\": \"gage\",\n        \"options\": {\n            \"colors\": [[202, 56, 56], [13, 197, 13], [202, 56, 56]]\n        }\n    }\n    \n    return [msg, null, null, null];;\n}\nif (msg.Sensor == 2) {\n    msg.Sensor_Nome = \"Sensor 2 - \" + msg.Sensor_Nome;\n    msg.ui_control = {\n        \"id\": \"Coz_Sensor2\",\n        \"gtype\": \"gage\",\n        \"options\": {\n            \"min\": msg.payload[0].minimo,\n            \"max\": msg.payload[0].maximo,\n            \"colors\": [[202, 56, 56], [13, 197, 13], [202, 56, 56]]\n        }\n    }\n    msg.ui_control = {\n        \"id\": \"BAT_Sensor2\",\n        \"gtype\": \"gage\",\n        \"options\": {\n            \"colors\": [[202, 56, 56], [13, 197, 13], [202, 56, 56]]\n        }\n    }\n    return [null, msg, null, null];\n}\nif (msg.Sensor == 3) {\n    msg.Sensor_Nome = \"Sensor 3 - \" + msg.Sensor_Nome;\n    msg.ui_control = {\n        \"id\": \"Coz_Sensor3\",\n        \"gtype\": \"gage\",\n        \"options\": {\n            \"min\": msg.payload[0].minimo,\n            \"max\": msg.payload[0].maximo,\n            \"colors\": [[202, 56, 56], [13, 197, 13], [202, 56, 56]]\n        }\n    }\n    msg.ui_control = {\n        \"id\": \"BAT_Sensor3\",\n        \"gtype\": \"gage\",\n        \"options\": {\n            \"colors\": [[202, 56, 56], [13, 197, 13], [202, 56, 56]]\n        }\n    }\n    return [null, null, msg, null];\n}\n\nif (msg.Sensor == 4) {\n    msg.Sensor_Nome = \"Sensor 4 - \" + msg.Sensor_Nome;\n    msg.ui_control = {\n        \"id\": \"Coz_Sensor4\",\n        \"gtype\": \"gage\",\n        \"options\": {\n            \"min\": msg.payload[0].minimo,\n            \"max\": msg.payload[0].maximo,\n            \"colors\": [[202, 56, 56], [13, 197, 13], [202, 56, 56]]\n        }\n    }\n    msg.ui_control = {\n        \"id\": \"BAT_Sensor4\",\n        \"gtype\": \"gage\",\n        \"options\": {\n            \"colors\": [[202, 56, 56], [13, 197, 13], [202, 56, 56]]\n        }\n    }\n    return [null, null, null, msg];\n}",
        "outputs": 4,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2140,
        "y": 740,
        "wires": [
            [
                "f304c61990dc148e",
                "d0f6d2e05e8d334e",
                "b623c1852bc72781",
                "a146f7b55e3584d9"
            ],
            [
                "bfde0be3708ebde4",
                "4475fc9826a85aff",
                "acf9ccbda4a3c169",
                "fa71ea4e60ae5cdc"
            ],
            [
                "f253d56047a525c6",
                "3916df5c521d1f82",
                "3652a15f7568d16e",
                "7c8325013597972a"
            ],
            [
                "ed86615d1ce186ec",
                "310af3f9a2f82ef7",
                "2dfbeef992a772ef",
                "4406c958e7b354f8"
            ]
        ]
    },
    {
        "id": "0a4a07f10c0636a8",
        "type": "function",
        "z": "ad2d793d37b001d7",
        "name": "Inserir Registo",
        "func": "var zona = 1;\nvar words = msg.topic.split(\"/\");\nvar date = new Date();\nvar hour = date.getHours();\nhour = hour + 1;\ndate.setHours(hour);\n\nmsg.topic = \"INSERT INTO registos (zona, sensor, temperatura, bateria, data, ativo) \"+\n    \" VALUES ('\" + zona + \"','\" + msg.payload.Sensor_ID + \"', '\" \n    + msg.payload.Temperatura + \"', '\"\n    + msg.payload.Bateria + \"', now(), '\" + msg.Ativo+\"')\";\nmsg.Zonas = words[1];\nmsg.Sensor = words[2].slice(-1);\nmsg.Data = date;\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1520,
        "y": 520,
        "wires": [
            [
                "6d65b6760166ea61"
            ]
        ]
    },
    {
        "id": "bfde0be3708ebde4",
        "type": "ui_gauge",
        "z": "ad2d793d37b001d7",
        "name": "Coz_Sensor2",
        "group": "219b5fb70833fc55",
        "order": 4,
        "width": 3,
        "height": 2,
        "gtype": "gage",
        "title": "<i class=\"fa fa-thermometer-full\" aria-hidden=\"true\"></i> Temperatura",
        "label": "Cº",
        "format": "{{msg.Temperatura}}",
        "min": "0",
        "max": "12",
        "colors": [
            "#ca3838",
            "#0dc50d",
            "#ca3838"
        ],
        "seg1": "2",
        "seg2": "10",
        "diff": false,
        "className": "",
        "x": 2580,
        "y": 520,
        "wires": []
    },
    {
        "id": "f253d56047a525c6",
        "type": "ui_gauge",
        "z": "ad2d793d37b001d7",
        "name": "Coz_Sensor3",
        "group": "db42c97b640f2a96",
        "order": 4,
        "width": 3,
        "height": 2,
        "gtype": "gage",
        "title": "<i class=\"fa fa-thermometer-full\" aria-hidden=\"true\"></i> Temperatura",
        "label": "Cº",
        "format": "{{msg.Temperatura}}",
        "min": "0",
        "max": "12",
        "colors": [
            "#ca3838",
            "#0dc50d",
            "#ca3838"
        ],
        "seg1": "2",
        "seg2": "10",
        "diff": false,
        "className": "",
        "x": 2580,
        "y": 700,
        "wires": []
    },
    {
        "id": "d0f6d2e05e8d334e",
        "type": "ui_text",
        "z": "ad2d793d37b001d7",
        "group": "a96b4083f028a971",
        "order": 1,
        "width": 7,
        "height": 1,
        "name": "Nome",
        "label": "",
        "format": "<font size = 4 font color =deepskyblue>{{msg.Sensor_Nome}}",
        "layout": "row-left",
        "className": "",
        "x": 2550,
        "y": 420,
        "wires": [],
        "info": ".cssFont_1 {\r\nfont-family: 'Roboto', sans-serif;\r\nfont-size: 30px;\r\nletter-spacing: 2px;\r\nword-spacing: 5px;\r\ncolor: #000000;\r\nfont-weight: bold;\r\ntext-decoration: none;\r\nfont-style: italic;\r\nfont-variant: normal;\r\ntext-transform: none;\r\n}"
    },
    {
        "id": "3916df5c521d1f82",
        "type": "ui_text",
        "z": "ad2d793d37b001d7",
        "group": "db42c97b640f2a96",
        "order": 1,
        "width": 7,
        "height": 1,
        "name": "Nome",
        "label": "",
        "format": "<font size = 4 font color =deepskyblue>{{msg.Sensor_Nome}}",
        "layout": "row-left",
        "className": "fundo_azul",
        "x": 2550,
        "y": 740,
        "wires": []
    },
    {
        "id": "b623c1852bc72781",
        "type": "ui_text",
        "z": "ad2d793d37b001d7",
        "group": "a96b4083f028a971",
        "order": 4,
        "width": 2,
        "height": 1,
        "name": "",
        "label": "Volts:",
        "format": "{{msg.Volts}}",
        "layout": "row-spread",
        "className": "",
        "x": 2549.000015258789,
        "y": 459.00000190734863,
        "wires": []
    },
    {
        "id": "4475fc9826a85aff",
        "type": "ui_text",
        "z": "ad2d793d37b001d7",
        "group": "219b5fb70833fc55",
        "order": 1,
        "width": 7,
        "height": 1,
        "name": "Nome",
        "label": "",
        "format": "<font size = 4 font color =deepskyblue>{{msg.Sensor_Nome}}",
        "layout": "row-left",
        "className": "fundo_azul",
        "x": 2550,
        "y": 560,
        "wires": [],
        "info": ".cssFont_1 {\r\nfont-family: 'Roboto', sans-serif;\r\nfont-size: 30px;\r\nletter-spacing: 2px;\r\nword-spacing: 5px;\r\ncolor: #000000;\r\nfont-weight: bold;\r\ntext-decoration: none;\r\nfont-style: italic;\r\nfont-variant: normal;\r\ntext-transform: none;\r\n}"
    },
    {
        "id": "3652a15f7568d16e",
        "type": "ui_text",
        "z": "ad2d793d37b001d7",
        "group": "db42c97b640f2a96",
        "order": 3,
        "width": 3,
        "height": 1,
        "name": "",
        "label": "Volts:",
        "format": "{{msg.Volts}}",
        "layout": "row-spread",
        "className": "",
        "x": 2550,
        "y": 820,
        "wires": []
    },
    {
        "id": "acf9ccbda4a3c169",
        "type": "ui_text",
        "z": "ad2d793d37b001d7",
        "group": "219b5fb70833fc55",
        "order": 3,
        "width": 3,
        "height": 1,
        "name": "",
        "label": "Volts:",
        "format": "{{msg.Volts}}",
        "layout": "row-spread",
        "className": "",
        "x": 2550,
        "y": 640,
        "wires": []
    },
    {
        "id": "06524dbe3d63afeb",
        "type": "mysql",
        "z": "ad2d793d37b001d7",
        "mydb": "9b6527f7.cad8b8",
        "name": "BDados",
        "x": 1720,
        "y": 740,
        "wires": [
            [
                "b69cea2d0978ed36"
            ]
        ]
    },
    {
        "id": "d1193ad5cc4007d2",
        "type": "ui_text",
        "z": "ad2d793d37b001d7",
        "group": "219b5fb70833fc55",
        "order": 9,
        "width": 7,
        "height": 1,
        "name": "Data",
        "label": "Última Leitura",
        "format": "{{msg.Data}}",
        "layout": "row-spread",
        "className": "",
        "x": 2150,
        "y": 500,
        "wires": []
    },
    {
        "id": "a27806d99d7dc2ba",
        "type": "function",
        "z": "ad2d793d37b001d7",
        "name": "Ultima Leitura",
        "func": "var d = msg.Data.toISOString();\nd = d.replace(\"T\", \" \");\nd = d.slice(0, d.length - 5);\nmsg.Data = d;\n\nif (msg.Sensor == 1) {    return [msg, null, null, null];}\nif (msg.Sensor == 2) {    return [null, msg, null, null];}\nif (msg.Sensor == 3) {    return [null, null, msg, null];}\nif (msg.Sensor == 4) {    return [null, null, null, msg];}",
        "outputs": 4,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1900,
        "y": 520,
        "wires": [
            [
                "37e10bf0659fcbee"
            ],
            [
                "d1193ad5cc4007d2"
            ],
            [
                "45770a27185deae0"
            ],
            [
                "c74fff245af85fad"
            ]
        ]
    },
    {
        "id": "37e10bf0659fcbee",
        "type": "ui_text",
        "z": "ad2d793d37b001d7",
        "group": "a96b4083f028a971",
        "order": 10,
        "width": 7,
        "height": 1,
        "name": "Data",
        "label": "Última Leitura",
        "format": "{{msg.Data}}",
        "layout": "row-spread",
        "className": "",
        "x": 2150,
        "y": 460,
        "wires": []
    },
    {
        "id": "45770a27185deae0",
        "type": "ui_text",
        "z": "ad2d793d37b001d7",
        "group": "db42c97b640f2a96",
        "order": 9,
        "width": 7,
        "height": 1,
        "name": "Data",
        "label": "Última Leitura",
        "format": "{{msg.Data}}",
        "layout": "row-spread",
        "className": "",
        "x": 2150,
        "y": 540,
        "wires": []
    },
    {
        "id": "0518b02ad7b41e58",
        "type": "function",
        "z": "ad2d793d37b001d7",
        "name": "SQL 24Horas",
        "func": "msg.topic = \"SELECT temperatura, data FROM registos where sensor = '\" + msg.Sensor_ID + \"' ORDER BY data DESC limit 24\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1520,
        "y": 340,
        "wires": [
            [
                "bae05367ba1ebde0"
            ]
        ]
    },
    {
        "id": "bae05367ba1ebde0",
        "type": "mysql",
        "z": "ad2d793d37b001d7",
        "mydb": "9b6527f7.cad8b8",
        "name": "BDados",
        "x": 1700.0000076293945,
        "y": 340.00000953674316,
        "wires": [
            [
                "db58613dc763f0c2"
            ]
        ]
    },
    {
        "id": "9faee68ff68371bc",
        "type": "ui_chart",
        "z": "ad2d793d37b001d7",
        "name": "Leitura Sensor 2",
        "group": "219b5fb70833fc55",
        "order": 8,
        "width": 7,
        "height": 4,
        "label": "Histórico",
        "chartType": "line",
        "legend": "false",
        "xformat": "dd HH:mm",
        "interpolate": "linear",
        "nodata": "Sem Registos ainda!!!",
        "dot": true,
        "ymin": "0",
        "ymax": "12",
        "removeOlder": "24",
        "removeOlderPoints": "24",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": true,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#24c224",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 2120,
        "y": 320,
        "wires": [
            []
        ]
    },
    {
        "id": "d3c9ad2d985409ec",
        "type": "function",
        "z": "ad2d793d37b001d7",
        "name": "Variaveis",
        "func": "var words = msg.topic.split(\"/\");\nmsg.Zona = words[1];\nmsg.Sensor = words[2].slice(-1);\nmsg.Tipo = msg.payload.Tipo;\nmsg.Ativo = msg.payload.Ativo;\nmsg.Sensor_ID = msg.payload.Sensor_ID;\nmsg.Temperatura = msg.payload.Temperatura;\nmsg.Bateria = msg.payload.Bateria;\nmsg.Versao = msg.payload.VERSAO;\nmsg.Volts = msg.payload.Bateria;\nmsg.ESP_IP = msg.payload.ESP_IP;\nmsg.Var_Payload = msg.payload;\nmsg.Var_Topic = msg.topic;\nmsg.Sensor_Nome = msg.payload.Nome;\nmsg.Wifi = msg.payload.WIFI;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1244.0000114440918,
        "y": 848.9999885559082,
        "wires": [
            [
                "6fbe29ad72708115",
                "0518b02ad7b41e58",
                "a7cc24e3238ad52b",
                "de7c5960e646d184",
                "0a4a07f10c0636a8",
                "d66556a55bd5bb71",
                "9e67beb0e5b7f15b"
            ]
        ]
    },
    {
        "id": "db58613dc763f0c2",
        "type": "function",
        "z": "ad2d793d37b001d7",
        "name": "function 14",
        "func": "var data = [];\nvar series = [\"Temperatura\"];\nvar labels = [\"\"];\nvar i, len, string;\n\nif (msg.Sensor == 1) {\n    for (i = 0, len = msg.payload.length, string = \"\"; i < len; i++) {\n        data.push({ \"x\": Date.parse(msg.payload[i].data), \"y\": Number(msg.payload[i].temperatura) });\n    }\n\n    data = [data];\n    msg.payload = [{ series, data, labels }];\n    return [msg, null, null, null];\n}\nif (msg.Sensor == 2) {\n    for (i = 0, len = msg.payload.length, string = \"\"; i < len; i++) {\n        data.push({ \"x\": Date.parse(msg.payload[i].data), \"y\": Number(msg.payload[i].temperatura) });\n    }\n\n    data = [data];\n    msg.payload = [{ series, data, labels }];\n    return [null, msg, null, null];\n}\nif (msg.Sensor == 3) {\n    for (i = 0, len = msg.payload.length, string = \"\"; i < len; i++) {\n        data.push({ \"x\": Date.parse(msg.payload[i].data), \"y\": Number(msg.payload[i].temperatura) });\n    }\n\n    data = [data];\n    msg.payload = [{ series, data, labels }];\n    return [null, null, msg, null];\n}\nif (msg.Sensor == 4) {\n    for (i = 0, len = msg.payload.length, string = \"\"; i < len; i++) {\n        data.push({ \"x\": Date.parse(msg.payload[i].data), \"y\": Number(msg.payload[i].temperatura) });\n    }\n\n    data = [data];\n    msg.payload = [{ series, data, labels }];\n    return [null, null, null, msg];\n}\n",
        "outputs": 4,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1891.0000114440918,
        "y": 340.00000381469727,
        "wires": [
            [
                "7bb0afb0fc5be9ee"
            ],
            [
                "9faee68ff68371bc"
            ],
            [
                "3351370527b84dd9"
            ],
            [
                "7db9f752fad85ab7"
            ]
        ]
    },
    {
        "id": "7bb0afb0fc5be9ee",
        "type": "ui_chart",
        "z": "ad2d793d37b001d7",
        "name": "Leitura Sensor 1",
        "group": "a96b4083f028a971",
        "order": 9,
        "width": 7,
        "height": 4,
        "label": "Histórico",
        "chartType": "line",
        "legend": "false",
        "xformat": "dd HH:mm",
        "interpolate": "linear",
        "nodata": "Sem Registos ainda!!!",
        "dot": true,
        "ymin": "0",
        "ymax": "12",
        "removeOlder": "24",
        "removeOlderPoints": "24",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#b1cdf1",
            "#ff7f0e",
            "#2ca02c",
            "#40eb1e",
            "#d62728",
            "#ff9896",
            "#7b18d8",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 2120,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "3351370527b84dd9",
        "type": "ui_chart",
        "z": "ad2d793d37b001d7",
        "name": "Leitura Sensor 3",
        "group": "db42c97b640f2a96",
        "order": 8,
        "width": 7,
        "height": 4,
        "label": "Histórico",
        "chartType": "line",
        "legend": "false",
        "xformat": "dd HH:mm",
        "interpolate": "linear",
        "nodata": "Sem Registos ainda!!!",
        "dot": true,
        "ymin": "0",
        "ymax": "12",
        "removeOlder": "24",
        "removeOlderPoints": "24",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 2120,
        "y": 360,
        "wires": [
            []
        ]
    },
    {
        "id": "6d65b6760166ea61",
        "type": "mysql",
        "z": "ad2d793d37b001d7",
        "mydb": "9b6527f7.cad8b8",
        "name": "BDados",
        "x": 1700,
        "y": 520,
        "wires": [
            [
                "a27806d99d7dc2ba"
            ]
        ]
    },
    {
        "id": "9dd9fc93a99ce6bc",
        "type": "e-mail",
        "z": "ad2d793d37b001d7",
        "server": "mail.northspot.pt",
        "port": "465",
        "authtype": "BASIC",
        "saslformat": false,
        "token": "",
        "secure": true,
        "tls": true,
        "name": "arimar.sensores@gmail.com",
        "dname": "Email",
        "x": 2390,
        "y": 1100,
        "wires": []
    },
    {
        "id": "e3c726a53ff1310f",
        "type": "catch",
        "z": "ad2d793d37b001d7",
        "name": "",
        "scope": [
            "9dd9fc93a99ce6bc"
        ],
        "uncaught": false,
        "x": 1030,
        "y": 1320,
        "wires": [
            [
                "0de33eb5e6e2cda6"
            ]
        ]
    },
    {
        "id": "0de33eb5e6e2cda6",
        "type": "debug",
        "z": "ad2d793d37b001d7",
        "name": "debug 42",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1180,
        "y": 1320,
        "wires": []
    },
    {
        "id": "0695de31d8054498",
        "type": "mqtt in",
        "z": "ad2d793d37b001d7",
        "name": "Sensor 4",
        "topic": "TFC/Cozinha/Sensor4",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "a22cb5334c925d0b",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 1040,
        "y": 960,
        "wires": [
            [
                "d3c9ad2d985409ec"
            ]
        ]
    },
    {
        "id": "ed86615d1ce186ec",
        "type": "ui_gauge",
        "z": "ad2d793d37b001d7",
        "name": "Coz_Sensor4",
        "group": "74ed309ae0e8faf0",
        "order": 4,
        "width": 3,
        "height": 2,
        "gtype": "gage",
        "title": "<i class=\"fa fa-thermometer-full\" aria-hidden=\"true\"></i> Temperatura",
        "label": "Cº",
        "format": "{{msg.Temperatura}}",
        "min": "-25",
        "max": "-5",
        "colors": [
            "#ca3838",
            "#0dc50d",
            "#ca3838"
        ],
        "seg1": "-20",
        "seg2": "-10",
        "diff": false,
        "className": "",
        "x": 2580,
        "y": 880,
        "wires": []
    },
    {
        "id": "310af3f9a2f82ef7",
        "type": "ui_text",
        "z": "ad2d793d37b001d7",
        "group": "74ed309ae0e8faf0",
        "order": 1,
        "width": 7,
        "height": 1,
        "name": "Nome",
        "label": "",
        "format": "<font size = 4 font color =deepskyblue>{{msg.Sensor_Nome}}",
        "layout": "row-left",
        "className": "",
        "x": 2550,
        "y": 960,
        "wires": []
    },
    {
        "id": "2dfbeef992a772ef",
        "type": "ui_text",
        "z": "ad2d793d37b001d7",
        "group": "74ed309ae0e8faf0",
        "order": 3,
        "width": 3,
        "height": 1,
        "name": "",
        "label": "Volts:",
        "format": "{{msg.Volts}}",
        "layout": "row-spread",
        "className": "",
        "x": 2550,
        "y": 1000,
        "wires": []
    },
    {
        "id": "c74fff245af85fad",
        "type": "ui_text",
        "z": "ad2d793d37b001d7",
        "group": "74ed309ae0e8faf0",
        "order": 9,
        "width": 7,
        "height": 1,
        "name": "Data",
        "label": "Última Leitura",
        "format": "{{msg.Data}}",
        "layout": "row-spread",
        "className": "",
        "x": 2150,
        "y": 580,
        "wires": []
    },
    {
        "id": "7db9f752fad85ab7",
        "type": "ui_chart",
        "z": "ad2d793d37b001d7",
        "name": "Leitura Sensor 4",
        "group": "74ed309ae0e8faf0",
        "order": 8,
        "width": 7,
        "height": 4,
        "label": "Histórico",
        "chartType": "line",
        "legend": "false",
        "xformat": "dd HH:mm",
        "interpolate": "linear",
        "nodata": "Sem Registos ainda!!!",
        "dot": true,
        "ymin": "-22",
        "ymax": "0",
        "removeOlder": "24",
        "removeOlderPoints": "24",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 2120,
        "y": 400,
        "wires": [
            []
        ]
    },
    {
        "id": "a146f7b55e3584d9",
        "type": "ui_gauge",
        "z": "ad2d793d37b001d7",
        "name": "BAT_Sensor1",
        "group": "a96b4083f028a971",
        "order": 7,
        "width": 3,
        "height": 2,
        "gtype": "gage",
        "title": "<i class=\"fa fa-battery-full\" aria-hidden=\"true\"></i> Bateria",
        "label": "%",
        "format": "{{msg.Bateria}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#ca3838",
            "#e6e600",
            "#0dc50d"
        ],
        "seg1": "30",
        "seg2": "50",
        "diff": false,
        "className": "",
        "x": 2580,
        "y": 380,
        "wires": []
    },
    {
        "id": "fa71ea4e60ae5cdc",
        "type": "ui_gauge",
        "z": "ad2d793d37b001d7",
        "name": "BAT_Sensor2",
        "group": "219b5fb70833fc55",
        "order": 6,
        "width": 3,
        "height": 2,
        "gtype": "gage",
        "title": "<i class=\"fa fa-battery-full\" aria-hidden=\"true\"></i> Bateria",
        "label": "%",
        "format": "{{msg.Bateria}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#ca3838",
            "#e6e600",
            "#0dc50d"
        ],
        "seg1": "30",
        "seg2": "50",
        "diff": false,
        "className": "",
        "x": 2580,
        "y": 600,
        "wires": []
    },
    {
        "id": "7c8325013597972a",
        "type": "ui_gauge",
        "z": "ad2d793d37b001d7",
        "name": "BAT_Sensor3",
        "group": "db42c97b640f2a96",
        "order": 6,
        "width": 3,
        "height": 2,
        "gtype": "gage",
        "title": "<i class=\"fa fa-battery-full\" aria-hidden=\"true\"></i> Bateria",
        "label": "%",
        "format": "{{msg.Bateria}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#ca3838",
            "#e6e600",
            "#0dc50d"
        ],
        "seg1": "30",
        "seg2": "50",
        "diff": false,
        "className": "",
        "x": 2580,
        "y": 780,
        "wires": []
    },
    {
        "id": "4406c958e7b354f8",
        "type": "ui_gauge",
        "z": "ad2d793d37b001d7",
        "name": "BAT_Sensor4",
        "group": "74ed309ae0e8faf0",
        "order": 6,
        "width": 3,
        "height": 2,
        "gtype": "gage",
        "title": "<i class=\"fa fa-battery-full\" aria-hidden=\"true\"></i> Bateria",
        "label": "%",
        "format": "{{msg.Bateria}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#ca3838",
            "#e6e600",
            "#0dc50d"
        ],
        "seg1": "30",
        "seg2": "50",
        "diff": false,
        "className": "",
        "x": 2580,
        "y": 920,
        "wires": []
    },
    {
        "id": "a7cc24e3238ad52b",
        "type": "function",
        "z": "ad2d793d37b001d7",
        "name": "Sinal Wifi",
        "func": "if (msg.Wifi >= -50) {\n    msg.Sinal = \"Forte\";\n}\nelse if (msg.Wifi < -50 && msg.Wifi > -60) {\n    msg.Sinal = \"Bom\";\n}\nelse if (msg.Wifi <= -61 && msg.Wifi > -75) {\n    msg.Sinal = \"Suficiente\";\n}\nelse if (msg.Wifi <= -76) {\n    msg.Sinal = \"Mau\";\n}\n\nif (msg.Sensor == 1) { return [msg, null, null, null]; }\nif (msg.Sensor == 2) { return [null, msg, null, null]; }\nif (msg.Sensor == 3) { return [null, null, msg, null]; }\nif (msg.Sensor == 4) { return [null, null, null, msg]; }",
        "outputs": 4,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1500,
        "y": 140,
        "wires": [
            [
                "afca3cf283e4f608"
            ],
            [
                "6fb56456918af963"
            ],
            [
                "2c2d39d138328a7e"
            ],
            [
                "21e0a9e2f6e2cbf5"
            ]
        ]
    },
    {
        "id": "afca3cf283e4f608",
        "type": "ui_text",
        "z": "ad2d793d37b001d7",
        "group": "a96b4083f028a971",
        "order": 2,
        "width": 4,
        "height": 1,
        "name": "Sinal_AS1",
        "label": "  Sinal Wifi:",
        "format": "{{msg.Sinal}}",
        "layout": "row-spread",
        "className": "",
        "x": 1730,
        "y": 80,
        "wires": []
    },
    {
        "id": "6fb56456918af963",
        "type": "ui_text",
        "z": "ad2d793d37b001d7",
        "group": "219b5fb70833fc55",
        "order": 2,
        "width": 4,
        "height": 1,
        "name": "Sinal_AS2",
        "label": "Sinal Wifi:",
        "format": "{{msg.Sinal}}",
        "layout": "row-spread",
        "className": "",
        "x": 1730,
        "y": 120,
        "wires": []
    },
    {
        "id": "2c2d39d138328a7e",
        "type": "ui_text",
        "z": "ad2d793d37b001d7",
        "group": "db42c97b640f2a96",
        "order": 2,
        "width": 4,
        "height": 1,
        "name": "Sinal_AS3",
        "label": "Sinal Wifi:",
        "format": "{{msg.Sinal}}",
        "layout": "row-spread",
        "className": "",
        "x": 1730,
        "y": 160,
        "wires": []
    },
    {
        "id": "21e0a9e2f6e2cbf5",
        "type": "ui_text",
        "z": "ad2d793d37b001d7",
        "group": "74ed309ae0e8faf0",
        "order": 2,
        "width": 4,
        "height": 1,
        "name": "Sinal_AS4",
        "label": "Sinal Wifi:",
        "format": "{{msg.Sinal}}",
        "layout": "row-spread",
        "className": "p2",
        "x": 1730,
        "y": 200,
        "wires": []
    },
    {
        "id": "85a023af4aeae50e",
        "type": "mqtt out",
        "z": "ad2d793d37b001d7",
        "name": "Sensor 2",
        "topic": "TFC/Cozinha/Sensor2/S2",
        "qos": "2",
        "retain": "true",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "a22cb5334c925d0b",
        "x": 1480,
        "y": 1940,
        "wires": []
    },
    {
        "id": "4db99ccac0208557",
        "type": "mqtt out",
        "z": "ad2d793d37b001d7",
        "name": "Sensor 1",
        "topic": "TFC/Cozinha/Sensor1/S1",
        "qos": "2",
        "retain": "true",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "a22cb5334c925d0b",
        "x": 1480,
        "y": 1700,
        "wires": []
    },
    {
        "id": "c4f2b9e24b7cc778",
        "type": "mqtt out",
        "z": "ad2d793d37b001d7",
        "name": "Sensor 3",
        "topic": "TFC/Cozinha/Sensor3/S3",
        "qos": "2",
        "retain": "true",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "a22cb5334c925d0b",
        "x": 1480,
        "y": 2320,
        "wires": []
    },
    {
        "id": "6690bbaef65a6470",
        "type": "switch",
        "z": "ad2d793d37b001d7",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "ativar",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "avaria",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "carregar",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "desativar",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 4,
        "x": 1630,
        "y": 1600,
        "wires": [
            [
                "3572237baf3779e4"
            ],
            [
                "0fa75c23428006cd"
            ],
            [
                "9f048d373b186462"
            ],
            [
                "69b6a8435c01e9d1"
            ]
        ]
    },
    {
        "id": "0fa75c23428006cd",
        "type": "change",
        "z": "ad2d793d37b001d7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "label",
                "pt": "msg",
                "to": "Equipamento Avariado",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1830,
        "y": 1580,
        "wires": [
            [
                "3a688371d832d9d3"
            ]
        ]
    },
    {
        "id": "9f048d373b186462",
        "type": "change",
        "z": "ad2d793d37b001d7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "label",
                "pt": "msg",
                "to": "Sensor a Carregar",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1830,
        "y": 1620,
        "wires": [
            [
                "3a688371d832d9d3"
            ]
        ]
    },
    {
        "id": "3a688371d832d9d3",
        "type": "ui_text",
        "z": "ad2d793d37b001d7",
        "group": "a96b4083f028a971",
        "order": 14,
        "width": 5,
        "height": 1,
        "name": "S_L_1",
        "label": "",
        "format": "<font size = 4 font color =royalblue>{{msg.label}}",
        "layout": "row-left",
        "className": "",
        "x": 2030,
        "y": 1500,
        "wires": []
    },
    {
        "id": "93751e5b1e0b24a2",
        "type": "ui_text",
        "z": "ad2d793d37b001d7",
        "group": "219b5fb70833fc55",
        "order": 13,
        "width": 5,
        "height": 1,
        "name": "S_L_2",
        "label": "",
        "format": "<font size = 4 font color =royalblue>{{msg.label1}}",
        "layout": "row-left",
        "className": "",
        "style": false,
        "font": "Arial,Arial,Helvetica,sans-serif",
        "fontSize": "14",
        "color": "#0000ff",
        "x": 2030,
        "y": 1780,
        "wires": []
    },
    {
        "id": "296ab6388e4a6811",
        "type": "ui_text",
        "z": "ad2d793d37b001d7",
        "group": "db42c97b640f2a96",
        "order": 13,
        "width": 5,
        "height": 1,
        "name": "S_L_3",
        "label": "",
        "format": "<font size = 4 font color =royalblue>{{msg.label2}}",
        "layout": "row-left",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 2030,
        "y": 2160,
        "wires": []
    },
    {
        "id": "0fc4dfa8b9a3163d",
        "type": "mqtt out",
        "z": "ad2d793d37b001d7",
        "name": "Sensor 4",
        "topic": "TFC/Cozinha/Sensor4/S4",
        "qos": "2",
        "retain": "true",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "a22cb5334c925d0b",
        "x": 1480,
        "y": 2560,
        "wires": []
    },
    {
        "id": "a2aa8819b6ab1fd8",
        "type": "ui_text",
        "z": "ad2d793d37b001d7",
        "group": "74ed309ae0e8faf0",
        "order": 13,
        "width": 5,
        "height": 1,
        "name": "S_L_4",
        "label": "",
        "format": "<font size = 4 font color =royalblue>{{msg.label3}}",
        "layout": "row-left",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 2030,
        "y": 2400,
        "wires": []
    },
    {
        "id": "5a2913dbae191662",
        "type": "function",
        "z": "ad2d793d37b001d7",
        "name": "Update Sensor",
        "func": "if (msg.Sensor == 1) {\n    msg.payload == true ? msg.Ativo = \"S\" : msg.Ativo = \"N\";\n}\nelse if (msg.Sensor == 2) {\n    msg.payload == true ? msg.Ativo = \"S\" : msg.Ativo = \"N\";\n}\nelse if (msg.Sensor == 3) {\n    msg.payload == true ? msg.Ativo = \"S\" : msg.Ativo = \"N\";\n}\nelse if (msg.Sensor == 4) {\n    msg.payload == true ? msg.Ativo = \"S\" : msg.Ativo = \"N\";\n}\nmsg.topic = \"UPDATE sensor SET Ativo='\"+ msg.Ativo +\"' where sensor_n=\"+ msg.Sensor +\" and zona=1\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1540,
        "y": 2040,
        "wires": [
            [
                "3da13a6de3505a13"
            ]
        ]
    },
    {
        "id": "3da13a6de3505a13",
        "type": "mysql",
        "z": "ad2d793d37b001d7",
        "mydb": "9b6527f7.cad8b8",
        "name": "BDados",
        "x": 1740,
        "y": 2060,
        "wires": [
            []
        ]
    },
    {
        "id": "13b7d4b1e9417713",
        "type": "ui_button",
        "z": "ad2d793d37b001d7",
        "name": "",
        "group": "a96b4083f028a971",
        "order": 11,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "Ativar",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "check",
        "payload": "ativar",
        "payloadType": "str",
        "topic": "ativar",
        "topicType": "msg",
        "x": 750,
        "y": 1700,
        "wires": [
            [
                "6690bbaef65a6470",
                "768ac6e40affbea5"
            ]
        ]
    },
    {
        "id": "1de1a4a865923b74",
        "type": "ui_button",
        "z": "ad2d793d37b001d7",
        "name": "",
        "group": "a96b4083f028a971",
        "order": 13,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "Desativar",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "fa-ban",
        "payload": "desativar",
        "payloadType": "str",
        "topic": "",
        "topicType": "str",
        "x": 760,
        "y": 1600,
        "wires": [
            [
                "8d79e6da53ded164"
            ]
        ]
    },
    {
        "id": "8d79e6da53ded164",
        "type": "change",
        "z": "ad2d793d37b001d7",
        "name": "XY",
        "rules": [
            {
                "t": "set",
                "p": "position.x",
                "pt": "msg",
                "to": "event.bbox[2]-150",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "position.y",
                "pt": "msg",
                "to": "event.bbox[3]+40",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 930,
        "y": 1600,
        "wires": [
            [
                "7982c849fb8a723d"
            ]
        ]
    },
    {
        "id": "7982c849fb8a723d",
        "type": "ui_context_menu",
        "z": "ad2d793d37b001d7",
        "group": "a96b4083f028a971",
        "order": 16,
        "width": 0,
        "height": 0,
        "fontSize": 16,
        "inputPositionXField": "position.x",
        "inputPositionXType": "msg",
        "inputPositionYField": "position.y",
        "inputPositionYType": "msg",
        "outputField": "payload",
        "inputMenuField": "",
        "inputMenuType": "fixed",
        "menuItems": [
            {
                "id": "motivo",
                "icon": "",
                "label": "Motivo",
                "topic": "",
                "payload": "",
                "payloadType": "str",
                "visible": true,
                "enabled": false
            },
            {
                "id": "avaria",
                "icon": "fa-wrench",
                "label": "Avaria",
                "topic": "avaria",
                "payload": "avaria",
                "payloadType": "str",
                "visible": true,
                "enabled": true
            },
            {
                "id": "carregar",
                "icon": "fa-battery-1",
                "label": "Carregar Bateria",
                "topic": "carregar",
                "payload": "carregar",
                "payloadType": "str",
                "visible": true,
                "enabled": true
            },
            {
                "id": "desativar",
                "icon": "fa-ban",
                "label": "Desativar",
                "topic": "desativar",
                "payload": "desativar",
                "payloadType": "str",
                "visible": true,
                "enabled": true
            }
        ],
        "colors": "theme",
        "textColor": "#000000",
        "backgroundColor": "#ffffff",
        "borderColor": "#626262",
        "intervalLength": "0",
        "intervalUnit": "secs",
        "startTimerAtOpen": false,
        "startTimerAtLeave": true,
        "stopTimerAtEnter": true,
        "name": "Menu Sensor 1",
        "x": 1100,
        "y": 1600,
        "wires": [
            [
                "6690bbaef65a6470",
                "768ac6e40affbea5"
            ]
        ]
    },
    {
        "id": "69b6a8435c01e9d1",
        "type": "change",
        "z": "ad2d793d37b001d7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "label",
                "pt": "msg",
                "to": "Equipamento Desligado",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1830,
        "y": 1660,
        "wires": [
            [
                "3a688371d832d9d3"
            ]
        ]
    },
    {
        "id": "3572237baf3779e4",
        "type": "change",
        "z": "ad2d793d37b001d7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "label",
                "pt": "msg",
                "to": "Equipamento Ativo",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1830,
        "y": 1540,
        "wires": [
            [
                "3a688371d832d9d3"
            ]
        ]
    },
    {
        "id": "768ac6e40affbea5",
        "type": "function",
        "z": "ad2d793d37b001d7",
        "name": "function 15",
        "func": "if(msg.payload === \"ativar\"){\n    msg.payload = true;\n    msg.Estado = \"Ativo\";\n}\nif (msg.topic === \"avaria\"){\n    msg.Estado = \"Avaria\";\n    msg.payload = false;\n}\nif(msg.topic === \"desativar\"){\n    msg.Estado = \"Desativado\";\n    msg.payload = false;\n}\nif (msg.topic === \"carregar\"){\n    msg.Estado = \"Em Carregamento\";\n    msg.payload = false;\n}\nmsg.Sensor = 1;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1270,
        "y": 1700,
        "wires": [
            [
                "4db99ccac0208557",
                "5a2913dbae191662",
                "363921af0dd0f3ad"
            ]
        ]
    },
    {
        "id": "363921af0dd0f3ad",
        "type": "function",
        "z": "ad2d793d37b001d7",
        "name": "Inserir Estado",
        "func": "msg.payload == true ? msg.Ativo = \"S\" : msg.Ativo = \"N\";\nmsg.topic = \"INSERT into estados(zona, sensor_n, estado, data, motivo) values(1, \" + msg.Sensor + \", '\" + msg.Ativo + \"', now(),'\" + msg.Estado +\"' );\"\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1540,
        "y": 2100,
        "wires": [
            [
                "3da13a6de3505a13"
            ]
        ]
    },
    {
        "id": "f28f5e2d55aded45",
        "type": "switch",
        "z": "ad2d793d37b001d7",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "ativar",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "avaria",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "carregar",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "desativar",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 4,
        "x": 1610,
        "y": 1860,
        "wires": [
            [
                "27f1526eb50a448d"
            ],
            [
                "1c91ad0e9c333a5a"
            ],
            [
                "eb2f940a24cf2547"
            ],
            [
                "54643fe2c5d8efde"
            ]
        ]
    },
    {
        "id": "1c91ad0e9c333a5a",
        "type": "change",
        "z": "ad2d793d37b001d7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "label1",
                "pt": "msg",
                "to": "Equipamento Avariado",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1820,
        "y": 1840,
        "wires": [
            [
                "93751e5b1e0b24a2"
            ]
        ]
    },
    {
        "id": "eb2f940a24cf2547",
        "type": "change",
        "z": "ad2d793d37b001d7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "label1",
                "pt": "msg",
                "to": "Sensor a Carregar",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1820,
        "y": 1880,
        "wires": [
            [
                "93751e5b1e0b24a2"
            ]
        ]
    },
    {
        "id": "54643fe2c5d8efde",
        "type": "change",
        "z": "ad2d793d37b001d7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "label1",
                "pt": "msg",
                "to": "Equipamento Desligado",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1820,
        "y": 1920,
        "wires": [
            [
                "93751e5b1e0b24a2"
            ]
        ]
    },
    {
        "id": "27f1526eb50a448d",
        "type": "change",
        "z": "ad2d793d37b001d7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "label1",
                "pt": "msg",
                "to": "Equipamento Ativo",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1820,
        "y": 1800,
        "wires": [
            [
                "93751e5b1e0b24a2"
            ]
        ]
    },
    {
        "id": "90a2eb917df77605",
        "type": "switch",
        "z": "ad2d793d37b001d7",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "ativar",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "avaria",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "carregar",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "desativar",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 4,
        "x": 1610,
        "y": 2240,
        "wires": [
            [
                "d8f4ad236cdc507a"
            ],
            [
                "baff40e491bcc10b"
            ],
            [
                "9e558b62ab8427b3"
            ],
            [
                "64dd4e35b09e0bd1"
            ]
        ]
    },
    {
        "id": "baff40e491bcc10b",
        "type": "change",
        "z": "ad2d793d37b001d7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "label2",
                "pt": "msg",
                "to": "Equipamento Avariado",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1820,
        "y": 2220,
        "wires": [
            [
                "296ab6388e4a6811"
            ]
        ]
    },
    {
        "id": "9e558b62ab8427b3",
        "type": "change",
        "z": "ad2d793d37b001d7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "label2",
                "pt": "msg",
                "to": "Sensor a Carregar",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1820,
        "y": 2260,
        "wires": [
            [
                "296ab6388e4a6811"
            ]
        ]
    },
    {
        "id": "64dd4e35b09e0bd1",
        "type": "change",
        "z": "ad2d793d37b001d7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "label2",
                "pt": "msg",
                "to": "Equipamento Desligado",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1820,
        "y": 2300,
        "wires": [
            [
                "296ab6388e4a6811"
            ]
        ]
    },
    {
        "id": "d8f4ad236cdc507a",
        "type": "change",
        "z": "ad2d793d37b001d7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "label2",
                "pt": "msg",
                "to": "Equipamento Ativo",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1820,
        "y": 2180,
        "wires": [
            [
                "296ab6388e4a6811"
            ]
        ]
    },
    {
        "id": "70aa5523f9b1ea91",
        "type": "switch",
        "z": "ad2d793d37b001d7",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "ativar",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "avaria",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "carregar",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "desativar",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 4,
        "x": 1610,
        "y": 2480,
        "wires": [
            [
                "ba37e8080e49c84f"
            ],
            [
                "5c23232ddaf8db20"
            ],
            [
                "cda60b55df8bffb5"
            ],
            [
                "2c6d665e55081eb4"
            ]
        ]
    },
    {
        "id": "5c23232ddaf8db20",
        "type": "change",
        "z": "ad2d793d37b001d7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "label3",
                "pt": "msg",
                "to": "Equipamento Avariado",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1820,
        "y": 2460,
        "wires": [
            [
                "a2aa8819b6ab1fd8"
            ]
        ]
    },
    {
        "id": "cda60b55df8bffb5",
        "type": "change",
        "z": "ad2d793d37b001d7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "label3",
                "pt": "msg",
                "to": "Sensor a Carregar",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1820,
        "y": 2500,
        "wires": [
            [
                "a2aa8819b6ab1fd8"
            ]
        ]
    },
    {
        "id": "2c6d665e55081eb4",
        "type": "change",
        "z": "ad2d793d37b001d7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "label3",
                "pt": "msg",
                "to": "Equipamento Desligado",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1820,
        "y": 2540,
        "wires": [
            [
                "a2aa8819b6ab1fd8"
            ]
        ]
    },
    {
        "id": "ba37e8080e49c84f",
        "type": "change",
        "z": "ad2d793d37b001d7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "label3",
                "pt": "msg",
                "to": "Equipamento Ativo",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1820,
        "y": 2420,
        "wires": [
            [
                "a2aa8819b6ab1fd8"
            ]
        ]
    },
    {
        "id": "dd1919088a0a96df",
        "type": "ui_button",
        "z": "ad2d793d37b001d7",
        "name": "",
        "group": "219b5fb70833fc55",
        "order": 10,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "Ativar",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "check",
        "payload": "ativar",
        "payloadType": "str",
        "topic": "ativar",
        "topicType": "msg",
        "x": 750,
        "y": 1940,
        "wires": [
            [
                "fb8e162e19151370",
                "f28f5e2d55aded45"
            ]
        ]
    },
    {
        "id": "1c86031cc18959ac",
        "type": "ui_button",
        "z": "ad2d793d37b001d7",
        "name": "",
        "group": "219b5fb70833fc55",
        "order": 12,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "Desativar",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "fa-ban",
        "payload": "desativar",
        "payloadType": "str",
        "topic": "",
        "topicType": "str",
        "x": 760,
        "y": 1860,
        "wires": [
            [
                "e3272b272a2d22ae"
            ]
        ]
    },
    {
        "id": "e3272b272a2d22ae",
        "type": "change",
        "z": "ad2d793d37b001d7",
        "name": "XY",
        "rules": [
            {
                "t": "set",
                "p": "position.x",
                "pt": "msg",
                "to": "event.bbox[2]-150",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "position.y",
                "pt": "msg",
                "to": "event.bbox[3]+40",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 930,
        "y": 1860,
        "wires": [
            [
                "c8b7b1783fb615eb"
            ]
        ]
    },
    {
        "id": "c8b7b1783fb615eb",
        "type": "ui_context_menu",
        "z": "ad2d793d37b001d7",
        "group": "219b5fb70833fc55",
        "order": 15,
        "width": 0,
        "height": 0,
        "fontSize": 16,
        "inputPositionXField": "position.x",
        "inputPositionXType": "msg",
        "inputPositionYField": "position.y",
        "inputPositionYType": "msg",
        "outputField": "payload",
        "inputMenuField": "",
        "inputMenuType": "fixed",
        "menuItems": [
            {
                "id": "avaria",
                "icon": "fa-wrench",
                "label": "Avaria",
                "topic": "avaria",
                "payload": "avaria",
                "payloadType": "str",
                "visible": true,
                "enabled": true
            },
            {
                "id": "carregar",
                "icon": "fa-battery-1",
                "label": "Carregar Bateria",
                "topic": "carregar",
                "payload": "carregar",
                "payloadType": "str",
                "visible": true,
                "enabled": true
            },
            {
                "id": "desativar",
                "icon": "fa-ban",
                "label": "Desativar",
                "topic": "desativar",
                "payload": "desativar",
                "payloadType": "str",
                "visible": true,
                "enabled": true
            }
        ],
        "colors": "theme",
        "textColor": "#000000",
        "backgroundColor": "#ffffff",
        "borderColor": "#626262",
        "intervalLength": "0",
        "intervalUnit": "secs",
        "startTimerAtOpen": false,
        "startTimerAtLeave": true,
        "stopTimerAtEnter": true,
        "name": "Menu Sensor 2",
        "x": 1100,
        "y": 1860,
        "wires": [
            [
                "fb8e162e19151370",
                "f28f5e2d55aded45"
            ]
        ]
    },
    {
        "id": "fb8e162e19151370",
        "type": "function",
        "z": "ad2d793d37b001d7",
        "name": "function 16",
        "func": "if (msg.payload === \"ativar\") {\n    msg.payload = true;\n    msg.Estado = \"Ativo\";\n}\nif (msg.topic === \"avaria\") {\n    msg.Estado = \"Avaria\";\n    msg.payload = false;\n}\nif (msg.topic === \"desativar\") {\n    msg.Estado = \"Desativado\";\n    msg.payload = false;\n}\nif (msg.topic === \"carregar\") {\n    msg.Estado = \"Em Carregamento\";\n    msg.payload = false;\n}\nmsg.Sensor = 2;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1270,
        "y": 1940,
        "wires": [
            [
                "85a023af4aeae50e",
                "5a2913dbae191662",
                "363921af0dd0f3ad"
            ]
        ]
    },
    {
        "id": "4834fdf55158354d",
        "type": "ui_button",
        "z": "ad2d793d37b001d7",
        "name": "",
        "group": "db42c97b640f2a96",
        "order": 10,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "Ativar",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "check",
        "payload": "ativar",
        "payloadType": "str",
        "topic": "ativar",
        "topicType": "msg",
        "x": 750,
        "y": 2320,
        "wires": [
            [
                "b7d3c82ce8125189",
                "90a2eb917df77605"
            ]
        ]
    },
    {
        "id": "5f79ea6b481fcf08",
        "type": "ui_button",
        "z": "ad2d793d37b001d7",
        "name": "",
        "group": "db42c97b640f2a96",
        "order": 12,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "Desativar",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "fa-ban",
        "payload": "desativar",
        "payloadType": "str",
        "topic": "",
        "topicType": "str",
        "x": 760,
        "y": 2240,
        "wires": [
            [
                "eb549a870567450d"
            ]
        ]
    },
    {
        "id": "eb549a870567450d",
        "type": "change",
        "z": "ad2d793d37b001d7",
        "name": "XY",
        "rules": [
            {
                "t": "set",
                "p": "position.x",
                "pt": "msg",
                "to": "event.bbox[2]-150",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "position.y",
                "pt": "msg",
                "to": "event.bbox[3]+40",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 930,
        "y": 2240,
        "wires": [
            [
                "5e1b909b7908d286"
            ]
        ]
    },
    {
        "id": "5e1b909b7908d286",
        "type": "ui_context_menu",
        "z": "ad2d793d37b001d7",
        "group": "db42c97b640f2a96",
        "order": 15,
        "width": 0,
        "height": 0,
        "fontSize": 16,
        "inputPositionXField": "position.x",
        "inputPositionXType": "msg",
        "inputPositionYField": "position.y",
        "inputPositionYType": "msg",
        "outputField": "payload",
        "inputMenuField": "",
        "inputMenuType": "fixed",
        "menuItems": [
            {
                "id": "avaria",
                "icon": "fa-wrench",
                "label": "Avaria",
                "topic": "avaria",
                "payload": "avaria",
                "payloadType": "str",
                "visible": true,
                "enabled": true
            },
            {
                "id": "carregar",
                "icon": "fa-battery-1",
                "label": "Carregar Bateria",
                "topic": "carregar",
                "payload": "carregar",
                "payloadType": "str",
                "visible": true,
                "enabled": true
            },
            {
                "id": "desativar",
                "icon": "fa-ban",
                "label": "Desativar",
                "topic": "desativar",
                "payload": "desativar",
                "payloadType": "str",
                "visible": true,
                "enabled": true
            }
        ],
        "colors": "theme",
        "textColor": "#000000",
        "backgroundColor": "#ffffff",
        "borderColor": "#626262",
        "intervalLength": "0",
        "intervalUnit": "secs",
        "startTimerAtOpen": false,
        "startTimerAtLeave": true,
        "stopTimerAtEnter": true,
        "name": "Menu Sensor 3",
        "x": 1100,
        "y": 2240,
        "wires": [
            [
                "b7d3c82ce8125189",
                "90a2eb917df77605"
            ]
        ]
    },
    {
        "id": "b7d3c82ce8125189",
        "type": "function",
        "z": "ad2d793d37b001d7",
        "name": "function 17",
        "func": "if (msg.payload === \"ativar\") {\n    msg.payload = true;\n    msg.Estado = \"Ativo\";\n}\nif (msg.topic === \"avaria\") {\n    msg.Estado = \"Avaria\";\n    msg.payload = false;\n}\nif (msg.topic === \"desativar\") {\n    msg.Estado = \"Desativado\";\n    msg.payload = false;\n}\nif (msg.topic === \"carregar\") {\n    msg.Estado = \"Em Carregamento\";\n    msg.payload = false;\n}\nmsg.Sensor = 3;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1270,
        "y": 2320,
        "wires": [
            [
                "5a2913dbae191662",
                "363921af0dd0f3ad",
                "c4f2b9e24b7cc778"
            ]
        ]
    },
    {
        "id": "f034955e6f6d532e",
        "type": "ui_button",
        "z": "ad2d793d37b001d7",
        "name": "",
        "group": "74ed309ae0e8faf0",
        "order": 10,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "Ativar",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "check",
        "payload": "ativar",
        "payloadType": "str",
        "topic": "ativar",
        "topicType": "msg",
        "x": 750,
        "y": 2560,
        "wires": [
            [
                "a9478d45a6717fbd",
                "70aa5523f9b1ea91"
            ]
        ]
    },
    {
        "id": "e5fcdca4c1966a65",
        "type": "ui_button",
        "z": "ad2d793d37b001d7",
        "name": "",
        "group": "74ed309ae0e8faf0",
        "order": 12,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "Desativar",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "fa-ban",
        "payload": "desativar",
        "payloadType": "str",
        "topic": "",
        "topicType": "str",
        "x": 760,
        "y": 2480,
        "wires": [
            [
                "956f3069893ab14a"
            ]
        ]
    },
    {
        "id": "956f3069893ab14a",
        "type": "change",
        "z": "ad2d793d37b001d7",
        "name": "XY",
        "rules": [
            {
                "t": "set",
                "p": "position.x",
                "pt": "msg",
                "to": "event.bbox[2]-150",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "position.y",
                "pt": "msg",
                "to": "event.bbox[3]+40",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 930,
        "y": 2480,
        "wires": [
            [
                "8e25c7dc51f779f5"
            ]
        ]
    },
    {
        "id": "8e25c7dc51f779f5",
        "type": "ui_context_menu",
        "z": "ad2d793d37b001d7",
        "group": "74ed309ae0e8faf0",
        "order": 15,
        "width": 0,
        "height": 0,
        "fontSize": 16,
        "inputPositionXField": "position.x",
        "inputPositionXType": "msg",
        "inputPositionYField": "position.y",
        "inputPositionYType": "msg",
        "outputField": "payload",
        "inputMenuField": "",
        "inputMenuType": "fixed",
        "menuItems": [
            {
                "id": "avaria",
                "icon": "fa-wrench",
                "label": "Avaria",
                "topic": "avaria",
                "payload": "avaria",
                "payloadType": "str",
                "visible": true,
                "enabled": true
            },
            {
                "id": "carregar",
                "icon": "fa-battery-1",
                "label": "Carregar Bateria",
                "topic": "carregar",
                "payload": "carregar",
                "payloadType": "str",
                "visible": true,
                "enabled": true
            },
            {
                "id": "desativar",
                "icon": "fa-ban",
                "label": "Desativar",
                "topic": "desativar",
                "payload": "desativar",
                "payloadType": "str",
                "visible": true,
                "enabled": true
            }
        ],
        "colors": "theme",
        "textColor": "#000000",
        "backgroundColor": "#ffffff",
        "borderColor": "#626262",
        "intervalLength": "0",
        "intervalUnit": "secs",
        "startTimerAtOpen": false,
        "startTimerAtLeave": true,
        "stopTimerAtEnter": true,
        "name": "Menu Sensor 4",
        "x": 1100,
        "y": 2480,
        "wires": [
            [
                "a9478d45a6717fbd",
                "70aa5523f9b1ea91"
            ]
        ]
    },
    {
        "id": "a9478d45a6717fbd",
        "type": "function",
        "z": "ad2d793d37b001d7",
        "name": "function 18",
        "func": "if (msg.payload === \"ativar\") {\n    msg.payload = true;\n    msg.Estado = \"Ativo\";\n}\nif (msg.topic === \"avaria\") {\n    msg.Estado = \"Avaria\";\n    msg.payload = false;\n}\nif (msg.topic === \"desativar\") {\n    msg.Estado = \"Desativado\";\n    msg.payload = false;\n}\nif (msg.topic === \"carregar\") {\n    msg.Estado = \"Em Carregamento\";\n    msg.payload = false;\n}\nmsg.Sensor = 4;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1270,
        "y": 2560,
        "wires": [
            [
                "5a2913dbae191662",
                "363921af0dd0f3ad",
                "0fc4dfa8b9a3163d"
            ]
        ]
    },
    {
        "id": "07a01e4bf35e0a18",
        "type": "function",
        "z": "ad2d793d37b001d7",
        "name": "Verifica Temperatura",
        "func": "msg.topic = \"ALERTA - Zona da Cozinha - Sensor: \" + msg.Sensor;\nvar alta =  \"ALERTA TEMPERATURA ALTA\";\nvar baixa = \"ALERTA TEMPERATURA BAIXA\";\nvar w = \"%0A%0AZona: Cozinha%0ASensor: \" + msg.Sensor + \"%0ATemperatura: \" + msg.Temperatura + \" ºC %0A%0AVerifique o Equipamento.\";\nvar p = \"</h1><p>Temperatura: \" + msg.Temperatura + \"</p><p>Verifique o Equipamento!!!</p>\" \n\n\nif (msg.Tipo == 1) {\n    if (msg.Temperatura >= 10) {\n        msg.whatsapp = alta + w;\n        msg.payload = \"<h1>\" + alta + p;\n        return [msg, null];\n    }\n    else if (msg.Temperatura <= 2) {\n        msg.whatsapp = baixa + w;\n        msg.payload = \"<h1>\" + baixa + p;\n        return [msg, null];\n    }\n    else\n        return [null, null];\n}\nelse if (msg.Tipo == 2) {\n    if (msg.Temperatura >= -5) {\n        msg.whatsapp = alta + w;\n        msg.payload = \"<h1>\" + alta + p;\n        return [msg, null];\n    }\n    else if (msg.Temperatura <= -22) {\n        msg.whatsapp = baixa + w;\n        msg.payload = \"<h1>\" + baixa + p;\n        return [msg, null];\n    }\n    else\n        return [null, null];\n}\n",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2100,
        "y": 1120,
        "wires": [
            [
                "54f4b7f495d4182c",
                "9dd9fc93a99ce6bc"
            ],
            []
        ]
    },
    {
        "id": "54f4b7f495d4182c",
        "type": "node-red-contrib-whatsapp-cmb-send-message",
        "z": "ad2d793d37b001d7",
        "name": "Whatsapp",
        "account": "b5b4b586aa40dcf0",
        "text": "whatsapp",
        "inputtypemessage": "msg",
        "rejectssl": false,
        "x": 2400,
        "y": 1160,
        "wires": [
            [
                "83a2a1ef4363c20c"
            ]
        ]
    },
    {
        "id": "83a2a1ef4363c20c",
        "type": "debug",
        "z": "ad2d793d37b001d7",
        "name": "debug 59",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2560,
        "y": 1160,
        "wires": []
    },
    {
        "id": "743ec0cb68ea731f",
        "type": "function",
        "z": "ad2d793d37b001d7",
        "name": "Verifica Bateria",
        "func": "// Bateria\nvar recebido = msg.Bateria;\nvar porcento = ((recebido - 3.2) * 100) / 1;\nif (porcento > 100)\n    msg.Bateria = 100;\nelse\n    msg.Bateria = porcento;\n\nmsg.Bateria = msg.Bateria.toFixed(2);\n\nmsg.topic = \"ALERTA - Zona da Cozinha - Sensor: \" + msg.Sensor;\nvar muito_baixa = \"ALERTA BATERIA MUITO BAIXA\";\nvar baixa = \"ALERTA BATERIA BAIXA\";\nvar whatsapp = \"%0A%0AZona: Cozinha%0ASensor: \" + msg.Sensor + \"%0ABateria: \" + msg.Bateria + \" % %0A%0AVerifique o Equipamento.\";\nvar p = \"</h1><p>Bateria: \" + msg.Bateria + \"</p><p>Verifique o Equipamento!!!</p>\";\n\nif (msg.Bateria < 25) {\n    msg.whatsapp = muito_baixa + whatsapp;\n    msg.payload = \"<h1>\" + muito_baixa + p;\n    return [msg, null];\n}\nelse if (msg.Bateria > 25 && msg.Bateria < 30) {\n    msg.whatsapp = baixa + whatsapp;\n    msg.payload = \"<h1>\" + baixa + p;\n    return [msg, null];\n}\nelse\n    return [null, null];\n\n    \n   \n",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2080,
        "y": 1180,
        "wires": [
            [
                "54f4b7f495d4182c",
                "9dd9fc93a99ce6bc"
            ],
            []
        ]
    },
    {
        "id": "e9d1e6a1ea13e0cb",
        "type": "switch",
        "z": "ad2d793d37b001d7",
        "name": "S / N",
        "property": "payload[0].Ativo",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "S",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "N",
                "vt": "str"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 1850,
        "y": 1140,
        "wires": [
            [
                "07a01e4bf35e0a18",
                "743ec0cb68ea731f"
            ],
            []
        ]
    },
    {
        "id": "de7c5960e646d184",
        "type": "function",
        "z": "ad2d793d37b001d7",
        "name": "Estado Sensor",
        "func": "msg.topic = \"SELECT Ativo FROM sensor where sensor_ID = '\" + msg.Sensor_ID + \"'\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1520,
        "y": 1140,
        "wires": [
            [
                "86e80b99d0eb4aa7"
            ]
        ]
    },
    {
        "id": "86e80b99d0eb4aa7",
        "type": "mysql",
        "z": "ad2d793d37b001d7",
        "mydb": "9b6527f7.cad8b8",
        "name": "BDados",
        "x": 1700,
        "y": 1140,
        "wires": [
            [
                "e9d1e6a1ea13e0cb"
            ]
        ]
    },
    {
        "id": "c9930e01c33fa567",
        "type": "switch",
        "z": "ad2d793d37b001d7",
        "name": "Existe Sensor?",
        "property": "payload[0].Count(*)",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "str"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 1900,
        "y": 1300,
        "wires": [
            [],
            [
                "de5d431853d643e7"
            ]
        ]
    },
    {
        "id": "d66556a55bd5bb71",
        "type": "function",
        "z": "ad2d793d37b001d7",
        "name": "Select Sensor",
        "func": "msg.topic = \"SELECT Count(*) FROM sensor where sensor_ID = '\" + msg.Sensor_ID + \"'\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1533.3333129882812,
        "y": 1302.222222328186,
        "wires": [
            [
                "d0f4dc0abda10ef9"
            ]
        ]
    },
    {
        "id": "d0f4dc0abda10ef9",
        "type": "mysql",
        "z": "ad2d793d37b001d7",
        "mydb": "9b6527f7.cad8b8",
        "name": "BDados",
        "x": 1718.888816833496,
        "y": 1301.1111249923706,
        "wires": [
            [
                "c9930e01c33fa567"
            ]
        ]
    },
    {
        "id": "de5d431853d643e7",
        "type": "function",
        "z": "ad2d793d37b001d7",
        "name": "Inserir Sensor",
        "func": "msg.payload = msg.Var_Payload;\nmsg.topic = msg.Var_Topic;\nvar zona = 1;\nmsg.topic = \"INSERT into sensor(Sensor_ID, sensor_n, Zona,Ativo,IP_Sensor) VALUES ('\" + msg.payload.Sensor_ID + \"',\" + msg.payload.Sensor +\",\"+ zona +\",'S','\"+ msg.payload.ESP_IP +\"')\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2121.111114501953,
        "y": 1305.5555391311646,
        "wires": [
            [
                "0587c1b8301b2d2e"
            ]
        ]
    },
    {
        "id": "0587c1b8301b2d2e",
        "type": "mysql",
        "z": "ad2d793d37b001d7",
        "mydb": "9b6527f7.cad8b8",
        "name": "BDados",
        "x": 2299.99991607666,
        "y": 1306.666657447815,
        "wires": [
            []
        ]
    },
    {
        "id": "9e67beb0e5b7f15b",
        "type": "function",
        "z": "ad2d793d37b001d7",
        "name": "Sensor - S / N",
        "func": "if (msg.Sensor == 1){\n    if(msg.Ativo === \"S\")\n        msg.label = \"Equipamento Ativo\";\n    else\n        msg.label = \"Equipamento Inativo\";\n    return [msg, null, null, null];\n}\nif (msg.Sensor == 2) {\n    if (msg.Ativo === \"S\")\n        msg.label1 = \"Equipamento Ativo\";\n    else\n        msg.label1 = \"Equipamento Inativo\";\n    return [null, msg, null, null];\n}\nif (msg.Sensor == 3) {\n    if (msg.Ativo === \"S\")\n        msg.label2 = \"Equipamento Ativo\";\n    else\n        msg.label2 = \"Equipamento Inativo\";\n    return [null, null, msg, null];\n} \nif (msg.Sensor == 4) {\n    if (msg.Ativo === \"S\")\n        msg.label3 = \"Equipamento Ativo\";\n    else\n        msg.label3 = \"Equipamento Inativo\";\n    return [null, null, null, msg];\n} \nreturn msg;",
        "outputs": 4,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1400,
        "y": 1480,
        "wires": [
            [
                "3a688371d832d9d3"
            ],
            [
                "93751e5b1e0b24a2"
            ],
            [
                "296ab6388e4a6811"
            ],
            [
                "a2aa8819b6ab1fd8"
            ]
        ]
    },
    {
        "id": "29497f5d9f4cbb3e",
        "type": "mqtt in",
        "z": "624e12446ae56fec",
        "name": "Sensor 1",
        "topic": "TFC/Sala/Sensor1",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "a22cb5334c925d0b",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 1400,
        "y": 780,
        "wires": [
            [
                "b21213eb857e5695"
            ]
        ]
    },
    {
        "id": "b177151acb396606",
        "type": "ui_gauge",
        "z": "624e12446ae56fec",
        "name": "Arm_Sensor1",
        "group": "8af8109be17f63fd",
        "order": 5,
        "width": 3,
        "height": 2,
        "gtype": "gage",
        "title": "<i class=\"fa fa-thermometer-full\" aria-hidden=\"true\"></i> Temperatura ",
        "label": "Cº",
        "format": "{{msg.Temperatura}}",
        "min": "0",
        "max": "12",
        "colors": [
            "#0dc50d",
            "#0dc50d",
            "#ca3838"
        ],
        "seg1": "2",
        "seg2": "10",
        "diff": false,
        "className": "",
        "x": 3180,
        "y": 340,
        "wires": []
    },
    {
        "id": "fd6e4f9fb78a777c",
        "type": "mqtt in",
        "z": "624e12446ae56fec",
        "name": "Sensor 3",
        "topic": "TFC/Sala/Sensor3",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "a22cb5334c925d0b",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 1400,
        "y": 960,
        "wires": [
            [
                "b21213eb857e5695"
            ]
        ]
    },
    {
        "id": "dce40d5e682307a0",
        "type": "mqtt in",
        "z": "624e12446ae56fec",
        "name": "Sensor 2",
        "topic": "TFC/Sala/Sensor2",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "a22cb5334c925d0b",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 1400,
        "y": 860,
        "wires": [
            [
                "b21213eb857e5695"
            ]
        ]
    },
    {
        "id": "9ade9c118d39ed0b",
        "type": "function",
        "z": "624e12446ae56fec",
        "name": "Max e Min",
        "func": "msg.topic = \"SELECT maximo,minimo FROM equipamento where idtipo = '\" + msg.Tipo + \"'\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1990,
        "y": 560,
        "wires": [
            [
                "ec52436c013cb9be"
            ]
        ]
    },
    {
        "id": "098dd01e5cb26854",
        "type": "mysql",
        "z": "624e12446ae56fec",
        "mydb": "9b6527f7.cad8b8",
        "name": "BDados",
        "x": 2160,
        "y": 780,
        "wires": [
            [
                "efcf4ff190138c1b"
            ]
        ]
    },
    {
        "id": "3d6769fbc3a1a9b2",
        "type": "function",
        "z": "624e12446ae56fec",
        "name": "Gráficos",
        "func": "// Bateria\nvar recebido = msg.Bateria;\nvar porcento = ((recebido - 3.2) * 100) / 1;\nif (porcento > 100)\n    msg.Bateria = 100;\nelse\n    msg.Bateria = porcento;\n\nmsg.Bateria = msg.Bateria.toFixed(2);\nmsg.Temperatura = msg.Temperatura.toFixed(2);\nmsg.Volts = msg.Volts.toFixed(2);\n\n\nif (msg.Sensor == 1) {\n    msg.Sensor_Nome = \"Sensor 1 - \" + msg.Sensor_Nome;\n    msg.ui_control = {\n        \"id\": \"Arm_Sensor1\",\n        \"gtype\": \"gage\",\n        \"options\": {\n            \"min\": msg.payload[0].minimo,\n            \"max\": msg.payload[0].maximo,\n            \"colors\": [[202, 56, 56], [13, 197, 13], [202, 56, 56]]\n        }\n    }\n    msg.ui_control = {\n        \"id\": \"BAT_Sensor1\",\n        \"gtype\": \"gage\",\n        \"options\": {\n            \"colors\": [[202, 56, 56], [13, 197, 13], [202, 56, 56]]\n        }\n    }\n    \n    return [msg, null, null];\n}\nif (msg.Sensor == 2) {\n    msg.Sensor_Nome = \"Sensor 2 - \" + msg.Sensor_Nome;\n    msg.ui_control = {\n        \"id\": \"Arm_Sensor2\",\n        \"gtype\": \"gage\",\n        \"options\": {\n            \"min\": msg.payload[0].minimo,\n            \"max\": msg.payload[0].maximo,\n            \"colors\": [[202, 56, 56], [13, 197, 13], [202, 56, 56]]\n        }\n    }\n    msg.ui_control = {\n        \"id\": \"BAT_Sensor2\",\n        \"gtype\": \"gage\",\n        \"options\": {\n            \"colors\": [[202, 56, 56], [13, 197, 13], [202, 56, 56]]\n        }\n    }\n    return [null, msg, null];\n}\nif (msg.Sensor == 3) {\n    msg.Sensor_Nome = \"Sensor 3 - \" + msg.Sensor_Nome;\n    msg.ui_control = {\n        \"id\": \"Arm_Sensor3\",\n        \"gtype\": \"gage\",\n        \"options\": {\n            \"min\": msg.payload[0].minimo,\n            \"max\": msg.payload[0].maximo,\n            \"colors\": [[202, 56, 56], [13, 197, 13], [202, 56, 56]]\n        }\n    }\n    msg.ui_control = {\n        \"id\": \"BAT_Sensor3\",\n        \"gtype\": \"gage\",\n        \"options\": {\n            \"colors\": [[202, 56, 56], [13, 197, 13], [202, 56, 56]]\n        }\n    }\n    return [null, null, msg];\n}",
        "outputs": 3,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2520,
        "y": 560,
        "wires": [
            [
                "b177151acb396606",
                "35eeb7e29a0a1d42",
                "626ea9f823ea9735",
                "4e790c0f4a5e9eac"
            ],
            [
                "401af85ab0b51cad",
                "2cef261ff146ab9d",
                "ee2098db19fcc6bd",
                "4153851548ae043f"
            ],
            [
                "82230657d471cd98",
                "88d29e4f5aaaeadc",
                "1204b0fce188729d",
                "019f937619e68358"
            ]
        ]
    },
    {
        "id": "c26e77b123b2c6ec",
        "type": "function",
        "z": "624e12446ae56fec",
        "name": "Inserir Registo",
        "func": "var zona = 2;\nvar words = msg.topic.split(\"/\");\nvar date = new Date();\nvar hour = date.getHours();\nhour = hour + 1;\ndate.setHours(hour);\n\nmsg.topic = \"INSERT INTO registos (zona, sensor, temperatura, bateria, data, ativo) \" +\n    \" VALUES ('\" + zona + \"','\" + msg.payload.Sensor_ID + \"', '\"\n    + msg.payload.Temperatura + \"', '\"\n    + msg.payload.Bateria + \"', now(), '\" + msg.Ativo + \"')\";\nmsg.Zonas = words[1];\nmsg.Sensor = words[2].slice(-1);\nmsg.Data = date;\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1980,
        "y": 780,
        "wires": [
            [
                "098dd01e5cb26854"
            ]
        ]
    },
    {
        "id": "401af85ab0b51cad",
        "type": "ui_gauge",
        "z": "624e12446ae56fec",
        "name": "Arm_Sensor2",
        "group": "115e4776225f9599",
        "order": 5,
        "width": 3,
        "height": 2,
        "gtype": "gage",
        "title": "<i class=\"fa fa-thermometer-full\" aria-hidden=\"true\"></i> Temperatura",
        "label": "Cº",
        "format": "{{msg.Temperatura}}",
        "min": "0",
        "max": "12",
        "colors": [
            "#ca3838",
            "#0dc50d",
            "#ca3838"
        ],
        "seg1": "2",
        "seg2": "10",
        "diff": false,
        "className": "",
        "x": 3180,
        "y": 560,
        "wires": []
    },
    {
        "id": "82230657d471cd98",
        "type": "ui_gauge",
        "z": "624e12446ae56fec",
        "name": "Arm_Sensor3",
        "group": "0c30edc512b4f860",
        "order": 5,
        "width": 3,
        "height": 2,
        "gtype": "gage",
        "title": "<i class=\"fa fa-thermometer-full\" aria-hidden=\"true\"></i> Temperatura",
        "label": "Cº",
        "format": "{{msg.Temperatura}}",
        "min": "0",
        "max": "12",
        "colors": [
            "#ca3838",
            "#0dc50d",
            "#ca3838"
        ],
        "seg1": "2",
        "seg2": "10",
        "diff": false,
        "className": "",
        "x": 3180,
        "y": 780,
        "wires": []
    },
    {
        "id": "35eeb7e29a0a1d42",
        "type": "ui_text",
        "z": "624e12446ae56fec",
        "group": "8af8109be17f63fd",
        "order": 1,
        "width": 7,
        "height": 1,
        "name": "Nome",
        "label": "",
        "format": "<font size = 4 font color =royalblue>{{msg.Sensor_Nome}}",
        "layout": "row-left",
        "className": "",
        "x": 3150,
        "y": 420,
        "wires": [],
        "info": ".cssFont_1 {\r\nfont-family: 'Roboto', sans-serif;\r\nfont-size: 30px;\r\nletter-spacing: 2px;\r\nword-spacing: 5px;\r\ncolor: #000000;\r\nfont-weight: bold;\r\ntext-decoration: none;\r\nfont-style: italic;\r\nfont-variant: normal;\r\ntext-transform: none;\r\n}"
    },
    {
        "id": "88d29e4f5aaaeadc",
        "type": "ui_text",
        "z": "624e12446ae56fec",
        "group": "0c30edc512b4f860",
        "order": 1,
        "width": 7,
        "height": 1,
        "name": "Nome",
        "label": "",
        "format": "<font size = 4 font color =royalblue>{{msg.Sensor_Nome}}",
        "layout": "row-left",
        "className": "fundo_azul",
        "x": 3150,
        "y": 820,
        "wires": []
    },
    {
        "id": "626ea9f823ea9735",
        "type": "ui_text",
        "z": "624e12446ae56fec",
        "group": "8af8109be17f63fd",
        "order": 4,
        "width": 2,
        "height": 1,
        "name": "",
        "label": "Volts:",
        "format": "{{msg.Volts}}",
        "layout": "row-spread",
        "className": "",
        "x": 3149.000015258789,
        "y": 459.00000190734863,
        "wires": []
    },
    {
        "id": "2cef261ff146ab9d",
        "type": "ui_text",
        "z": "624e12446ae56fec",
        "group": "115e4776225f9599",
        "order": 1,
        "width": 7,
        "height": 1,
        "name": "Nome",
        "label": "",
        "format": "<font size = 4 font color =royalblue>{{msg.Sensor_Nome}}",
        "layout": "row-left",
        "className": "fundo_azul",
        "x": 3150,
        "y": 600,
        "wires": [],
        "info": ".cssFont_1 {\r\nfont-family: 'Roboto', sans-serif;\r\nfont-size: 30px;\r\nletter-spacing: 2px;\r\nword-spacing: 5px;\r\ncolor: #000000;\r\nfont-weight: bold;\r\ntext-decoration: none;\r\nfont-style: italic;\r\nfont-variant: normal;\r\ntext-transform: none;\r\n}"
    },
    {
        "id": "1204b0fce188729d",
        "type": "ui_text",
        "z": "624e12446ae56fec",
        "group": "0c30edc512b4f860",
        "order": 4,
        "width": 2,
        "height": 1,
        "name": "",
        "label": "Volts:",
        "format": "{{msg.Volts}}",
        "layout": "row-spread",
        "className": "",
        "x": 3150,
        "y": 900,
        "wires": []
    },
    {
        "id": "ee2098db19fcc6bd",
        "type": "ui_text",
        "z": "624e12446ae56fec",
        "group": "115e4776225f9599",
        "order": 4,
        "width": 2,
        "height": 1,
        "name": "",
        "label": "Volts:",
        "format": "{{msg.Volts}}",
        "layout": "row-spread",
        "className": "",
        "x": 3150,
        "y": 680,
        "wires": []
    },
    {
        "id": "ec52436c013cb9be",
        "type": "mysql",
        "z": "624e12446ae56fec",
        "mydb": "9b6527f7.cad8b8",
        "name": "BDados",
        "x": 2180,
        "y": 560,
        "wires": [
            [
                "3d6769fbc3a1a9b2"
            ]
        ]
    },
    {
        "id": "850d545c3ca913e6",
        "type": "ui_text",
        "z": "624e12446ae56fec",
        "group": "115e4776225f9599",
        "order": 10,
        "width": 7,
        "height": 1,
        "name": "Data",
        "label": "Última Leitura",
        "format": "{{msg.Data}}",
        "layout": "row-spread",
        "className": "",
        "x": 2630,
        "y": 780,
        "wires": []
    },
    {
        "id": "efcf4ff190138c1b",
        "type": "function",
        "z": "624e12446ae56fec",
        "name": "Ultima Leitura",
        "func": "var d = msg.Data.toISOString();\nd = d.replace(\"T\",\" \");\nd = d.slice(0, d.length - 5 );\nmsg.Data = d;\n\nif (msg.Sensor == 1) {    return [msg, null, null, null];}\nif (msg.Sensor == 2) {    return [null, msg, null, null];}\nif (msg.Sensor == 3) {    return [null, null, msg, null];}\nif (msg.Sensor == 4) {    return [null, null, null, msg];}",
        "outputs": 3,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2380,
        "y": 780,
        "wires": [
            [
                "e3b0ca3b10750a5e"
            ],
            [
                "850d545c3ca913e6"
            ],
            [
                "380938cd801f3bb4"
            ]
        ]
    },
    {
        "id": "e3b0ca3b10750a5e",
        "type": "ui_text",
        "z": "624e12446ae56fec",
        "group": "8af8109be17f63fd",
        "order": 10,
        "width": 7,
        "height": 1,
        "name": "Data",
        "label": "Última Leitura",
        "format": "{{msg.Data}}",
        "layout": "row-spread",
        "className": "",
        "x": 2630,
        "y": 740,
        "wires": []
    },
    {
        "id": "380938cd801f3bb4",
        "type": "ui_text",
        "z": "624e12446ae56fec",
        "group": "0c30edc512b4f860",
        "order": 10,
        "width": 7,
        "height": 1,
        "name": "Data",
        "label": "Última Leitura",
        "format": "{{msg.Data}}",
        "layout": "row-spread",
        "className": "",
        "x": 2630,
        "y": 820,
        "wires": []
    },
    {
        "id": "c43ca024d49de632",
        "type": "function",
        "z": "624e12446ae56fec",
        "name": "SQL 24Horas",
        "func": "msg.topic = \"SELECT temperatura, data FROM registos where sensor = '\" + msg.Sensor_ID + \"' ORDER BY data DESC limit 24\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1980,
        "y": 420,
        "wires": [
            [
                "e0d9c6c174723e08"
            ]
        ]
    },
    {
        "id": "e0d9c6c174723e08",
        "type": "mysql",
        "z": "624e12446ae56fec",
        "mydb": "9b6527f7.cad8b8",
        "name": "BDados",
        "x": 2160.0000076293945,
        "y": 420.00000953674316,
        "wires": [
            [
                "b7558b275b4d1142"
            ]
        ]
    },
    {
        "id": "735450e1c6711555",
        "type": "ui_chart",
        "z": "624e12446ae56fec",
        "name": "Leitura Sensor 2",
        "group": "115e4776225f9599",
        "order": 9,
        "width": 7,
        "height": 4,
        "label": "Histórico",
        "chartType": "line",
        "legend": "false",
        "xformat": "dd HH:mm",
        "interpolate": "linear",
        "nodata": "Sem Registos ainda!!!",
        "dot": true,
        "ymin": "0",
        "ymax": "12",
        "removeOlder": "4",
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": true,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#24c224",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 2580,
        "y": 400,
        "wires": [
            []
        ]
    },
    {
        "id": "b21213eb857e5695",
        "type": "function",
        "z": "624e12446ae56fec",
        "name": "Variaveis",
        "func": "var words = msg.topic.split(\"/\");\nmsg.Zona = words[1];\nmsg.Sensor = words[2].slice(-1);\nmsg.Tipo = msg.payload.Tipo;\nmsg.Ativo = msg.payload.Ativo;\nmsg.Sensor_ID = msg.payload.Sensor_ID;\nmsg.Temperatura = msg.payload.Temperatura;\nmsg.Bateria = msg.payload.Bateria;\nmsg.Versao = msg.payload.VERSAO;\nmsg.Volts = msg.payload.Bateria;\nmsg.ESP_IP = msg.payload.ESP_IP;\nmsg.Var_Payload = msg.payload;\nmsg.Var_Topic = msg.topic;\nmsg.Sensor_Nome = msg.payload.Nome;\nmsg.Wifi = msg.payload.WIFI;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1704.0000114440918,
        "y": 868.9999885559082,
        "wires": [
            [
                "9ade9c118d39ed0b",
                "c43ca024d49de632",
                "c77e50f6987d08f8",
                "61da4decf40d3caa",
                "c26e77b123b2c6ec",
                "8e20505bdb759eda",
                "a989e6204217a2e9",
                "db37db5ff71c8046"
            ]
        ]
    },
    {
        "id": "b7558b275b4d1142",
        "type": "function",
        "z": "624e12446ae56fec",
        "name": "Historico",
        "func": "var data = [];\nvar series = [\"Temperatura\"];\nvar labels = [\"\"];\nvar i, len, string;\n\nif (msg.Sensor == 1) {\n    for (i = 0, len = msg.payload.length, string = \"\"; i < len; i++) {\n        data.push({ \"x\": Date.parse(msg.payload[i].data), \"y\": Number(msg.payload[i].temperatura) });\n    }\n\n    data = [data];\n    msg.payload = [{ series, data, labels }];\n    return [msg, null, null, null];\n}\nif (msg.Sensor == 2) {\n    for (i = 0, len = msg.payload.length, string = \"\"; i < len; i++) {\n        data.push({ \"x\": Date.parse(msg.payload[i].data), \"y\": Number(msg.payload[i].temperatura) });\n    }\n\n    data = [data];\n    msg.payload = [{ series, data, labels }];\n    return [null, msg, null, null];\n}\nif (msg.Sensor == 3) {\n    for (i = 0, len = msg.payload.length, string = \"\"; i < len; i++) {\n        data.push({ \"x\": Date.parse(msg.payload[i].data), \"y\": Number(msg.payload[i].temperatura) });\n    }\n\n    data = [data];\n    msg.payload = [{ series, data, labels }];\n    return [null, null, msg, null];\n}",
        "outputs": 3,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2341.000011444092,
        "y": 420.00000381469727,
        "wires": [
            [
                "32e9cd87282b5b68"
            ],
            [
                "735450e1c6711555"
            ],
            [
                "743bd3cac37ae7c4"
            ]
        ]
    },
    {
        "id": "32e9cd87282b5b68",
        "type": "ui_chart",
        "z": "624e12446ae56fec",
        "name": "Leitura Sensor 1",
        "group": "8af8109be17f63fd",
        "order": 9,
        "width": 7,
        "height": 4,
        "label": "Histórico",
        "chartType": "line",
        "legend": "false",
        "xformat": "dd HH:mm",
        "interpolate": "linear",
        "nodata": "Sem Registos ainda!!!",
        "dot": true,
        "ymin": "0",
        "ymax": "12",
        "removeOlder": "4",
        "removeOlderPoints": "24",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#b1cdf1",
            "#ff7f0e",
            "#2ca02c",
            "#40eb1e",
            "#d62728",
            "#ff9896",
            "#7b18d8",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 2580,
        "y": 360,
        "wires": [
            []
        ]
    },
    {
        "id": "743bd3cac37ae7c4",
        "type": "ui_chart",
        "z": "624e12446ae56fec",
        "name": "Leitura Sensor 3",
        "group": "0c30edc512b4f860",
        "order": 9,
        "width": 7,
        "height": 4,
        "label": "Histórico",
        "chartType": "line",
        "legend": "false",
        "xformat": "dd HH:mm",
        "interpolate": "linear",
        "nodata": "Sem Registos ainda!!!",
        "dot": true,
        "ymin": "0",
        "ymax": "12",
        "removeOlder": "4",
        "removeOlderPoints": "24",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 2580,
        "y": 440,
        "wires": [
            []
        ]
    },
    {
        "id": "9ba4eb089cb35f60",
        "type": "e-mail",
        "z": "624e12446ae56fec",
        "server": "mail.northspot.pt",
        "port": "465",
        "authtype": "BASIC",
        "saslformat": false,
        "token": "",
        "secure": true,
        "tls": true,
        "name": "arimar.sensores@gmail.com",
        "dname": "Email",
        "x": 2870,
        "y": 960,
        "wires": []
    },
    {
        "id": "e283e20a4c810a63",
        "type": "catch",
        "z": "624e12446ae56fec",
        "name": "",
        "scope": [
            "9ba4eb089cb35f60"
        ],
        "uncaught": false,
        "x": 1630,
        "y": 1440,
        "wires": [
            [
                "fdce34b16ed0b01e"
            ]
        ]
    },
    {
        "id": "fdce34b16ed0b01e",
        "type": "debug",
        "z": "624e12446ae56fec",
        "name": "debug 45",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1780,
        "y": 1440,
        "wires": []
    },
    {
        "id": "4e790c0f4a5e9eac",
        "type": "ui_gauge",
        "z": "624e12446ae56fec",
        "name": "BAT_Sensor1",
        "group": "8af8109be17f63fd",
        "order": 7,
        "width": 3,
        "height": 2,
        "gtype": "gage",
        "title": "<i class=\"fa fa-battery-full\" aria-hidden=\"true\"></i> Bateria",
        "label": "%",
        "format": "{{msg.Bateria}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#ca3838",
            "#e6e600",
            "#0dc50d"
        ],
        "seg1": "30",
        "seg2": "50",
        "diff": false,
        "className": "",
        "x": 3180,
        "y": 380,
        "wires": []
    },
    {
        "id": "4153851548ae043f",
        "type": "ui_gauge",
        "z": "624e12446ae56fec",
        "name": "BAT_Sensor2",
        "group": "115e4776225f9599",
        "order": 7,
        "width": 3,
        "height": 2,
        "gtype": "gage",
        "title": "<i class=\"fa fa-battery-full\" aria-hidden=\"true\"></i> Bateria",
        "label": "%",
        "format": "{{msg.Bateria}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#ca3838",
            "#e6e600",
            "#0dc50d"
        ],
        "seg1": "30",
        "seg2": "50",
        "diff": false,
        "className": "",
        "x": 3180,
        "y": 640,
        "wires": []
    },
    {
        "id": "019f937619e68358",
        "type": "ui_gauge",
        "z": "624e12446ae56fec",
        "name": "BAT_Sensor3",
        "group": "0c30edc512b4f860",
        "order": 7,
        "width": 3,
        "height": 2,
        "gtype": "gage",
        "title": "<i class=\"fa fa-battery-full\" aria-hidden=\"true\"></i> Bateria",
        "label": "%",
        "format": "{{msg.Bateria}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#ca3838",
            "#e6e600",
            "#0dc50d"
        ],
        "seg1": "30",
        "seg2": "50",
        "diff": false,
        "className": "",
        "x": 3180,
        "y": 860,
        "wires": []
    },
    {
        "id": "83054f476fd9ba8b",
        "type": "function",
        "z": "624e12446ae56fec",
        "name": "Verifica Temperatura",
        "func": "msg.topic = \"ALERTA - Zona da Sala - Sensor: \" + msg.Sensor;\nvar alta =  \"ALERTA TEMPERATURA ALTA\";\nvar baixa = \"ALERTA TEMPERATURA BAIXA\";\nvar w = \"%0A%0AZona: Sala%0ASensor: \" + msg.Sensor + \"%0ATemperatura: \" + msg.Temperatura + \" ºC %0A%0AVerifique o Equipamento.\";\nvar p = \"</h1><p>Temperatura: \" + msg.Temperatura + \"</p><p>Verifique o Equipamento!!!</p>\" \n\n\nif (msg.Tipo == 1) {\n    if (msg.Temperatura >= 10) {\n        msg.whatsapp = alta + w;\n        msg.payload = \"<h1>\" + alta + p;\n        return [msg, null];\n    }\n    else if (msg.Temperatura <= 2) {\n        msg.whatsapp = baixa + w;\n        msg.payload = \"<h1>\" + baixa + p;\n        return [msg, null];\n    }\n    else\n        return [null, null];\n}\nelse if (msg.Tipo == 2) {\n    if (msg.Temperatura >= -5) {\n        msg.whatsapp = alta + w;\n        msg.payload = \"<h1>\" + alta + p;\n        return [msg, null];\n    }\n    else if (msg.Temperatura <= -22) {\n        msg.whatsapp = baixa + w;\n        msg.payload = \"<h1>\" + baixa + p;\n        return [msg, null];\n    }\n    else\n        return [null, null];\n}\n",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2580,
        "y": 980,
        "wires": [
            [
                "b87c447c1a0fd539",
                "9ba4eb089cb35f60"
            ],
            []
        ]
    },
    {
        "id": "c77e50f6987d08f8",
        "type": "function",
        "z": "624e12446ae56fec",
        "name": "Sinal Wifi",
        "func": "if (msg.Wifi >= -50) {\n    msg.Sinal = \"Forte\";\n}\nelse if (msg.Wifi < -50 && msg.Wifi > -60) {\n    msg.Sinal = \"Bom\";\n}\nelse if (msg.Wifi <= -61 && msg.Wifi > -75) {\n    msg.Sinal = \"Suficiente\";\n}\nelse if (msg.Wifi <= -76) {\n    msg.Sinal = \"Mau\";\n}\n\nif (msg.Sensor == 1) { return [msg, null, null]; }\nif (msg.Sensor == 2) { return [null, msg, null]; }\nif (msg.Sensor == 3) { return [null, null, msg]; }",
        "outputs": 3,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1960,
        "y": 260,
        "wires": [
            [
                "fda4c387b56ce127"
            ],
            [
                "268339b8d7ad2494"
            ],
            [
                "da3b59051580d8c3"
            ]
        ]
    },
    {
        "id": "fda4c387b56ce127",
        "type": "ui_text",
        "z": "624e12446ae56fec",
        "group": "8af8109be17f63fd",
        "order": 2,
        "width": 4,
        "height": 1,
        "name": "Sinal_AS1",
        "label": "Sinal Wifi:",
        "format": "{{msg.Sinal}}",
        "layout": "row-spread",
        "className": "",
        "x": 2170,
        "y": 220,
        "wires": []
    },
    {
        "id": "268339b8d7ad2494",
        "type": "ui_text",
        "z": "624e12446ae56fec",
        "group": "115e4776225f9599",
        "order": 2,
        "width": 4,
        "height": 1,
        "name": "Sinal_AS2",
        "label": "Sinal Wifi:",
        "format": "{{msg.Sinal}}",
        "layout": "row-spread",
        "className": "",
        "x": 2170,
        "y": 260,
        "wires": []
    },
    {
        "id": "da3b59051580d8c3",
        "type": "ui_text",
        "z": "624e12446ae56fec",
        "group": "0c30edc512b4f860",
        "order": 2,
        "width": 4,
        "height": 1,
        "name": "Sinal_AS3",
        "label": "Sinal Wifi:",
        "format": "{{msg.Sinal}}",
        "layout": "row-spread",
        "className": "",
        "x": 2170,
        "y": 300,
        "wires": []
    },
    {
        "id": "905a9ed599f44a9c",
        "type": "mqtt out",
        "z": "624e12446ae56fec",
        "name": "Sensor 2",
        "topic": "TFC/Sala/Sensor2/S2",
        "qos": "2",
        "retain": "true",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "a22cb5334c925d0b",
        "x": 2360,
        "y": 1940,
        "wires": []
    },
    {
        "id": "f6fadce7f2a2dbdb",
        "type": "mqtt out",
        "z": "624e12446ae56fec",
        "name": "Sensor 1",
        "topic": "TFC/Sala/Sensor1/S1",
        "qos": "2",
        "retain": "true",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "a22cb5334c925d0b",
        "x": 2360,
        "y": 1680,
        "wires": []
    },
    {
        "id": "79b6de7ba22fb66c",
        "type": "mqtt out",
        "z": "624e12446ae56fec",
        "name": "Sensor 3",
        "topic": "TFC/Sala/Sensor3/S3",
        "qos": "2",
        "retain": "true",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "a22cb5334c925d0b",
        "x": 2360,
        "y": 2140,
        "wires": []
    },
    {
        "id": "53bb99c770a3fc4d",
        "type": "switch",
        "z": "624e12446ae56fec",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "ativar",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "avaria",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "carregar",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "desativar",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 4,
        "x": 2350,
        "y": 1580,
        "wires": [
            [
                "2760b59551839449"
            ],
            [
                "a7c53bd476e08a47"
            ],
            [
                "077a24da41a3b1fa"
            ],
            [
                "6f7893428b55f9d4"
            ]
        ]
    },
    {
        "id": "a7c53bd476e08a47",
        "type": "change",
        "z": "624e12446ae56fec",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "label",
                "pt": "msg",
                "to": "Equipamento Avariado",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2550,
        "y": 1560,
        "wires": [
            [
                "596081d27fabcdc6"
            ]
        ]
    },
    {
        "id": "077a24da41a3b1fa",
        "type": "change",
        "z": "624e12446ae56fec",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "label",
                "pt": "msg",
                "to": "Sensor a Carregar",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2550,
        "y": 1600,
        "wires": [
            [
                "596081d27fabcdc6"
            ]
        ]
    },
    {
        "id": "596081d27fabcdc6",
        "type": "ui_text",
        "z": "624e12446ae56fec",
        "group": "8af8109be17f63fd",
        "order": 14,
        "width": 5,
        "height": 1,
        "name": "S_L_1",
        "label": "",
        "format": "<font size = 4 font color =royalblue>{{msg.label}}",
        "layout": "row-left",
        "className": "",
        "x": 2770,
        "y": 1520,
        "wires": []
    },
    {
        "id": "411da98cfb45d46a",
        "type": "ui_text",
        "z": "624e12446ae56fec",
        "group": "115e4776225f9599",
        "order": 14,
        "width": 5,
        "height": 1,
        "name": "S_L_2",
        "label": "",
        "format": "<font size = 4 font color =royalblue>{{msg.label1}}",
        "layout": "row-left",
        "className": "",
        "x": 2790,
        "y": 1780,
        "wires": []
    },
    {
        "id": "55fda392c4e31bbc",
        "type": "ui_text",
        "z": "624e12446ae56fec",
        "group": "0c30edc512b4f860",
        "order": 14,
        "width": 5,
        "height": 1,
        "name": "S_L_3",
        "label": "",
        "format": "<font size = 4 font color =royalblue>{{msg.label2}}",
        "layout": "row-left",
        "className": "",
        "x": 2810,
        "y": 2020,
        "wires": []
    },
    {
        "id": "0cb5e942a69bc855",
        "type": "function",
        "z": "624e12446ae56fec",
        "name": "Update Sensor",
        "func": "if (msg.Sensor == 1) {\n    msg.payload == true ? msg.Ativo = \"S\" : msg.Ativo = \"N\";\n}\nelse if (msg.Sensor == 2) {\n    msg.payload == true ? msg.Ativo = \"S\" : msg.Ativo = \"N\";\n}\nelse if (msg.Sensor == 3) {\n    msg.payload == true ? msg.Ativo = \"S\" : msg.Ativo = \"N\";\n}\nelse if (msg.Sensor == 4) {\n    msg.payload == true ? msg.Ativo = \"S\" : msg.Ativo = \"N\";\n}\nmsg.topic = \"UPDATE sensor SET Ativo='\"+ msg.Ativo +\"' where sensor_n=\"+ msg.Sensor +\" and zona=2\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2980,
        "y": 1860,
        "wires": [
            [
                "46df7028e1ed8a75"
            ]
        ]
    },
    {
        "id": "46df7028e1ed8a75",
        "type": "mysql",
        "z": "624e12446ae56fec",
        "mydb": "9b6527f7.cad8b8",
        "name": "BDados",
        "x": 3180,
        "y": 1880,
        "wires": [
            []
        ]
    },
    {
        "id": "4bfe3b2ca3ca1fdf",
        "type": "ui_button",
        "z": "624e12446ae56fec",
        "name": "",
        "group": "8af8109be17f63fd",
        "order": 11,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "Ativar",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "check",
        "payload": "ativar",
        "payloadType": "str",
        "topic": "ativar",
        "topicType": "msg",
        "x": 1650,
        "y": 1680,
        "wires": [
            [
                "53bb99c770a3fc4d",
                "be606ddd0f814633"
            ]
        ]
    },
    {
        "id": "734aed94b575a8af",
        "type": "ui_button",
        "z": "624e12446ae56fec",
        "name": "",
        "group": "8af8109be17f63fd",
        "order": 13,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "Desativar",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "fa-ban",
        "payload": "desativar",
        "payloadType": "str",
        "topic": "",
        "topicType": "str",
        "x": 1660,
        "y": 1580,
        "wires": [
            [
                "634d751ee0d9da71"
            ]
        ]
    },
    {
        "id": "634d751ee0d9da71",
        "type": "change",
        "z": "624e12446ae56fec",
        "name": "XY",
        "rules": [
            {
                "t": "set",
                "p": "position.x",
                "pt": "msg",
                "to": "event.bbox[2]-150",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "position.y",
                "pt": "msg",
                "to": "event.bbox[3]+40",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1830,
        "y": 1580,
        "wires": [
            [
                "f7d56b7270bc4f65"
            ]
        ]
    },
    {
        "id": "f7d56b7270bc4f65",
        "type": "ui_context_menu",
        "z": "624e12446ae56fec",
        "group": "8af8109be17f63fd",
        "order": 16,
        "width": 0,
        "height": 0,
        "fontSize": 16,
        "inputPositionXField": "position.x",
        "inputPositionXType": "msg",
        "inputPositionYField": "position.y",
        "inputPositionYType": "msg",
        "outputField": "payload",
        "inputMenuField": "",
        "inputMenuType": "fixed",
        "menuItems": [
            {
                "id": "motivo",
                "icon": "",
                "label": "Motivo",
                "topic": "",
                "payload": "",
                "payloadType": "str",
                "visible": true,
                "enabled": false
            },
            {
                "id": "avaria",
                "icon": "fa-wrench",
                "label": "Avaria",
                "topic": "avaria",
                "payload": "avaria",
                "payloadType": "str",
                "visible": true,
                "enabled": true
            },
            {
                "id": "carregar",
                "icon": "fa-battery-1",
                "label": "Carregar Bateria",
                "topic": "carregar",
                "payload": "carregar",
                "payloadType": "str",
                "visible": true,
                "enabled": true
            },
            {
                "id": "desativar",
                "icon": "fa-ban",
                "label": "Desativar",
                "topic": "desativar",
                "payload": "desativar",
                "payloadType": "str",
                "visible": true,
                "enabled": true
            }
        ],
        "colors": "theme",
        "textColor": "#000000",
        "backgroundColor": "#ffffff",
        "borderColor": "#626262",
        "intervalLength": "0",
        "intervalUnit": "secs",
        "startTimerAtOpen": false,
        "startTimerAtLeave": true,
        "stopTimerAtEnter": true,
        "name": "Menu Sensor 1",
        "x": 2000,
        "y": 1580,
        "wires": [
            [
                "53bb99c770a3fc4d",
                "be606ddd0f814633"
            ]
        ]
    },
    {
        "id": "6f7893428b55f9d4",
        "type": "change",
        "z": "624e12446ae56fec",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "label",
                "pt": "msg",
                "to": "Equipamento Desligado",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2550,
        "y": 1640,
        "wires": [
            [
                "596081d27fabcdc6"
            ]
        ]
    },
    {
        "id": "2760b59551839449",
        "type": "change",
        "z": "624e12446ae56fec",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "label",
                "pt": "msg",
                "to": "Equipamento Ativo",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2550,
        "y": 1520,
        "wires": [
            [
                "596081d27fabcdc6"
            ]
        ]
    },
    {
        "id": "be606ddd0f814633",
        "type": "function",
        "z": "624e12446ae56fec",
        "name": "function 20",
        "func": "if(msg.payload === \"ativar\"){\n    msg.payload = true;\n    msg.Estado = \"Ativo\";\n}\nif (msg.topic === \"avaria\"){\n    msg.Estado = \"Avaria\";\n    msg.payload = false;\n}\nif(msg.topic === \"desativar\"){\n    msg.Estado = \"Desativado\";\n    msg.payload = false;\n}\nif (msg.topic === \"carregar\"){\n    msg.Estado = \"Em Carregamento\";\n    msg.payload = false;\n}\nmsg.Sensor = 1;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2170,
        "y": 1680,
        "wires": [
            [
                "f6fadce7f2a2dbdb",
                "0cb5e942a69bc855",
                "9031f124e59d29a7"
            ]
        ]
    },
    {
        "id": "9031f124e59d29a7",
        "type": "function",
        "z": "624e12446ae56fec",
        "name": "Inserir Estado",
        "func": "msg.payload == true ? msg.Ativo = \"S\" : msg.Ativo = \"N\";\nmsg.topic = \"INSERT into estados(zona, sensor_n, estado, data, motivo) values(2, \" + msg.Sensor + \", '\" + msg.Ativo + \"', now(),'\" + msg.Estado +\"' );\"\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2980,
        "y": 1920,
        "wires": [
            [
                "46df7028e1ed8a75"
            ]
        ]
    },
    {
        "id": "5380d31aa1b7b709",
        "type": "switch",
        "z": "624e12446ae56fec",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "ativar",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "avaria",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "carregar",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "desativar",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 4,
        "x": 2350,
        "y": 1840,
        "wires": [
            [
                "414f77fb53d33ef3"
            ],
            [
                "c30780e21d8d23cc"
            ],
            [
                "6e01d37d977c1833"
            ],
            [
                "52cd8e35a79a3fd4"
            ]
        ]
    },
    {
        "id": "c30780e21d8d23cc",
        "type": "change",
        "z": "624e12446ae56fec",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "label1",
                "pt": "msg",
                "to": "Equipamento Avariado",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2560,
        "y": 1820,
        "wires": [
            [
                "411da98cfb45d46a"
            ]
        ]
    },
    {
        "id": "6e01d37d977c1833",
        "type": "change",
        "z": "624e12446ae56fec",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "label1",
                "pt": "msg",
                "to": "Sensor a Carregar",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2560,
        "y": 1860,
        "wires": [
            [
                "411da98cfb45d46a"
            ]
        ]
    },
    {
        "id": "52cd8e35a79a3fd4",
        "type": "change",
        "z": "624e12446ae56fec",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "label1",
                "pt": "msg",
                "to": "Equipamento Desligado",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2560,
        "y": 1900,
        "wires": [
            [
                "411da98cfb45d46a"
            ]
        ]
    },
    {
        "id": "414f77fb53d33ef3",
        "type": "change",
        "z": "624e12446ae56fec",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "label1",
                "pt": "msg",
                "to": "Equipamento Ativo",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2560,
        "y": 1780,
        "wires": [
            [
                "411da98cfb45d46a"
            ]
        ]
    },
    {
        "id": "920f2edf2362036c",
        "type": "switch",
        "z": "624e12446ae56fec",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "ativar",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "avaria",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "carregar",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "desativar",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 4,
        "x": 2350,
        "y": 2040,
        "wires": [
            [
                "fbc0b697ecfae589"
            ],
            [
                "6cb453325ae93f85"
            ],
            [
                "d21340fe2aef76e6"
            ],
            [
                "b711bb78e4ffac5e"
            ]
        ]
    },
    {
        "id": "6cb453325ae93f85",
        "type": "change",
        "z": "624e12446ae56fec",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "label2",
                "pt": "msg",
                "to": "Equipamento Avariado",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2560,
        "y": 2060,
        "wires": [
            [
                "55fda392c4e31bbc"
            ]
        ]
    },
    {
        "id": "d21340fe2aef76e6",
        "type": "change",
        "z": "624e12446ae56fec",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "label2",
                "pt": "msg",
                "to": "Sensor a Carregar",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2560,
        "y": 2100,
        "wires": [
            [
                "55fda392c4e31bbc"
            ]
        ]
    },
    {
        "id": "b711bb78e4ffac5e",
        "type": "change",
        "z": "624e12446ae56fec",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "label2",
                "pt": "msg",
                "to": "Equipamento Desligado",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2560,
        "y": 2140,
        "wires": [
            [
                "55fda392c4e31bbc"
            ]
        ]
    },
    {
        "id": "fbc0b697ecfae589",
        "type": "change",
        "z": "624e12446ae56fec",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "label2",
                "pt": "msg",
                "to": "Equipamento Ativo",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2560,
        "y": 2020,
        "wires": [
            [
                "55fda392c4e31bbc"
            ]
        ]
    },
    {
        "id": "c352b4063406c866",
        "type": "ui_button",
        "z": "624e12446ae56fec",
        "name": "",
        "group": "115e4776225f9599",
        "order": 11,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "Ativar",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "check",
        "payload": "ativar",
        "payloadType": "str",
        "topic": "ativar",
        "topicType": "msg",
        "x": 1650,
        "y": 1940,
        "wires": [
            [
                "c848d9919fc7d8d9",
                "5380d31aa1b7b709"
            ]
        ]
    },
    {
        "id": "cca5a6f9fda49123",
        "type": "ui_button",
        "z": "624e12446ae56fec",
        "name": "",
        "group": "115e4776225f9599",
        "order": 13,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "Desativar",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "fa-ban",
        "payload": "desativar",
        "payloadType": "str",
        "topic": "",
        "topicType": "str",
        "x": 1660,
        "y": 1840,
        "wires": [
            [
                "4b135de64e7e53a6"
            ]
        ]
    },
    {
        "id": "4b135de64e7e53a6",
        "type": "change",
        "z": "624e12446ae56fec",
        "name": "XY",
        "rules": [
            {
                "t": "set",
                "p": "position.x",
                "pt": "msg",
                "to": "event.bbox[2]-150",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "position.y",
                "pt": "msg",
                "to": "event.bbox[3]+40",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1830,
        "y": 1840,
        "wires": [
            [
                "b87db637f436e37b"
            ]
        ]
    },
    {
        "id": "b87db637f436e37b",
        "type": "ui_context_menu",
        "z": "624e12446ae56fec",
        "group": "115e4776225f9599",
        "order": 16,
        "width": 0,
        "height": 0,
        "fontSize": 16,
        "inputPositionXField": "position.x",
        "inputPositionXType": "msg",
        "inputPositionYField": "position.y",
        "inputPositionYType": "msg",
        "outputField": "payload",
        "inputMenuField": "",
        "inputMenuType": "fixed",
        "menuItems": [
            {
                "id": "avaria",
                "icon": "fa-wrench",
                "label": "Avaria",
                "topic": "avaria",
                "payload": "avaria",
                "payloadType": "str",
                "visible": true,
                "enabled": true
            },
            {
                "id": "carregar",
                "icon": "fa-battery-1",
                "label": "Carregar Bateria",
                "topic": "carregar",
                "payload": "carregar",
                "payloadType": "str",
                "visible": true,
                "enabled": true
            },
            {
                "id": "desativar",
                "icon": "fa-ban",
                "label": "Desativar",
                "topic": "desativar",
                "payload": "desativar",
                "payloadType": "str",
                "visible": true,
                "enabled": true
            }
        ],
        "colors": "theme",
        "textColor": "#000000",
        "backgroundColor": "#ffffff",
        "borderColor": "#626262",
        "intervalLength": "0",
        "intervalUnit": "secs",
        "startTimerAtOpen": false,
        "startTimerAtLeave": true,
        "stopTimerAtEnter": true,
        "name": "Menu Sensor 2",
        "x": 2000,
        "y": 1840,
        "wires": [
            [
                "c848d9919fc7d8d9",
                "5380d31aa1b7b709"
            ]
        ]
    },
    {
        "id": "c848d9919fc7d8d9",
        "type": "function",
        "z": "624e12446ae56fec",
        "name": "function 21",
        "func": "if (msg.payload === \"ativar\") {\n    msg.payload = true;\n    msg.Estado = \"Ativo\";\n}\nif (msg.topic === \"avaria\") {\n    msg.Estado = \"Avaria\";\n    msg.payload = false;\n}\nif (msg.topic === \"desativar\") {\n    msg.Estado = \"Desativado\";\n    msg.payload = false;\n}\nif (msg.topic === \"carregar\") {\n    msg.Estado = \"Em Carregamento\";\n    msg.payload = false;\n}\nmsg.Sensor = 2;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2150,
        "y": 1940,
        "wires": [
            [
                "905a9ed599f44a9c",
                "0cb5e942a69bc855",
                "9031f124e59d29a7"
            ]
        ]
    },
    {
        "id": "bdc70f77b91cd3d3",
        "type": "ui_button",
        "z": "624e12446ae56fec",
        "name": "",
        "group": "0c30edc512b4f860",
        "order": 11,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "Ativar",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "check",
        "payload": "ativar",
        "payloadType": "str",
        "topic": "ativar",
        "topicType": "msg",
        "x": 1650,
        "y": 2140,
        "wires": [
            [
                "858ecd2bccceca0b",
                "920f2edf2362036c"
            ]
        ]
    },
    {
        "id": "eacdc972fa6155e4",
        "type": "ui_button",
        "z": "624e12446ae56fec",
        "name": "",
        "group": "0c30edc512b4f860",
        "order": 13,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "Desativar",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "fa-ban",
        "payload": "desativar",
        "payloadType": "str",
        "topic": "",
        "topicType": "str",
        "x": 1660,
        "y": 2040,
        "wires": [
            [
                "76482bca14e4fecf"
            ]
        ]
    },
    {
        "id": "76482bca14e4fecf",
        "type": "change",
        "z": "624e12446ae56fec",
        "name": "XY",
        "rules": [
            {
                "t": "set",
                "p": "position.x",
                "pt": "msg",
                "to": "event.bbox[2]-150",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "position.y",
                "pt": "msg",
                "to": "event.bbox[3]+40",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1830,
        "y": 2040,
        "wires": [
            [
                "ba5aa8b21126c756"
            ]
        ]
    },
    {
        "id": "ba5aa8b21126c756",
        "type": "ui_context_menu",
        "z": "624e12446ae56fec",
        "group": "0c30edc512b4f860",
        "order": 16,
        "width": 0,
        "height": 0,
        "fontSize": 16,
        "inputPositionXField": "position.x",
        "inputPositionXType": "msg",
        "inputPositionYField": "position.y",
        "inputPositionYType": "msg",
        "outputField": "payload",
        "inputMenuField": "",
        "inputMenuType": "fixed",
        "menuItems": [
            {
                "id": "avaria",
                "icon": "fa-wrench",
                "label": "Avaria",
                "topic": "avaria",
                "payload": "avaria",
                "payloadType": "str",
                "visible": true,
                "enabled": true
            },
            {
                "id": "carregar",
                "icon": "fa-battery-1",
                "label": "Carregar Bateria",
                "topic": "carregar",
                "payload": "carregar",
                "payloadType": "str",
                "visible": true,
                "enabled": true
            },
            {
                "id": "desativar",
                "icon": "fa-ban",
                "label": "Desativar",
                "topic": "desativar",
                "payload": "desativar",
                "payloadType": "str",
                "visible": true,
                "enabled": true
            }
        ],
        "colors": "theme",
        "textColor": "#000000",
        "backgroundColor": "#ffffff",
        "borderColor": "#626262",
        "intervalLength": "0",
        "intervalUnit": "secs",
        "startTimerAtOpen": false,
        "startTimerAtLeave": true,
        "stopTimerAtEnter": true,
        "name": "Menu Sensor 3",
        "x": 2000,
        "y": 2040,
        "wires": [
            [
                "858ecd2bccceca0b",
                "920f2edf2362036c"
            ]
        ]
    },
    {
        "id": "858ecd2bccceca0b",
        "type": "function",
        "z": "624e12446ae56fec",
        "name": "function 22",
        "func": "if (msg.payload === \"ativar\") {\n    msg.payload = true;\n    msg.Estado = \"Ativo\";\n}\nif (msg.topic === \"avaria\") {\n    msg.Estado = \"Avaria\";\n    msg.payload = false;\n}\nif (msg.topic === \"desativar\") {\n    msg.Estado = \"Desativado\";\n    msg.payload = false;\n}\nif (msg.topic === \"carregar\") {\n    msg.Estado = \"Em Carregamento\";\n    msg.payload = false;\n}\nmsg.Sensor = 3;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2130,
        "y": 2140,
        "wires": [
            [
                "0cb5e942a69bc855",
                "9031f124e59d29a7",
                "79b6de7ba22fb66c"
            ]
        ]
    },
    {
        "id": "b87c447c1a0fd539",
        "type": "node-red-contrib-whatsapp-cmb-send-message",
        "z": "624e12446ae56fec",
        "name": "Whatsapp",
        "account": "b5b4b586aa40dcf0",
        "text": "whatsapp",
        "inputtypemessage": "msg",
        "rejectssl": false,
        "x": 2880,
        "y": 1020,
        "wires": [
            [
                "494953fdf3adc49c",
                "8e7ff49a53939d36"
            ]
        ]
    },
    {
        "id": "494953fdf3adc49c",
        "type": "debug",
        "z": "624e12446ae56fec",
        "name": "debug 54",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 3060,
        "y": 1020,
        "wires": []
    },
    {
        "id": "aa90d64216d4415e",
        "type": "function",
        "z": "624e12446ae56fec",
        "name": "Verifica Bateria",
        "func": "// Bateria\nvar recebido = msg.Bateria;\nvar porcento = ((recebido - 3.2) * 100) / 1;\nif (porcento > 100)\n    msg.Bateria = 100;\nelse\n    msg.Bateria = porcento;\n\nmsg.Bateria = msg.Bateria.toFixed(2);\n\nmsg.topic = \"ALERTA - Zona da Sala - Sensor: \" + msg.Sensor;\nvar muito_baixa = \"ALERTA BATERIA MUITO BAIXA\";\nvar baixa = \"ALERTA BATERIA BAIXA\";\nvar whatsapp = \"%0A%0AZona: Sala%0ASensor: \" + msg.Sensor + \"%0ABateria: \" + msg.Bateria + \" % %0A%0AVerifique o Equipamento.\";\nvar p = \"</h1><p>Zona: Sala</p> <p>Sensor: \"+ msg.Sensor + \"</p><p>Bateria: \" + msg.Bateria + \"</p><p>Verifique o Equipamento!!!</p>\";\n\nif (msg.Bateria < 25) {\n    msg.whatsapp = muito_baixa + whatsapp;\n    msg.payload = \"<h1>\" + muito_baixa + p;\n    return [msg, null];\n}\nelse if (msg.Bateria > 25 && msg.Bateria < 30) {\n    msg.whatsapp = baixa + whatsapp;\n    msg.payload = \"<h1>\" + baixa + p;\n    return [msg, null];\n}\nelse\n    return [null, null];  \n    \n   \n",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2560,
        "y": 1040,
        "wires": [
            [
                "b87c447c1a0fd539",
                "9ba4eb089cb35f60"
            ],
            []
        ]
    },
    {
        "id": "50022caab0cf8a19",
        "type": "switch",
        "z": "624e12446ae56fec",
        "name": "S / N",
        "property": "payload[0].Ativo",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "S",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "N",
                "vt": "str"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 2330,
        "y": 1000,
        "wires": [
            [
                "83054f476fd9ba8b",
                "aa90d64216d4415e"
            ],
            []
        ]
    },
    {
        "id": "61da4decf40d3caa",
        "type": "function",
        "z": "624e12446ae56fec",
        "name": "Estado Sensor",
        "func": "msg.topic = \"SELECT Ativo FROM sensor where sensor_ID = '\" + msg.Sensor_ID + \"'\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2000,
        "y": 1000,
        "wires": [
            [
                "102b6575fa1ab2f1"
            ]
        ]
    },
    {
        "id": "102b6575fa1ab2f1",
        "type": "mysql",
        "z": "624e12446ae56fec",
        "mydb": "9b6527f7.cad8b8",
        "name": "BDados",
        "x": 2180,
        "y": 1000,
        "wires": [
            [
                "50022caab0cf8a19"
            ]
        ]
    },
    {
        "id": "6461ce8af93d26a3",
        "type": "switch",
        "z": "624e12446ae56fec",
        "name": "Existe Sensor?",
        "property": "payload[0].Count(*)",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "str"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 2360,
        "y": 1160,
        "wires": [
            [],
            [
                "762d9e1500da1364"
            ]
        ]
    },
    {
        "id": "8e20505bdb759eda",
        "type": "function",
        "z": "624e12446ae56fec",
        "name": "Select Sensor",
        "func": "msg.topic = \"SELECT Count(*) FROM sensor where sensor_ID = '\" + msg.Sensor_ID + \"'\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1993.3333129882812,
        "y": 1162.222222328186,
        "wires": [
            [
                "49fe0d4e5da5e668"
            ]
        ]
    },
    {
        "id": "49fe0d4e5da5e668",
        "type": "mysql",
        "z": "624e12446ae56fec",
        "mydb": "9b6527f7.cad8b8",
        "name": "BDados",
        "x": 2178.888816833496,
        "y": 1161.1111249923706,
        "wires": [
            [
                "6461ce8af93d26a3"
            ]
        ]
    },
    {
        "id": "762d9e1500da1364",
        "type": "function",
        "z": "624e12446ae56fec",
        "name": "Inserir Sensor",
        "func": "msg.payload = msg.Var_Payload;\nmsg.topic = msg.Var_Topic;\nvar zona = 2;\nmsg.topic = \"INSERT into sensor(Sensor_ID, sensor_n, Zona,Ativo,IP_Sensor) VALUES ('\" + msg.payload.Sensor_ID + \"',\" + msg.payload.Sensor +\",\"+ zona +\",'S','\"+ msg.payload.ESP_IP +\"')\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2581.111114501953,
        "y": 1165.5555391311646,
        "wires": [
            [
                "de6440a154fefb2e"
            ]
        ]
    },
    {
        "id": "de6440a154fefb2e",
        "type": "mysql",
        "z": "624e12446ae56fec",
        "mydb": "9b6527f7.cad8b8",
        "name": "BDados",
        "x": 2759.99991607666,
        "y": 1166.666657447815,
        "wires": [
            []
        ]
    },
    {
        "id": "a989e6204217a2e9",
        "type": "function",
        "z": "624e12446ae56fec",
        "name": "Sensor 1 - S / N",
        "func": "if (msg.Sensor == 1){\n    if(msg.Ativo === \"S\")\n        msg.label = \"Equipamento Ativo\";\n    else\n        msg.label = \"Equipamento Inativo\";\n    return [msg, null, null];\n}\nif (msg.Sensor == 2) {\n    if (msg.Ativo === \"S\")\n        msg.label1 = \"Equipamento Ativo\";\n    else\n        msg.label1 = \"Equipamento Inativo\";\n    return [null, msg, null];\n}\nif (msg.Sensor == 3) {\n    if (msg.Ativo === \"S\")\n        msg.label2 = \"Equipamento Ativo\";\n    else\n        msg.label2 = \"Equipamento Inativo\";\n    return [null, null, msg];\n} \nreturn msg;",
        "outputs": 3,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2000,
        "y": 1320,
        "wires": [
            [
                "596081d27fabcdc6"
            ],
            [
                "411da98cfb45d46a"
            ],
            [
                "55fda392c4e31bbc"
            ]
        ]
    },
    {
        "id": "db37db5ff71c8046",
        "type": "debug",
        "z": "624e12446ae56fec",
        "name": "debug 60",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 2020,
        "y": 880,
        "wires": []
    },
    {
        "id": "8e7ff49a53939d36",
        "type": "ui_toast",
        "z": "624e12446ae56fec",
        "position": "bottom left",
        "displayTime": "5",
        "highlight": "blue",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": true,
        "className": "",
        "topic": "Alerta Enviada Por Whatsapp",
        "name": "Notificação Alerta Whatsapp",
        "x": 3100,
        "y": 1100,
        "wires": []
    },
    {
        "id": "80a782b71ca509a2",
        "type": "mqtt in",
        "z": "4f0d36b27ba46340",
        "name": "Sensor 1",
        "topic": "TFC/Armazem/Sensor1",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "a22cb5334c925d0b",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 120,
        "y": 460,
        "wires": [
            [
                "63d954ba44cc8ebd"
            ]
        ]
    },
    {
        "id": "950b4fdf9e6fac82",
        "type": "ui_gauge",
        "z": "4f0d36b27ba46340",
        "name": "Arm_Sensor1",
        "group": "f43d992ed8084385",
        "order": 4,
        "width": 3,
        "height": 2,
        "gtype": "gage",
        "title": "<i class=\"fa fa-thermometer-full\" aria-hidden=\"true\"></i> Temperatura ",
        "label": "Cº",
        "format": "{{msg.Temperatura}}",
        "min": "0",
        "max": "12",
        "colors": [
            "#cb3838",
            "#0dc50d",
            "#ca3838"
        ],
        "seg1": "2",
        "seg2": "10",
        "diff": false,
        "className": "",
        "x": 1800,
        "y": 40,
        "wires": []
    },
    {
        "id": "f34fa7e45426504c",
        "type": "mqtt in",
        "z": "4f0d36b27ba46340",
        "name": "Sensor 3",
        "topic": "TFC/Armazem/Sensor3",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "a22cb5334c925d0b",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 120,
        "y": 600,
        "wires": [
            [
                "63d954ba44cc8ebd"
            ]
        ]
    },
    {
        "id": "ce7010677e732891",
        "type": "mqtt in",
        "z": "4f0d36b27ba46340",
        "name": "Sensor 2",
        "topic": "TFC/Armazem/Sensor2",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "a22cb5334c925d0b",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 120,
        "y": 540,
        "wires": [
            [
                "63d954ba44cc8ebd"
            ]
        ]
    },
    {
        "id": "5d7c48da743b3451",
        "type": "function",
        "z": "4f0d36b27ba46340",
        "name": "Max e Min",
        "func": "msg.topic = \"SELECT maximo,minimo FROM equipamento where idtipo = '\" + msg.Tipo + \"'\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 590,
        "y": 460,
        "wires": [
            [
                "9ec52bb53b5efc79"
            ]
        ]
    },
    {
        "id": "ad9dbc5de21efb7c",
        "type": "mysql",
        "z": "4f0d36b27ba46340",
        "mydb": "9b6527f7.cad8b8",
        "name": "BDados",
        "x": 800,
        "y": 640,
        "wires": [
            [
                "212434b29519617f"
            ]
        ]
    },
    {
        "id": "1f7cf421193ba614",
        "type": "function",
        "z": "4f0d36b27ba46340",
        "name": "Gráficos",
        "func": "// Bateria\nvar recebido = msg.Bateria;\n//var porcento = 100 * (recebido - 1.1) / (4.2 - 1.1);\nvar porcento = ((recebido - 3.2) * 100) / 1;\nif (porcento > 100)\n    msg.Bateria = 100;\nelse\n    msg.Bateria = porcento;\n\nmsg.Bateria = msg.Bateria.toFixed(2);\nmsg.Temperatura = msg.Temperatura.toFixed(2);\nmsg.Volts = msg.Volts.toFixed(2);\n\n\nif (msg.Sensor == 1) {\n    msg.Sensor_Nome = \"Sensor 1 - \" + msg.Sensor_Nome;\n    msg.ui_control = {\n        \"id\": \"Arm_Sensor1\",\n        \"gtype\": \"gage\",\n        \"options\": {\n            \"min\": msg.payload[0].minimo,\n            \"max\": msg.payload[0].maximo,\n            \"colors\": [[202, 56, 56], [13, 197, 13], [202, 56, 56]]\n        }\n    }\n    msg.ui_control = {\n        \"id\": \"BAT_Sensor1\",\n        \"gtype\": \"gage\",\n        \"options\": {\n            \"colors\": [[202, 56, 56], [13, 197, 13], [202, 56, 56]]\n        }\n    }\n    \n    return [msg, null, null, null];;\n}\nif (msg.Sensor == 2) {\n    msg.Sensor_Nome = \"Sensor 2 - \" + msg.Sensor_Nome;\n    msg.ui_control = {\n        \"id\": \"Arm_Sensor2\",\n        \"gtype\": \"gage\",\n        \"options\": {\n            \"min\": msg.payload[0].minimo,\n            \"max\": msg.payload[0].maximo,\n            \"colors\": [[202, 56, 56], [13, 197, 13], [202, 56, 56]]\n        }\n    }\n    msg.ui_control = {\n        \"id\": \"BAT_Sensor2\",\n        \"gtype\": \"gage\",\n        \"options\": {\n            \"colors\": [[202, 56, 56], [13, 197, 13], [202, 56, 56]]\n        }\n    }\n    return [null, msg, null, null];\n}\nif (msg.Sensor == 3) {\n    msg.Sensor_Nome = \"Sensor 3 - \" + msg.Sensor_Nome;\n    msg.ui_control = {\n        \"id\": \"Arm_Sensor3\",\n        \"gtype\": \"gage\",\n        \"options\": {\n            \"min\": msg.payload[0].minimo,\n            \"max\": msg.payload[0].maximo,\n            \"colors\": [[202, 56, 56], [13, 197, 13], [202, 56, 56]]\n        }\n    }\n    msg.ui_control = {\n        \"id\": \"BAT_Sensor3\",\n        \"gtype\": \"gage\",\n        \"options\": {\n            \"colors\": [[202, 56, 56], [13, 197, 13], [202, 56, 56]]\n        }\n    }\n    return [null, null, msg, null];\n}\n\nif (msg.Sensor == 4) {\n    msg.Sensor_Nome = \"Sensor 4 - \" + msg.Sensor_Nome;\n    msg.ui_control = {\n        \"id\": \"Arm_Sensor4\",\n        \"gtype\": \"gage\",\n        \"options\": {\n            \"min\": msg.payload[0].minimo,\n            \"max\": msg.payload[0].maximo,\n            \"colors\": [[202, 56, 56], [13, 197, 13], [202, 56, 56]]\n        }\n    }\n    msg.ui_control = {\n        \"id\": \"BAT_Sensor4\",\n        \"gtype\": \"gage\",\n        \"options\": {\n            \"colors\": [[202, 56, 56], [13, 197, 13], [202, 56, 56]]\n        }\n    }\n    return [null, null, null, msg];\n}",
        "outputs": 4,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1220,
        "y": 460,
        "wires": [
            [
                "950b4fdf9e6fac82",
                "2daae41239effe37",
                "5a263e6a6d010b58",
                "f8c0ac57ef74ebc7"
            ],
            [
                "a0eb1f03c15cf0e9",
                "7a4f61ebefa56264",
                "3c0b228d6cee3327",
                "a06ee45a9c49751c"
            ],
            [
                "63e2be90fa385a8e",
                "a23075abcdf1392d",
                "5ebde8b68979a66d",
                "914ee48130b42ab1"
            ],
            [
                "179bf8ab55b1aaf7",
                "5670a3407fb0abdf",
                "ce75b0f5437f0ccd",
                "0d305e25b2af400a"
            ]
        ]
    },
    {
        "id": "ea67f5cae3a610cc",
        "type": "function",
        "z": "4f0d36b27ba46340",
        "name": "Inserir Registo",
        "func": "var zona = 3;\nvar words = msg.topic.split(\"/\");\nvar date = new Date();\nvar hour = date.getHours();\nhour = hour + 1;\ndate.setHours(hour);\n\nmsg.topic = \"INSERT INTO registos (zona, sensor, temperatura, bateria, data, ativo) \" +\n    \" VALUES (\" + zona + \",'\" + msg.payload.Sensor_ID + \"', \"+ msg.payload.Temperatura + \", \"\n    + msg.payload.Bateria + \", now(), '\" + msg.Ativo + \"')\";\nmsg.Zonas = words[1];\nmsg.Sensor = words[2].slice(-1);\nmsg.Data = date;\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 600,
        "y": 640,
        "wires": [
            [
                "ad9dbc5de21efb7c"
            ]
        ]
    },
    {
        "id": "a0eb1f03c15cf0e9",
        "type": "ui_gauge",
        "z": "4f0d36b27ba46340",
        "name": "Arm_Sensor2",
        "group": "904b7af53bb14c68",
        "order": 4,
        "width": 3,
        "height": 2,
        "gtype": "gage",
        "title": "<i class=\"fa fa-thermometer-full\" aria-hidden=\"true\"></i> Temperatura",
        "label": "Cº",
        "format": "{{msg.Temperatura}}",
        "min": "-30",
        "max": "-8",
        "colors": [
            "#ca3838",
            "#0dc50d",
            "#ca3838"
        ],
        "seg1": "-24",
        "seg2": "-12",
        "diff": false,
        "className": "",
        "x": 1800,
        "y": 220,
        "wires": []
    },
    {
        "id": "63e2be90fa385a8e",
        "type": "ui_gauge",
        "z": "4f0d36b27ba46340",
        "name": "Arm_Sensor3",
        "group": "3210ac3b6423b62c",
        "order": 4,
        "width": 3,
        "height": 2,
        "gtype": "gage",
        "title": "<i class=\"fa fa-thermometer-full\" aria-hidden=\"true\"></i> Temperatura",
        "label": "Cº",
        "format": "{{msg.Temperatura}}",
        "min": "0",
        "max": "12",
        "colors": [
            "#ca3838",
            "#0dc50d",
            "#ca3838"
        ],
        "seg1": "2",
        "seg2": "10",
        "diff": false,
        "className": "",
        "x": 1800,
        "y": 400,
        "wires": []
    },
    {
        "id": "2daae41239effe37",
        "type": "ui_text",
        "z": "4f0d36b27ba46340",
        "group": "f43d992ed8084385",
        "order": 1,
        "width": 7,
        "height": 1,
        "name": "Nome",
        "label": "",
        "format": "<font size = 4 font color =royalblue>{{msg.Sensor_Nome}}",
        "layout": "row-left",
        "className": "",
        "x": 1770,
        "y": 120,
        "wires": [],
        "info": ".cssFont_1 {\r\nfont-family: 'Roboto', sans-serif;\r\nfont-size: 30px;\r\nletter-spacing: 2px;\r\nword-spacing: 5px;\r\ncolor: #000000;\r\nfont-weight: bold;\r\ntext-decoration: none;\r\nfont-style: italic;\r\nfont-variant: normal;\r\ntext-transform: none;\r\n}"
    },
    {
        "id": "a23075abcdf1392d",
        "type": "ui_text",
        "z": "4f0d36b27ba46340",
        "group": "3210ac3b6423b62c",
        "order": 1,
        "width": 0,
        "height": 0,
        "name": "Nome",
        "label": "",
        "format": "<font size = 4 font color =royalblue>{{msg.Sensor_Nome}}",
        "layout": "row-left",
        "className": "fundo_azul",
        "x": 1770,
        "y": 440,
        "wires": []
    },
    {
        "id": "5a263e6a6d010b58",
        "type": "ui_text",
        "z": "4f0d36b27ba46340",
        "group": "f43d992ed8084385",
        "order": 3,
        "width": 3,
        "height": 1,
        "name": "",
        "label": "Volts:",
        "format": "{{msg.Volts}}",
        "layout": "row-spread",
        "className": "",
        "x": 1769.000015258789,
        "y": 159.00000190734863,
        "wires": []
    },
    {
        "id": "7a4f61ebefa56264",
        "type": "ui_text",
        "z": "4f0d36b27ba46340",
        "group": "904b7af53bb14c68",
        "order": 1,
        "width": 7,
        "height": 1,
        "name": "Nome",
        "label": "",
        "format": "<font size = 4 font color =royalblue>{{msg.Sensor_Nome}}",
        "layout": "row-left",
        "className": "fundo_azul",
        "x": 1770,
        "y": 260,
        "wires": [],
        "info": ".cssFont_1 {\r\nfont-family: 'Roboto', sans-serif;\r\nfont-size: 30px;\r\nletter-spacing: 2px;\r\nword-spacing: 5px;\r\ncolor: #000000;\r\nfont-weight: bold;\r\ntext-decoration: none;\r\nfont-style: italic;\r\nfont-variant: normal;\r\ntext-transform: none;\r\n}"
    },
    {
        "id": "5ebde8b68979a66d",
        "type": "ui_text",
        "z": "4f0d36b27ba46340",
        "group": "3210ac3b6423b62c",
        "order": 3,
        "width": 3,
        "height": 1,
        "name": "",
        "label": "Volts:",
        "format": "{{msg.Volts}}",
        "layout": "row-spread",
        "className": "",
        "x": 1770,
        "y": 520,
        "wires": []
    },
    {
        "id": "3c0b228d6cee3327",
        "type": "ui_text",
        "z": "4f0d36b27ba46340",
        "group": "904b7af53bb14c68",
        "order": 3,
        "width": 3,
        "height": 1,
        "name": "",
        "label": "Volts:",
        "format": "{{msg.Volts}}",
        "layout": "row-spread",
        "className": "",
        "x": 1770,
        "y": 340,
        "wires": []
    },
    {
        "id": "9ec52bb53b5efc79",
        "type": "mysql",
        "z": "4f0d36b27ba46340",
        "mydb": "9b6527f7.cad8b8",
        "name": "BDados",
        "x": 840,
        "y": 460,
        "wires": [
            [
                "1f7cf421193ba614"
            ]
        ]
    },
    {
        "id": "363b754ce3fa5eae",
        "type": "ui_text",
        "z": "4f0d36b27ba46340",
        "group": "904b7af53bb14c68",
        "order": 9,
        "width": 7,
        "height": 1,
        "name": "Data",
        "label": "Última Leitura",
        "format": "{{msg.Data}}",
        "layout": "row-spread",
        "className": "",
        "x": 1310,
        "y": 620,
        "wires": []
    },
    {
        "id": "212434b29519617f",
        "type": "function",
        "z": "4f0d36b27ba46340",
        "name": "Ultima Leitura",
        "func": "var d = msg.Data.toISOString();\nd = d.replace(\"T\", \" \");\nd = d.slice(0, d.length - 5);\nmsg.Data = d;\n\n\nif (msg.Sensor == 1) {    return [msg, null, null, null];}\nif (msg.Sensor == 2) {    return [null, msg, null, null];}\nif (msg.Sensor == 3) {    return [null, null, msg, null];}\nif (msg.Sensor == 4) {    return [null, null, null, msg];}",
        "outputs": 4,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1060,
        "y": 640,
        "wires": [
            [
                "d7c589a0ad519070"
            ],
            [
                "363b754ce3fa5eae"
            ],
            [
                "80c0c3110e3490c5"
            ],
            [
                "3090a2766f8799f1"
            ]
        ]
    },
    {
        "id": "d7c589a0ad519070",
        "type": "ui_text",
        "z": "4f0d36b27ba46340",
        "group": "f43d992ed8084385",
        "order": 9,
        "width": 7,
        "height": 1,
        "name": "Data",
        "label": "Última Leitura",
        "format": "{{msg.Data}}",
        "layout": "row-spread",
        "className": "",
        "x": 1310,
        "y": 580,
        "wires": []
    },
    {
        "id": "80c0c3110e3490c5",
        "type": "ui_text",
        "z": "4f0d36b27ba46340",
        "group": "3210ac3b6423b62c",
        "order": 9,
        "width": 7,
        "height": 1,
        "name": "Data",
        "label": "Última Leitura",
        "format": "{{msg.Data}}",
        "layout": "row-spread",
        "className": "",
        "x": 1310,
        "y": 660,
        "wires": []
    },
    {
        "id": "74bbcbfa1303a04f",
        "type": "function",
        "z": "4f0d36b27ba46340",
        "name": "SQL 24Horas",
        "func": "msg.topic = \"SELECT temperatura, data FROM registos where sensor = '\" + msg.Sensor_ID + \"' ORDER BY data DESC limit 24\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 600,
        "y": 120,
        "wires": [
            [
                "3beea02e940a38b7"
            ]
        ]
    },
    {
        "id": "3beea02e940a38b7",
        "type": "mysql",
        "z": "4f0d36b27ba46340",
        "mydb": "9b6527f7.cad8b8",
        "name": "BDados",
        "x": 780.0000076293945,
        "y": 120.00000953674316,
        "wires": [
            [
                "86fe0637d80ce1a0"
            ]
        ]
    },
    {
        "id": "b1f61eea8de19a24",
        "type": "ui_chart",
        "z": "4f0d36b27ba46340",
        "name": "Leitura Sensor 2",
        "group": "904b7af53bb14c68",
        "order": 8,
        "width": 7,
        "height": 4,
        "label": "Histórico",
        "chartType": "line",
        "legend": "false",
        "xformat": "dd HH:mm",
        "interpolate": "linear",
        "nodata": "Sem Registos ainda!!!",
        "dot": true,
        "ymin": "-25",
        "ymax": "-12",
        "removeOlder": "4",
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": true,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#24c224",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 1200,
        "y": 100,
        "wires": [
            []
        ]
    },
    {
        "id": "63d954ba44cc8ebd",
        "type": "function",
        "z": "4f0d36b27ba46340",
        "name": "Variaveis",
        "func": "var words = msg.topic.split(\"/\");\nmsg.Zona = words[1];\nmsg.Sensor = words[2].slice(-1);\nmsg.Tipo = msg.payload.Tipo;\nmsg.Ativo = msg.payload.Ativo;\nmsg.Sensor_ID = msg.payload.Sensor_ID;\nmsg.Temperatura = msg.payload.Temperatura;\nmsg.Bateria = msg.payload.Bateria;\nmsg.Versao = msg.payload.VERSAO;\nmsg.Volts = msg.payload.Bateria;\nmsg.ESP_IP = msg.payload.ESP_IP;\nmsg.Var_Payload = msg.payload;\nmsg.Var_Topic = msg.topic;\nmsg.Sensor_Nome = msg.payload.Nome;\nmsg.Wifi = msg.payload.WIFI;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 324.0000114440918,
        "y": 568.9999885559082,
        "wires": [
            [
                "5d7c48da743b3451",
                "74bbcbfa1303a04f",
                "1a4b9d756d0de5ac",
                "29103b9bc199f951",
                "ea67f5cae3a610cc",
                "6c219f6fdf8877eb"
            ]
        ]
    },
    {
        "id": "86fe0637d80ce1a0",
        "type": "function",
        "z": "4f0d36b27ba46340",
        "name": "function 8",
        "func": "var data = [];\nvar series = [\"Temperatura\"];\nvar labels = [\"\"];\nvar i, len, string;\n\nif (msg.Sensor == 1) {\n    for (i = 0, len = msg.payload.length, string = \"\"; i < len; i++) {\n        data.push({ \"x\": Date.parse(msg.payload[i].data), \"y\": Number(msg.payload[i].temperatura) });\n    }\n\n    data = [data];\n    msg.payload = [{ series, data, labels }];\n    return [msg, null, null, null];\n}\nif (msg.Sensor == 2) {\n    for (i = 0, len = msg.payload.length, string = \"\"; i < len; i++) {\n        data.push({ \"x\": Date.parse(msg.payload[i].data), \"y\": Number(msg.payload[i].temperatura) });\n    }\n\n    data = [data];\n    msg.payload = [{ series, data, labels }];\n    return [null, msg, null, null];\n}\nif (msg.Sensor == 3) {\n    for (i = 0, len = msg.payload.length, string = \"\"; i < len; i++) {\n        data.push({ \"x\": Date.parse(msg.payload[i].data), \"y\": Number(msg.payload[i].temperatura) });\n    }\n\n    data = [data];\n    msg.payload = [{ series, data, labels }];\n    return [null, null, msg, null];\n}\nif (msg.Sensor == 4) {\n    for (i = 0, len = msg.payload.length, string = \"\"; i < len; i++) {\n        data.push({ \"x\": Date.parse(msg.payload[i].data), \"y\": Number(msg.payload[i].temperatura) });\n    }\n\n    data = [data];\n    msg.payload = [{ series, data, labels }];\n    return [null, null, null, msg];\n}\n",
        "outputs": 4,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 971.0000114440918,
        "y": 120.00000381469727,
        "wires": [
            [
                "cc519c00f3c45bb1"
            ],
            [
                "b1f61eea8de19a24"
            ],
            [
                "4394a6784abf9b3e"
            ],
            [
                "02b102c20f209c71"
            ]
        ]
    },
    {
        "id": "cc519c00f3c45bb1",
        "type": "ui_chart",
        "z": "4f0d36b27ba46340",
        "name": "Leitura Sensor 1",
        "group": "f43d992ed8084385",
        "order": 8,
        "width": 7,
        "height": 4,
        "label": "Histórico",
        "chartType": "line",
        "legend": "false",
        "xformat": "dd HH:mm",
        "interpolate": "linear",
        "nodata": "Sem Registos ainda!!!",
        "dot": true,
        "ymin": "0",
        "ymax": "12",
        "removeOlder": "24",
        "removeOlderPoints": "24",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#b1cdf1",
            "#ff7f0e",
            "#2ca02c",
            "#40eb1e",
            "#d62728",
            "#ff9896",
            "#7b18d8",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 1200,
        "y": 60,
        "wires": [
            []
        ]
    },
    {
        "id": "4394a6784abf9b3e",
        "type": "ui_chart",
        "z": "4f0d36b27ba46340",
        "name": "Leitura Sensor 3",
        "group": "3210ac3b6423b62c",
        "order": 8,
        "width": 7,
        "height": 4,
        "label": "Histórico",
        "chartType": "line",
        "legend": "false",
        "xformat": "dd HH:mm",
        "interpolate": "linear",
        "nodata": "Sem Registos ainda!!!",
        "dot": true,
        "ymin": "0",
        "ymax": "12",
        "removeOlder": "4",
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 1200,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "4eba2d209fde2d6d",
        "type": "mqtt in",
        "z": "4f0d36b27ba46340",
        "name": "Sensor 4",
        "topic": "TFC/Armazem/Sensor4",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "a22cb5334c925d0b",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 120,
        "y": 680,
        "wires": [
            [
                "63d954ba44cc8ebd"
            ]
        ]
    },
    {
        "id": "179bf8ab55b1aaf7",
        "type": "ui_gauge",
        "z": "4f0d36b27ba46340",
        "name": "Arm_Sensor4",
        "group": "fdc59d5b5fd5ad33",
        "order": 4,
        "width": 3,
        "height": 2,
        "gtype": "gage",
        "title": "<i class=\"fa fa-thermometer-full\" aria-hidden=\"true\"></i> Temperatura",
        "label": "Cº",
        "format": "{{msg.Temperatura}}",
        "min": "0",
        "max": "12",
        "colors": [
            "#ca3838",
            "#0dc50d",
            "#ca3838"
        ],
        "seg1": "2",
        "seg2": "10",
        "diff": false,
        "className": "",
        "x": 1800,
        "y": 580,
        "wires": []
    },
    {
        "id": "5670a3407fb0abdf",
        "type": "ui_text",
        "z": "4f0d36b27ba46340",
        "group": "fdc59d5b5fd5ad33",
        "order": 1,
        "width": 0,
        "height": 0,
        "name": "Nome",
        "label": "",
        "format": "<font size = 4 font color =royalblue>{{msg.Sensor_Nome}}",
        "layout": "row-left",
        "className": "",
        "x": 1770,
        "y": 660,
        "wires": []
    },
    {
        "id": "ce75b0f5437f0ccd",
        "type": "ui_text",
        "z": "4f0d36b27ba46340",
        "group": "fdc59d5b5fd5ad33",
        "order": 3,
        "width": 3,
        "height": 1,
        "name": "",
        "label": "Volts:",
        "format": "{{msg.Volts}}",
        "layout": "row-spread",
        "className": "",
        "x": 1770,
        "y": 700,
        "wires": []
    },
    {
        "id": "3090a2766f8799f1",
        "type": "ui_text",
        "z": "4f0d36b27ba46340",
        "group": "fdc59d5b5fd5ad33",
        "order": 9,
        "width": 7,
        "height": 1,
        "name": "Data",
        "label": "Última Leitura",
        "format": "{{msg.Data}}",
        "layout": "row-spread",
        "className": "",
        "x": 1310,
        "y": 700,
        "wires": []
    },
    {
        "id": "02b102c20f209c71",
        "type": "ui_chart",
        "z": "4f0d36b27ba46340",
        "name": "Leitura Sensor 4",
        "group": "fdc59d5b5fd5ad33",
        "order": 8,
        "width": 7,
        "height": 4,
        "label": "Histórico",
        "chartType": "line",
        "legend": "false",
        "xformat": "dd HH:mm",
        "interpolate": "linear",
        "nodata": "Sem Registos ainda!!!",
        "dot": true,
        "ymin": "0",
        "ymax": "12",
        "removeOlder": "4",
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 1200,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "f8c0ac57ef74ebc7",
        "type": "ui_gauge",
        "z": "4f0d36b27ba46340",
        "name": "BAT_Sensor1",
        "group": "f43d992ed8084385",
        "order": 6,
        "width": 3,
        "height": 2,
        "gtype": "gage",
        "title": "<i class=\"fa fa-battery-full\" aria-hidden=\"true\"></i> Bateria",
        "label": "%",
        "format": "{{msg.Bateria}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#ca3838",
            "#e6e600",
            "#0dc50d"
        ],
        "seg1": "30",
        "seg2": "50",
        "diff": false,
        "className": "",
        "x": 1800,
        "y": 80,
        "wires": []
    },
    {
        "id": "a06ee45a9c49751c",
        "type": "ui_gauge",
        "z": "4f0d36b27ba46340",
        "name": "BAT_Sensor2",
        "group": "904b7af53bb14c68",
        "order": 6,
        "width": 3,
        "height": 2,
        "gtype": "gage",
        "title": "<i class=\"fa fa-battery-full\" aria-hidden=\"true\"></i> Bateria",
        "label": "%",
        "format": "{{msg.Bateria}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#ca3838",
            "#e6e600",
            "#0dc50d"
        ],
        "seg1": "30",
        "seg2": "50",
        "diff": false,
        "className": "",
        "x": 1800,
        "y": 300,
        "wires": []
    },
    {
        "id": "914ee48130b42ab1",
        "type": "ui_gauge",
        "z": "4f0d36b27ba46340",
        "name": "BAT_Sensor3",
        "group": "3210ac3b6423b62c",
        "order": 6,
        "width": 3,
        "height": 2,
        "gtype": "gage",
        "title": "<i class=\"fa fa-battery-full\" aria-hidden=\"true\"></i> Bateria",
        "label": "%",
        "format": "{{msg.Bateria}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#ca3838",
            "#e6e600",
            "#0dc50d"
        ],
        "seg1": "30",
        "seg2": "50",
        "diff": false,
        "className": "",
        "x": 1800,
        "y": 480,
        "wires": []
    },
    {
        "id": "0d305e25b2af400a",
        "type": "ui_gauge",
        "z": "4f0d36b27ba46340",
        "name": "BAT_Sensor4",
        "group": "fdc59d5b5fd5ad33",
        "order": 6,
        "width": 3,
        "height": 2,
        "gtype": "gage",
        "title": "<i class=\"fa fa-battery-full\" aria-hidden=\"true\"></i> Bateria",
        "label": "%",
        "format": "{{msg.Bateria}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#ca3838",
            "#e6e600",
            "#0dc50d"
        ],
        "seg1": "30",
        "seg2": "50",
        "diff": false,
        "className": "",
        "x": 1800,
        "y": 620,
        "wires": []
    },
    {
        "id": "1a4b9d756d0de5ac",
        "type": "function",
        "z": "4f0d36b27ba46340",
        "name": "Sinal Wifi",
        "func": "if (msg.Wifi >= -50) {\n    msg.Sinal = \"Forte\";\n}\nelse if (msg.Wifi < -50 && msg.Wifi > -60) {\n    msg.Sinal = \"Bom\";\n}\nelse if (msg.Wifi <= -61 && msg.Wifi > -75) {\n    msg.Sinal = \"Suficiente\";\n}\nelse if (msg.Wifi <= -76) {\n    msg.Sinal = \"Mau\";\n}\n\nif (msg.Sensor == 1) { return [msg, null, null, null]; }\nif (msg.Sensor == 2) { return [null, msg, null, null]; }\nif (msg.Sensor == 3) { return [null, null, msg, null]; }\nif (msg.Sensor == 4) { return [null, null, null, msg]; }",
        "outputs": 4,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 580,
        "y": 300,
        "wires": [
            [
                "59eea9d2b3ac37b3"
            ],
            [
                "0b5cb1dcae93ebfd"
            ],
            [
                "a4640471c541b559"
            ],
            [
                "c49344de18fa1033"
            ]
        ]
    },
    {
        "id": "59eea9d2b3ac37b3",
        "type": "ui_text",
        "z": "4f0d36b27ba46340",
        "group": "f43d992ed8084385",
        "order": 2,
        "width": 4,
        "height": 1,
        "name": "Sinal_AS1",
        "label": "Sinal Wifi:",
        "format": "{{msg.Sinal}}",
        "layout": "row-spread",
        "className": "",
        "x": 790,
        "y": 240,
        "wires": []
    },
    {
        "id": "0b5cb1dcae93ebfd",
        "type": "ui_text",
        "z": "4f0d36b27ba46340",
        "group": "904b7af53bb14c68",
        "order": 2,
        "width": 4,
        "height": 1,
        "name": "Sinal_AS2",
        "label": "Sinal Wifi:",
        "format": "{{msg.Sinal}}",
        "layout": "row-spread",
        "className": "",
        "x": 790,
        "y": 280,
        "wires": []
    },
    {
        "id": "a4640471c541b559",
        "type": "ui_text",
        "z": "4f0d36b27ba46340",
        "group": "3210ac3b6423b62c",
        "order": 2,
        "width": 4,
        "height": 1,
        "name": "Sinal_AS3",
        "label": "Sinal Wifi:",
        "format": "{{msg.Sinal}}",
        "layout": "row-spread",
        "className": "",
        "x": 790,
        "y": 320,
        "wires": []
    },
    {
        "id": "c49344de18fa1033",
        "type": "ui_text",
        "z": "4f0d36b27ba46340",
        "group": "fdc59d5b5fd5ad33",
        "order": 2,
        "width": 4,
        "height": 1,
        "name": "Sinal_AS4",
        "label": "Sinal Wifi:",
        "format": "{{msg.Sinal}}",
        "layout": "row-spread",
        "className": "p2",
        "x": 790,
        "y": 360,
        "wires": []
    },
    {
        "id": "215cf210a8a154df",
        "type": "mqtt out",
        "z": "4f0d36b27ba46340",
        "name": "Sensor 2",
        "topic": "TFC/Armazem/Sensor2/S2",
        "qos": "2",
        "retain": "true",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "a22cb5334c925d0b",
        "x": 1040,
        "y": 1540,
        "wires": []
    },
    {
        "id": "294ebdbaa17bc2db",
        "type": "mqtt out",
        "z": "4f0d36b27ba46340",
        "name": "Sensor 1",
        "topic": "TFC/Armazem/Sensor1/S1",
        "qos": "2",
        "retain": "true",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "a22cb5334c925d0b",
        "x": 1040,
        "y": 1300,
        "wires": []
    },
    {
        "id": "19b4a4bd7ba8b10c",
        "type": "mqtt out",
        "z": "4f0d36b27ba46340",
        "name": "Sensor 3",
        "topic": "TFC/Armazem/Sensor3/S3",
        "qos": "2",
        "retain": "true",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "a22cb5334c925d0b",
        "x": 1040,
        "y": 1920,
        "wires": []
    },
    {
        "id": "ba9c1ee2a060eaf8",
        "type": "switch",
        "z": "4f0d36b27ba46340",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "ativar",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "avaria",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "carregar",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "desativar",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 4,
        "x": 1010,
        "y": 1200,
        "wires": [
            [
                "80e460ce955aed20"
            ],
            [
                "761480f34bb10797"
            ],
            [
                "0a631da9fd75ed95"
            ],
            [
                "35420f055fbc4f67"
            ]
        ]
    },
    {
        "id": "761480f34bb10797",
        "type": "change",
        "z": "4f0d36b27ba46340",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "label",
                "pt": "msg",
                "to": "Equipamento Avariado",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1210,
        "y": 1180,
        "wires": [
            [
                "50149f1c0c61f31c"
            ]
        ]
    },
    {
        "id": "0a631da9fd75ed95",
        "type": "change",
        "z": "4f0d36b27ba46340",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "label",
                "pt": "msg",
                "to": "Sensor a Carregar",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1210,
        "y": 1220,
        "wires": [
            [
                "50149f1c0c61f31c"
            ]
        ]
    },
    {
        "id": "50149f1c0c61f31c",
        "type": "ui_text",
        "z": "4f0d36b27ba46340",
        "group": "f43d992ed8084385",
        "order": 13,
        "width": 7,
        "height": 1,
        "name": "S_L_1",
        "label": "",
        "format": "<font size = 4 font color =royalblue>{{msg.label}}",
        "layout": "row-left",
        "className": "",
        "x": 1430,
        "y": 1140,
        "wires": []
    },
    {
        "id": "4763809d9d6cc788",
        "type": "ui_text",
        "z": "4f0d36b27ba46340",
        "group": "904b7af53bb14c68",
        "order": 13,
        "width": 7,
        "height": 1,
        "name": "S_L_2",
        "label": "",
        "format": "<font size = 4 font color =royalblue>{{msg.label1}}",
        "layout": "row-left",
        "className": "",
        "x": 1430,
        "y": 1400,
        "wires": []
    },
    {
        "id": "6b75462dc538c1bc",
        "type": "ui_text",
        "z": "4f0d36b27ba46340",
        "group": "3210ac3b6423b62c",
        "order": 13,
        "width": 7,
        "height": 1,
        "name": "S_L_3",
        "label": "",
        "format": "<font size = 4 font color =royalblue>{{msg.label2}}",
        "layout": "row-left",
        "className": "",
        "x": 1430,
        "y": 1780,
        "wires": []
    },
    {
        "id": "f19cdaa32b890396",
        "type": "mqtt out",
        "z": "4f0d36b27ba46340",
        "name": "Sensor 4",
        "topic": "TFC/Armazem/Sensor4/S4",
        "qos": "2",
        "retain": "true",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "a22cb5334c925d0b",
        "x": 1040,
        "y": 2160,
        "wires": []
    },
    {
        "id": "2e34e6b5d3d6a228",
        "type": "ui_text",
        "z": "4f0d36b27ba46340",
        "group": "fdc59d5b5fd5ad33",
        "order": 13,
        "width": 7,
        "height": 1,
        "name": "S_L_4",
        "label": "",
        "format": "<font size = 4 font color =royalblue>{{msg.label3}}",
        "layout": "row-left",
        "className": "",
        "x": 1430,
        "y": 2020,
        "wires": []
    },
    {
        "id": "cf54b923a478ccc8",
        "type": "function",
        "z": "4f0d36b27ba46340",
        "name": "Update Sensor",
        "func": "if (msg.Sensor == 1) {\n    msg.payload == true ? msg.Ativo = \"S\" : msg.Ativo = \"N\";\n}\nelse if (msg.Sensor == 2) {\n    msg.payload == true ? msg.Ativo = \"S\" : msg.Ativo = \"N\";\n}\nelse if (msg.Sensor == 3) {\n    msg.payload == true ? msg.Ativo = \"S\" : msg.Ativo = \"N\";\n}\nelse if (msg.Sensor == 4) {\n    msg.payload == true ? msg.Ativo = \"S\" : msg.Ativo = \"N\";\n}\nmsg.topic = \"UPDATE sensor SET Ativo='\"+ msg.Ativo +\"' where sensor_n=\"+ msg.Sensor +\" and zona=3\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1060,
        "y": 1640,
        "wires": [
            [
                "48f6ac39560eaebb"
            ]
        ]
    },
    {
        "id": "48f6ac39560eaebb",
        "type": "mysql",
        "z": "4f0d36b27ba46340",
        "mydb": "9b6527f7.cad8b8",
        "name": "BDados",
        "x": 1260,
        "y": 1660,
        "wires": [
            []
        ]
    },
    {
        "id": "3381728eed09da4f",
        "type": "ui_button",
        "z": "4f0d36b27ba46340",
        "name": "",
        "group": "f43d992ed8084385",
        "order": 10,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "Ativar",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "check",
        "payload": "ativar",
        "payloadType": "str",
        "topic": "ativar",
        "topicType": "msg",
        "x": 310,
        "y": 1300,
        "wires": [
            [
                "ba9c1ee2a060eaf8",
                "7fd9f752e87649c4"
            ]
        ]
    },
    {
        "id": "45f42449.b3c8dc",
        "type": "ui_button",
        "z": "4f0d36b27ba46340",
        "name": "",
        "group": "f43d992ed8084385",
        "order": 12,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "Desativar",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "fa-ban",
        "payload": "desativar",
        "payloadType": "str",
        "topic": "",
        "topicType": "str",
        "x": 320,
        "y": 1200,
        "wires": [
            [
                "5b2478ff.043158"
            ]
        ]
    },
    {
        "id": "5b2478ff.043158",
        "type": "change",
        "z": "4f0d36b27ba46340",
        "name": "XY",
        "rules": [
            {
                "t": "set",
                "p": "position.x",
                "pt": "msg",
                "to": "event.bbox[2]-150",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "position.y",
                "pt": "msg",
                "to": "event.bbox[3]+40",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 490,
        "y": 1200,
        "wires": [
            [
                "b3b5bcfc.cf079"
            ]
        ]
    },
    {
        "id": "b3b5bcfc.cf079",
        "type": "ui_context_menu",
        "z": "4f0d36b27ba46340",
        "group": "f43d992ed8084385",
        "order": 14,
        "width": 0,
        "height": 0,
        "fontSize": 16,
        "inputPositionXField": "position.x",
        "inputPositionXType": "msg",
        "inputPositionYField": "position.y",
        "inputPositionYType": "msg",
        "outputField": "payload",
        "inputMenuField": "",
        "inputMenuType": "fixed",
        "menuItems": [
            {
                "id": "motivo",
                "icon": "",
                "label": "Motivo",
                "topic": "",
                "payload": "",
                "payloadType": "str",
                "visible": true,
                "enabled": false
            },
            {
                "id": "avaria",
                "icon": "fa-wrench",
                "label": "Avaria",
                "topic": "avaria",
                "payload": "avaria",
                "payloadType": "str",
                "visible": true,
                "enabled": true
            },
            {
                "id": "carregar",
                "icon": "fa-battery-1",
                "label": "Carregar Bateria",
                "topic": "carregar",
                "payload": "carregar",
                "payloadType": "str",
                "visible": true,
                "enabled": true
            },
            {
                "id": "desativar",
                "icon": "fa-ban",
                "label": "Desativar",
                "topic": "desativar",
                "payload": "desativar",
                "payloadType": "str",
                "visible": true,
                "enabled": true
            }
        ],
        "colors": "theme",
        "textColor": "#000000",
        "backgroundColor": "#ffffff",
        "borderColor": "#626262",
        "intervalLength": "0",
        "intervalUnit": "secs",
        "startTimerAtOpen": false,
        "startTimerAtLeave": true,
        "stopTimerAtEnter": true,
        "name": "Menu Sensor 1",
        "x": 660,
        "y": 1200,
        "wires": [
            [
                "ba9c1ee2a060eaf8",
                "7fd9f752e87649c4"
            ]
        ]
    },
    {
        "id": "35420f055fbc4f67",
        "type": "change",
        "z": "4f0d36b27ba46340",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "label",
                "pt": "msg",
                "to": "Equipamento Desligado",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1210,
        "y": 1260,
        "wires": [
            [
                "50149f1c0c61f31c"
            ]
        ]
    },
    {
        "id": "80e460ce955aed20",
        "type": "change",
        "z": "4f0d36b27ba46340",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "label",
                "pt": "msg",
                "to": "Equipamento Ativo",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1210,
        "y": 1140,
        "wires": [
            [
                "50149f1c0c61f31c"
            ]
        ]
    },
    {
        "id": "7fd9f752e87649c4",
        "type": "function",
        "z": "4f0d36b27ba46340",
        "name": "function 10",
        "func": "if(msg.payload === \"ativar\"){\n    msg.payload = true;\n    msg.Estado = \"Ativo\";\n}\nif (msg.topic === \"avaria\"){\n    msg.Estado = \"Avaria\";\n    msg.payload = false;\n}\nif(msg.topic === \"desativar\"){\n    msg.Estado = \"Desativado\";\n    msg.payload = false;\n}\nif (msg.topic === \"carregar\"){\n    msg.Estado = \"Em Carregamento\";\n    msg.payload = false;\n}\nmsg.Sensor = 1;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 830,
        "y": 1300,
        "wires": [
            [
                "294ebdbaa17bc2db",
                "cf54b923a478ccc8",
                "084b9369fb0ebd27"
            ]
        ]
    },
    {
        "id": "084b9369fb0ebd27",
        "type": "function",
        "z": "4f0d36b27ba46340",
        "name": "Inserir Estado",
        "func": "/*\nif (msg.Sensor == 1) {\n    msg.payload == true ? msg.Ativo = \"S\" : msg.Ativo = \"N\";\n}\nif (msg.Sensor == 2) {\n    msg.payload == true ? msg.Ativo = \"S\" : msg.Ativo = \"N\";\n}\nif (msg.Sensor == 3) {\n    msg.payload == true ? msg.Ativo = \"S\" : msg.Ativo = \"N\";\n}\n*/\nmsg.payload == true ? msg.Ativo = \"S\" : msg.Ativo = \"N\";\nmsg.topic = \"INSERT into estados(zona, sensor_n, estado, data, motivo) values(3, \" + msg.Sensor + \", '\" + msg.Ativo + \"', now(),'\" + msg.Estado +\"' );\"\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1060,
        "y": 1700,
        "wires": [
            [
                "48f6ac39560eaebb"
            ]
        ]
    },
    {
        "id": "b6d3ea12756887f9",
        "type": "switch",
        "z": "4f0d36b27ba46340",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "ativar",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "avaria",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "carregar",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "desativar",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 4,
        "x": 1010,
        "y": 1460,
        "wires": [
            [
                "3e34dc2e40b0b668"
            ],
            [
                "1420d7871e3c18e4"
            ],
            [
                "7255ff26176f2307"
            ],
            [
                "be2dec6bcd8ff09f"
            ]
        ]
    },
    {
        "id": "1420d7871e3c18e4",
        "type": "change",
        "z": "4f0d36b27ba46340",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "label1",
                "pt": "msg",
                "to": "Equipamento Avariado",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1220,
        "y": 1440,
        "wires": [
            [
                "4763809d9d6cc788"
            ]
        ]
    },
    {
        "id": "7255ff26176f2307",
        "type": "change",
        "z": "4f0d36b27ba46340",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "label1",
                "pt": "msg",
                "to": "Sensor a Carregar",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1220,
        "y": 1480,
        "wires": [
            [
                "4763809d9d6cc788"
            ]
        ]
    },
    {
        "id": "be2dec6bcd8ff09f",
        "type": "change",
        "z": "4f0d36b27ba46340",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "label1",
                "pt": "msg",
                "to": "Equipamento Desligado",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1220,
        "y": 1520,
        "wires": [
            [
                "4763809d9d6cc788"
            ]
        ]
    },
    {
        "id": "3e34dc2e40b0b668",
        "type": "change",
        "z": "4f0d36b27ba46340",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "label1",
                "pt": "msg",
                "to": "Equipamento Ativo",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1220,
        "y": 1400,
        "wires": [
            [
                "4763809d9d6cc788"
            ]
        ]
    },
    {
        "id": "c45a66b4b28b6ff7",
        "type": "switch",
        "z": "4f0d36b27ba46340",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "ativar",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "avaria",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "carregar",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "desativar",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 4,
        "x": 1010,
        "y": 1840,
        "wires": [
            [
                "829ba8bacd6f16e9"
            ],
            [
                "26a404d59abca600"
            ],
            [
                "3f18bab5b773ded9"
            ],
            [
                "b7f58294a8225f0e"
            ]
        ]
    },
    {
        "id": "26a404d59abca600",
        "type": "change",
        "z": "4f0d36b27ba46340",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "label2",
                "pt": "msg",
                "to": "Equipamento Avariado",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1220,
        "y": 1820,
        "wires": [
            [
                "6b75462dc538c1bc"
            ]
        ]
    },
    {
        "id": "3f18bab5b773ded9",
        "type": "change",
        "z": "4f0d36b27ba46340",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "label2",
                "pt": "msg",
                "to": "Sensor a Carregar",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1220,
        "y": 1860,
        "wires": [
            [
                "6b75462dc538c1bc"
            ]
        ]
    },
    {
        "id": "b7f58294a8225f0e",
        "type": "change",
        "z": "4f0d36b27ba46340",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "label2",
                "pt": "msg",
                "to": "Equipamento Desligado",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1220,
        "y": 1900,
        "wires": [
            [
                "6b75462dc538c1bc"
            ]
        ]
    },
    {
        "id": "829ba8bacd6f16e9",
        "type": "change",
        "z": "4f0d36b27ba46340",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "label2",
                "pt": "msg",
                "to": "Equipamento Ativo",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1220,
        "y": 1780,
        "wires": [
            [
                "6b75462dc538c1bc"
            ]
        ]
    },
    {
        "id": "4f5723b0fa3791c4",
        "type": "switch",
        "z": "4f0d36b27ba46340",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "ativar",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "avaria",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "carregar",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "desativar",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 4,
        "x": 1010,
        "y": 2080,
        "wires": [
            [
                "00e901856027aee3"
            ],
            [
                "f61dd71775d2f1a0"
            ],
            [
                "f315d86b0e276aa0"
            ],
            [
                "c5335514729e03fe"
            ]
        ]
    },
    {
        "id": "f61dd71775d2f1a0",
        "type": "change",
        "z": "4f0d36b27ba46340",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "label3",
                "pt": "msg",
                "to": "Equipamento Avariado",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1220,
        "y": 2060,
        "wires": [
            [
                "2e34e6b5d3d6a228"
            ]
        ]
    },
    {
        "id": "f315d86b0e276aa0",
        "type": "change",
        "z": "4f0d36b27ba46340",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "label3",
                "pt": "msg",
                "to": "Sensor a Carregar",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1220,
        "y": 2100,
        "wires": [
            [
                "2e34e6b5d3d6a228"
            ]
        ]
    },
    {
        "id": "c5335514729e03fe",
        "type": "change",
        "z": "4f0d36b27ba46340",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "label3",
                "pt": "msg",
                "to": "Equipamento Desligado",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1220,
        "y": 2140,
        "wires": [
            [
                "2e34e6b5d3d6a228"
            ]
        ]
    },
    {
        "id": "00e901856027aee3",
        "type": "change",
        "z": "4f0d36b27ba46340",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "label3",
                "pt": "msg",
                "to": "Equipamento Ativo",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1220,
        "y": 2020,
        "wires": [
            [
                "2e34e6b5d3d6a228"
            ]
        ]
    },
    {
        "id": "325db97dd7826f3e",
        "type": "ui_button",
        "z": "4f0d36b27ba46340",
        "name": "",
        "group": "904b7af53bb14c68",
        "order": 10,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "Ativar",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "check",
        "payload": "ativar",
        "payloadType": "str",
        "topic": "ativar",
        "topicType": "msg",
        "x": 310,
        "y": 1540,
        "wires": [
            [
                "8490c32e228c6eb2",
                "b6d3ea12756887f9"
            ]
        ]
    },
    {
        "id": "d9e00ba2aa0d7c3f",
        "type": "ui_button",
        "z": "4f0d36b27ba46340",
        "name": "",
        "group": "904b7af53bb14c68",
        "order": 12,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "Desativar",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "fa-ban",
        "payload": "desativar",
        "payloadType": "str",
        "topic": "",
        "topicType": "str",
        "x": 320,
        "y": 1460,
        "wires": [
            [
                "b2a14ae74597a787"
            ]
        ]
    },
    {
        "id": "b2a14ae74597a787",
        "type": "change",
        "z": "4f0d36b27ba46340",
        "name": "XY",
        "rules": [
            {
                "t": "set",
                "p": "position.x",
                "pt": "msg",
                "to": "event.bbox[2]-150",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "position.y",
                "pt": "msg",
                "to": "event.bbox[3]+40",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 490,
        "y": 1460,
        "wires": [
            [
                "2912bbc42253eda9"
            ]
        ]
    },
    {
        "id": "2912bbc42253eda9",
        "type": "ui_context_menu",
        "z": "4f0d36b27ba46340",
        "group": "904b7af53bb14c68",
        "order": 14,
        "width": 0,
        "height": 0,
        "fontSize": 16,
        "inputPositionXField": "position.x",
        "inputPositionXType": "msg",
        "inputPositionYField": "position.y",
        "inputPositionYType": "msg",
        "outputField": "payload",
        "inputMenuField": "",
        "inputMenuType": "fixed",
        "menuItems": [
            {
                "id": "avaria",
                "icon": "fa-wrench",
                "label": "Avaria",
                "topic": "avaria",
                "payload": "avaria",
                "payloadType": "str",
                "visible": true,
                "enabled": true
            },
            {
                "id": "carregar",
                "icon": "fa-battery-1",
                "label": "Carregar Bateria",
                "topic": "carregar",
                "payload": "carregar",
                "payloadType": "str",
                "visible": true,
                "enabled": true
            },
            {
                "id": "desativar",
                "icon": "fa-ban",
                "label": "Desativar",
                "topic": "desativar",
                "payload": "desativar",
                "payloadType": "str",
                "visible": true,
                "enabled": true
            }
        ],
        "colors": "theme",
        "textColor": "#000000",
        "backgroundColor": "#ffffff",
        "borderColor": "#626262",
        "intervalLength": "0",
        "intervalUnit": "secs",
        "startTimerAtOpen": false,
        "startTimerAtLeave": true,
        "stopTimerAtEnter": true,
        "name": "Menu Sensor 2",
        "x": 660,
        "y": 1460,
        "wires": [
            [
                "8490c32e228c6eb2",
                "b6d3ea12756887f9"
            ]
        ]
    },
    {
        "id": "8490c32e228c6eb2",
        "type": "function",
        "z": "4f0d36b27ba46340",
        "name": "function 11",
        "func": "if (msg.payload === \"ativar\") {\n    msg.payload = true;\n    msg.Estado = \"Ativo\";\n}\nif (msg.topic === \"avaria\") {\n    msg.Estado = \"Avaria\";\n    msg.payload = false;\n}\nif (msg.topic === \"desativar\") {\n    msg.Estado = \"Desativado\";\n    msg.payload = false;\n}\nif (msg.topic === \"carregar\") {\n    msg.Estado = \"Em Carregamento\";\n    msg.payload = false;\n}\nmsg.Sensor = 2;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 830,
        "y": 1540,
        "wires": [
            [
                "215cf210a8a154df",
                "cf54b923a478ccc8",
                "084b9369fb0ebd27"
            ]
        ]
    },
    {
        "id": "f9ecc280102de66b",
        "type": "ui_button",
        "z": "4f0d36b27ba46340",
        "name": "",
        "group": "3210ac3b6423b62c",
        "order": 10,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "Ativar",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "check",
        "payload": "ativar",
        "payloadType": "str",
        "topic": "ativar",
        "topicType": "msg",
        "x": 310,
        "y": 1920,
        "wires": [
            [
                "b6676126228725b5",
                "c45a66b4b28b6ff7"
            ]
        ]
    },
    {
        "id": "abd0ab6eba54a517",
        "type": "ui_button",
        "z": "4f0d36b27ba46340",
        "name": "",
        "group": "3210ac3b6423b62c",
        "order": 12,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "Desativar",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "fa-ban",
        "payload": "desativar",
        "payloadType": "str",
        "topic": "",
        "topicType": "str",
        "x": 320,
        "y": 1840,
        "wires": [
            [
                "b24fd6c7bba27474"
            ]
        ]
    },
    {
        "id": "b24fd6c7bba27474",
        "type": "change",
        "z": "4f0d36b27ba46340",
        "name": "XY",
        "rules": [
            {
                "t": "set",
                "p": "position.x",
                "pt": "msg",
                "to": "event.bbox[2]-150",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "position.y",
                "pt": "msg",
                "to": "event.bbox[3]+40",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 490,
        "y": 1840,
        "wires": [
            [
                "841eb3818e635a8a"
            ]
        ]
    },
    {
        "id": "841eb3818e635a8a",
        "type": "ui_context_menu",
        "z": "4f0d36b27ba46340",
        "group": "3210ac3b6423b62c",
        "order": 14,
        "width": 0,
        "height": 0,
        "fontSize": 16,
        "inputPositionXField": "position.x",
        "inputPositionXType": "msg",
        "inputPositionYField": "position.y",
        "inputPositionYType": "msg",
        "outputField": "payload",
        "inputMenuField": "",
        "inputMenuType": "fixed",
        "menuItems": [
            {
                "id": "avaria",
                "icon": "fa-wrench",
                "label": "Avaria",
                "topic": "avaria",
                "payload": "avaria",
                "payloadType": "str",
                "visible": true,
                "enabled": true
            },
            {
                "id": "carregar",
                "icon": "fa-battery-1",
                "label": "Carregar Bateria",
                "topic": "carregar",
                "payload": "carregar",
                "payloadType": "str",
                "visible": true,
                "enabled": true
            },
            {
                "id": "desativar",
                "icon": "fa-ban",
                "label": "Desativar",
                "topic": "desativar",
                "payload": "desativar",
                "payloadType": "str",
                "visible": true,
                "enabled": true
            }
        ],
        "colors": "theme",
        "textColor": "#000000",
        "backgroundColor": "#ffffff",
        "borderColor": "#626262",
        "intervalLength": "0",
        "intervalUnit": "secs",
        "startTimerAtOpen": false,
        "startTimerAtLeave": true,
        "stopTimerAtEnter": true,
        "name": "Menu Sensor 3",
        "x": 660,
        "y": 1840,
        "wires": [
            [
                "b6676126228725b5",
                "c45a66b4b28b6ff7"
            ]
        ]
    },
    {
        "id": "b6676126228725b5",
        "type": "function",
        "z": "4f0d36b27ba46340",
        "name": "function 12",
        "func": "if (msg.payload === \"ativar\") {\n    msg.payload = true;\n    msg.Estado = \"Ativo\";\n}\nif (msg.topic === \"avaria\") {\n    msg.Estado = \"Avaria\";\n    msg.payload = false;\n}\nif (msg.topic === \"desativar\") {\n    msg.Estado = \"Desativado\";\n    msg.payload = false;\n}\nif (msg.topic === \"carregar\") {\n    msg.Estado = \"Em Carregamento\";\n    msg.payload = false;\n}\nmsg.Sensor = 3;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 830,
        "y": 1920,
        "wires": [
            [
                "cf54b923a478ccc8",
                "084b9369fb0ebd27",
                "19b4a4bd7ba8b10c"
            ]
        ]
    },
    {
        "id": "d86b2a1b677d326f",
        "type": "ui_button",
        "z": "4f0d36b27ba46340",
        "name": "",
        "group": "fdc59d5b5fd5ad33",
        "order": 10,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "Ativar",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "check",
        "payload": "ativar",
        "payloadType": "str",
        "topic": "ativar",
        "topicType": "msg",
        "x": 310,
        "y": 2160,
        "wires": [
            [
                "b88dba8c5dd0884b",
                "4f5723b0fa3791c4"
            ]
        ]
    },
    {
        "id": "53c3cabb4b0c8e1b",
        "type": "ui_button",
        "z": "4f0d36b27ba46340",
        "name": "",
        "group": "fdc59d5b5fd5ad33",
        "order": 12,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "Desativar",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "fa-ban",
        "payload": "desativar",
        "payloadType": "str",
        "topic": "",
        "topicType": "str",
        "x": 320,
        "y": 2080,
        "wires": [
            [
                "de7a1a6a4e89d47a"
            ]
        ]
    },
    {
        "id": "de7a1a6a4e89d47a",
        "type": "change",
        "z": "4f0d36b27ba46340",
        "name": "XY",
        "rules": [
            {
                "t": "set",
                "p": "position.x",
                "pt": "msg",
                "to": "event.bbox[2]-150",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "position.y",
                "pt": "msg",
                "to": "event.bbox[3]+40",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 490,
        "y": 2080,
        "wires": [
            [
                "a781e6f1cd8bba3e"
            ]
        ]
    },
    {
        "id": "a781e6f1cd8bba3e",
        "type": "ui_context_menu",
        "z": "4f0d36b27ba46340",
        "group": "fdc59d5b5fd5ad33",
        "order": 14,
        "width": 0,
        "height": 0,
        "fontSize": 16,
        "inputPositionXField": "position.x",
        "inputPositionXType": "msg",
        "inputPositionYField": "position.y",
        "inputPositionYType": "msg",
        "outputField": "payload",
        "inputMenuField": "",
        "inputMenuType": "fixed",
        "menuItems": [
            {
                "id": "avaria",
                "icon": "fa-wrench",
                "label": "Avaria",
                "topic": "avaria",
                "payload": "avaria",
                "payloadType": "str",
                "visible": true,
                "enabled": true
            },
            {
                "id": "carregar",
                "icon": "fa-battery-1",
                "label": "Carregar Bateria",
                "topic": "carregar",
                "payload": "carregar",
                "payloadType": "str",
                "visible": true,
                "enabled": true
            },
            {
                "id": "desativar",
                "icon": "fa-ban",
                "label": "Desativar",
                "topic": "desativar",
                "payload": "desativar",
                "payloadType": "str",
                "visible": true,
                "enabled": true
            }
        ],
        "colors": "theme",
        "textColor": "#000000",
        "backgroundColor": "#ffffff",
        "borderColor": "#626262",
        "intervalLength": "0",
        "intervalUnit": "secs",
        "startTimerAtOpen": false,
        "startTimerAtLeave": true,
        "stopTimerAtEnter": true,
        "name": "Menu Sensor 4",
        "x": 660,
        "y": 2080,
        "wires": [
            [
                "b88dba8c5dd0884b",
                "4f5723b0fa3791c4"
            ]
        ]
    },
    {
        "id": "b88dba8c5dd0884b",
        "type": "function",
        "z": "4f0d36b27ba46340",
        "name": "function 13",
        "func": "if (msg.payload === \"ativar\") {\n    msg.payload = true;\n    msg.Estado = \"Ativo\";\n}\nif (msg.topic === \"avaria\") {\n    msg.Estado = \"Avaria\";\n    msg.payload = false;\n}\nif (msg.topic === \"desativar\") {\n    msg.Estado = \"Desativado\";\n    msg.payload = false;\n}\nif (msg.topic === \"carregar\") {\n    msg.Estado = \"Em Carregamento\";\n    msg.payload = false;\n}\nmsg.Sensor = 4;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 830,
        "y": 2160,
        "wires": [
            [
                "cf54b923a478ccc8",
                "084b9369fb0ebd27",
                "f19cdaa32b890396"
            ]
        ]
    },
    {
        "id": "0fe717e02c5ebc45",
        "type": "e-mail",
        "z": "4f0d36b27ba46340",
        "server": "mail.northspot.pt",
        "port": "465",
        "authtype": "BASIC",
        "saslformat": false,
        "token": "",
        "secure": true,
        "tls": true,
        "name": "arimar.sensores@gmail.com",
        "dname": "Email",
        "x": 1470,
        "y": 840,
        "wires": []
    },
    {
        "id": "3dbfc11018623616",
        "type": "function",
        "z": "4f0d36b27ba46340",
        "name": "Verifica Temperatura",
        "func": "msg.topic = \"ALERTA - Zona do Armazém - Sensor: \" + msg.Sensor;\nvar alta =  \"ALERTA TEMPERATURA ALTA\";\nvar baixa = \"ALERTA TEMPERATURA BAIXA\";\nvar w = \"%0A%0AZona: Armazém%0ASensor: \" + msg.Sensor + \"%0ATemperatura: \" + msg.Temperatura + \" ºC %0A%0AVerifique o Equipamento.\";\nvar p = \"</h1><p>Temperatura: \" + msg.Temperatura + \"</p><p>Verifique o Equipamento!!!</p>\" \n\n\nif (msg.Tipo == 1) {\n    if (msg.Temperatura >= 10) {\n        msg.whatsapp = alta + w;\n        msg.payload = \"<h1>\" + alta + p;\n        return [msg, null];\n    }\n    else if (msg.Temperatura <= 2) {\n        msg.whatsapp = baixa + w;\n        msg.payload = \"<h1>\" + baixa + p;\n        return [msg, null];\n    }\n    else\n        return [null, null];\n}\nelse if (msg.Tipo == 2) {\n    if (msg.Temperatura >= -5) {\n        msg.whatsapp = alta + w;\n        msg.payload = \"<h1>\" + alta + p;\n        return [msg, null];\n    }\n    else if (msg.Temperatura <= -22) {\n        msg.whatsapp = baixa + w;\n        msg.payload = \"<h1>\" + baixa + p;\n        return [msg, null];\n    }\n    else\n        return [null, null];\n}\n",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1180,
        "y": 860,
        "wires": [
            [
                "255625de382c4be8",
                "0fe717e02c5ebc45"
            ],
            []
        ]
    },
    {
        "id": "255625de382c4be8",
        "type": "node-red-contrib-whatsapp-cmb-send-message",
        "z": "4f0d36b27ba46340",
        "name": "Whatsapp",
        "account": "b5b4b586aa40dcf0",
        "text": "whatsapp",
        "inputtypemessage": "msg",
        "rejectssl": false,
        "x": 1480,
        "y": 920,
        "wires": [
            [
                "d55b275fc3115109"
            ]
        ]
    },
    {
        "id": "d55b275fc3115109",
        "type": "debug",
        "z": "4f0d36b27ba46340",
        "name": "debug 57",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1640,
        "y": 920,
        "wires": []
    },
    {
        "id": "bb94bd9bbd33d2b5",
        "type": "function",
        "z": "4f0d36b27ba46340",
        "name": "Verifica Bateria",
        "func": "// Bateria\nvar recebido = msg.Bateria;\nvar porcento = ((recebido - 3.2) * 100) / 1;\nif (porcento > 100)\n    msg.Bateria = 100;\nelse\n    msg.Bateria = porcento;\n\nmsg.Bateria = msg.Bateria.toFixed(2);\n\nmsg.topic = \"ALERTA - Zona do Armazém - Sensor: \" + msg.Sensor;\nvar muito_baixa = \"ALERTA BATERIA MUITO BAIXA\";\nvar baixa = \"ALERTA BATERIA BAIXA\";\nvar whatsapp = \"%0A%0AZona: Armazém%0ASensor: \" + msg.Sensor + \"%0ABateria: \" + msg.Bateria + \" % %0A%0AVerifique o Equipamento.\";\nvar p = \"</h1><p>Bateria: \" + msg.Bateria + \"</p><p>Verifique o Equipamento!!!</p>\";\n\nif (msg.Bateria < 25) {\n    msg.whatsapp = muito_baixa + whatsapp;\n    msg.payload = \"<h1>\" + muito_baixa + p;\n    return [msg, null];\n}\nelse if (msg.Bateria > 25 && msg.Bateria < 30) {\n    msg.whatsapp = baixa + whatsapp;\n    msg.payload = \"<h1>\" + baixa + p;\n    return [msg, null];\n}\nelse\n    return [null, null];\n",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1160,
        "y": 920,
        "wires": [
            [
                "255625de382c4be8",
                "0fe717e02c5ebc45"
            ],
            []
        ]
    },
    {
        "id": "45e2d756e9327d75",
        "type": "switch",
        "z": "4f0d36b27ba46340",
        "name": "S / N",
        "property": "payload[0].Ativo",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "S",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "N",
                "vt": "str"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 930,
        "y": 880,
        "wires": [
            [
                "3dbfc11018623616",
                "bb94bd9bbd33d2b5"
            ],
            []
        ]
    },
    {
        "id": "29103b9bc199f951",
        "type": "function",
        "z": "4f0d36b27ba46340",
        "name": "Estado Sensor",
        "func": "msg.topic = \"SELECT Ativo FROM sensor where sensor_ID = '\" + msg.Sensor_ID + \"'\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 600,
        "y": 880,
        "wires": [
            [
                "4d53719694f5c9bd"
            ]
        ]
    },
    {
        "id": "4d53719694f5c9bd",
        "type": "mysql",
        "z": "4f0d36b27ba46340",
        "mydb": "9b6527f7.cad8b8",
        "name": "BDados",
        "x": 780,
        "y": 880,
        "wires": [
            [
                "45e2d756e9327d75"
            ]
        ]
    },
    {
        "id": "6c219f6fdf8877eb",
        "type": "function",
        "z": "4f0d36b27ba46340",
        "name": "Sensor - S / N",
        "func": "if (msg.Sensor == 1){\n    if(msg.Ativo === \"S\")\n        msg.label = \"Equipamento Ativo\";\n    else\n        msg.label = \"Equipamento Inativo\";\n    return [msg, null, null, null];\n}\nif (msg.Sensor == 2) {\n    if (msg.Ativo === \"S\")\n        msg.label1 = \"Equipamento Ativo\";\n    else\n        msg.label1 = \"Equipamento Inativo\";\n    return [null, msg, null, null];\n}\nif (msg.Sensor == 3) {\n    if (msg.Ativo === \"S\")\n        msg.label2 = \"Equipamento Ativo\";\n    else\n        msg.label2 = \"Equipamento Inativo\";\n    return [null, null, msg, null];\n} \nif (msg.Sensor == 4) {\n    if (msg.Ativo === \"S\")\n        msg.label3 = \"Equipamento Ativo\";\n    else\n        msg.label3 = \"Equipamento Inativo\";\n    return [null, null, null, msg];\n} \nreturn msg;",
        "outputs": 4,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 520,
        "y": 1680,
        "wires": [
            [
                "50149f1c0c61f31c"
            ],
            [
                "4763809d9d6cc788"
            ],
            [
                "6b75462dc538c1bc"
            ],
            [
                "2e34e6b5d3d6a228"
            ]
        ]
    },
    {
        "id": "84c26502824dcea2",
        "type": "mqtt in",
        "z": "91731f4ba480b30a",
        "name": "Sensor 1",
        "topic": "TFC/Esplanada/Sensor1",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "a22cb5334c925d0b",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 1540,
        "y": 480,
        "wires": [
            [
                "f5d6e6f3c52513a6"
            ]
        ]
    },
    {
        "id": "bea3251b9589d723",
        "type": "ui_gauge",
        "z": "91731f4ba480b30a",
        "name": "Esp_Sensor1",
        "group": "155ed888acecbf5d",
        "order": 4,
        "width": 3,
        "height": 2,
        "gtype": "gage",
        "title": "<i class=\"fa fa-thermometer-full\" aria-hidden=\"true\"></i> Temperatura ",
        "label": "Cº",
        "format": "{{msg.Temperatura}}",
        "min": "0",
        "max": "12",
        "colors": [
            "#ca3838",
            "#0dc50d",
            "#ca3838"
        ],
        "seg1": "2",
        "seg2": "10",
        "diff": false,
        "className": "",
        "x": 3100,
        "y": 120,
        "wires": [],
        "info": "{{msg.topic}}"
    },
    {
        "id": "282124d82232ed18",
        "type": "mqtt in",
        "z": "91731f4ba480b30a",
        "name": "Sensor 3",
        "topic": "TFC/Esplanada/Sensor3",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "a22cb5334c925d0b",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 1540,
        "y": 600,
        "wires": [
            [
                "f5d6e6f3c52513a6"
            ]
        ]
    },
    {
        "id": "2564263f133c8812",
        "type": "mqtt in",
        "z": "91731f4ba480b30a",
        "name": "Sensor 2",
        "topic": "TFC/Esplanada/Sensor2",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "a22cb5334c925d0b",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 1540,
        "y": 540,
        "wires": [
            [
                "f5d6e6f3c52513a6"
            ]
        ]
    },
    {
        "id": "11397dc902d15240",
        "type": "function",
        "z": "91731f4ba480b30a",
        "name": "Max e Min",
        "func": "msg.topic = \"SELECT maximo,minimo FROM equipamento where idtipo = '\" + msg.Tipo + \"'\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2050,
        "y": 600,
        "wires": [
            [
                "fff366ce796d8ddf"
            ]
        ]
    },
    {
        "id": "7c5df889f6398010",
        "type": "mysql",
        "z": "91731f4ba480b30a",
        "mydb": "9b6527f7.cad8b8",
        "name": "BDados",
        "x": 2220,
        "y": 860,
        "wires": [
            [
                "17470c5957cee0c3"
            ]
        ]
    },
    {
        "id": "fd79ea893edb5b17",
        "type": "function",
        "z": "91731f4ba480b30a",
        "name": "Gráficos",
        "func": "// Bateria\nvar recebido = msg.Bateria;\n//var porcento = 100 * (recebido - 1.1) / (4.2 - 1.1);\nvar porcento = ((recebido - 3.2) * 100) / 1;\nif (porcento > 100)\n    msg.Bateria = 100;\nelse\n    msg.Bateria = porcento;\n\nmsg.Bateria = msg.Bateria.toFixed(2);\nmsg.Temperatura = msg.Temperatura.toFixed(2);\nmsg.Volts = msg.Volts.toFixed(2);\n\nif (msg.Sensor == 1) {\n    msg.Sensor_Nome = \"Sensor 1 - \" + msg.Sensor_Nome;\n    msg.ui_control = {\n        \"id\": \"Esp_Sensor1\",\n        \"gtype\": \"gage\",\n        \"options\": {\n            \"min\": msg.payload[0].minimo,\n            \"max\": msg.payload[0].maximo,\n            \"colors\": [[202, 56, 56], [13, 197, 13], [202, 56, 56]]\n        }\n    }\n    msg.ui_control = {\n        \"id\": \"BAT_Sensor1\",\n        \"gtype\": \"gage\",\n        \"options\": {\n            \"colors\": [[202, 56, 56], [13, 197, 13], [202, 56, 56]]\n        }\n    }\n    \n    return [msg, null, null, null, null];;\n}\nif (msg.Sensor == 2) {\n    msg.Sensor_Nome = \"Sensor 2 - \" + msg.Sensor_Nome;\n    msg.ui_control = {\n        \"id\": \"Esp_Sensor2\",\n        \"gtype\": \"gage\",\n        \"options\": {\n            \"min\": msg.payload[0].minimo,\n            \"max\": msg.payload[0].maximo,\n            \"colors\": [[202, 56, 56], [13, 197, 13], [202, 56, 56]]\n        }\n    }\n    msg.ui_control = {\n        \"id\": \"BAT_Sensor2\",\n        \"gtype\": \"gage\",\n        \"options\": {\n            \"colors\": [[202, 56, 56], [13, 197, 13], [202, 56, 56]]\n        }\n    }\n    return [null, msg, null, null, null];\n}\nif (msg.Sensor == 3) {\n    msg.Sensor_Nome = \"Sensor 3 - \" + msg.Sensor_Nome;\n    msg.ui_control = {\n        \"id\": \"Esp_Sensor3\",\n        \"gtype\": \"gage\",\n        \"options\": {\n            \"min\": msg.payload[0].minimo,\n            \"max\": msg.payload[0].maximo,\n            \"colors\": [[202, 56, 56], [13, 197, 13], [202, 56, 56]]\n        }\n    }\n    msg.ui_control = {\n        \"id\": \"BAT_Sensor3\",\n        \"gtype\": \"gage\",\n        \"options\": {\n            \"colors\": [[202, 56, 56], [13, 197, 13], [202, 56, 56]]\n        }\n    }\n    return [null, null, msg, null, null];\n}\n\nif (msg.Sensor == 4) {\n    msg.Sensor_Nome = \"Sensor 4 - \" + msg.Sensor_Nome;\n    msg.ui_control = {\n        \"id\": \"Esp_Sensor4\",\n        \"gtype\": \"gage\",\n        \"options\": {\n            \"min\": msg.payload[0].minimo,\n            \"max\": msg.payload[0].maximo,\n            \"colors\": [[202, 56, 56], [13, 197, 13], [202, 56, 56]]\n        }\n    }\n    msg.ui_control = {\n        \"id\": \"BAT_Sensor4\",\n        \"gtype\": \"gage\",\n        \"options\": {\n            \"colors\": [[202, 56, 56], [13, 197, 13], [202, 56, 56]]\n        }\n    }\n    return [null, null, null, msg, null];\n}\n\nif (msg.Sensor == 5) {\n    msg.Sensor_Nome = \"Sensor 5 - \" + msg.Sensor_Nome;\n    msg.ui_control = {\n        \"id\": \"Esp_Sensor5\",\n        \"gtype\": \"gage\",\n        \"options\": {\n            \"min\": msg.payload[0].minimo,\n            \"max\": msg.payload[0].maximo,\n            \"colors\": [[202, 56, 56], [13, 197, 13], [202, 56, 56]]\n        }\n    }\n    msg.ui_control = {\n        \"id\": \"BAT_Sensor5\",\n        \"gtype\": \"gage\",\n        \"options\": {\n            \"colors\": [[202, 56, 56], [13, 197, 13], [202, 56, 56]]\n        }\n    }\n    return [null, null, null, null, msg];\n}",
        "outputs": 5,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2560,
        "y": 600,
        "wires": [
            [
                "bea3251b9589d723",
                "4ac0270e32d6aedf",
                "ca4d5c968dadafc7",
                "b91d17c87df9909b"
            ],
            [
                "b87c1d6a909d2d76",
                "1fc1675f01f063fb",
                "f09d04059bcbeee4",
                "c4094ca23a20a3bf"
            ],
            [
                "e5a702f5454628af",
                "d3d44174de1e9368",
                "4be2b12a36265c8b",
                "04c1b1316304f21d"
            ],
            [
                "3e783f2148bc2654",
                "607f7c39f693ea14",
                "2e606723a281e6a4",
                "520f4b2c665a1d57"
            ],
            [
                "7d08a2f896a94476",
                "04333cd4ab48998c",
                "afc02b5843165f5d",
                "e79733552cbb3d59"
            ]
        ]
    },
    {
        "id": "8ca93ad7ad4073bd",
        "type": "function",
        "z": "91731f4ba480b30a",
        "name": "Inserir Registo",
        "func": "var zona = 4;\nvar words = msg.topic.split(\"/\");\nvar date = new Date();\nvar hour = date.getHours();\nhour = hour + 1;\ndate.setHours(hour);\n\nmsg.topic = \"INSERT INTO registos (zona, sensor, temperatura, bateria, data, ativo) \" +\n    \" VALUES (\" + zona + \",'\" + msg.payload.Sensor_ID + \"', \"+msg.payload.Temperatura + \", \"+ msg.payload.Bateria + \", now(), '\" + msg.Ativo + \"')\";\nmsg.Zonas = words[1];\nmsg.Sensor = words[2].slice(-1);\nmsg.Data = date;\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2020,
        "y": 860,
        "wires": [
            [
                "7c5df889f6398010"
            ]
        ]
    },
    {
        "id": "b87c1d6a909d2d76",
        "type": "ui_gauge",
        "z": "91731f4ba480b30a",
        "name": "Esp_Sensor2",
        "group": "64574ae0ae410483",
        "order": 4,
        "width": 3,
        "height": 2,
        "gtype": "gage",
        "title": "<i class=\"fa fa-thermometer-full\" aria-hidden=\"true\"></i> Temperatura ",
        "label": "Cº",
        "format": "{{msg.Temperatura}}",
        "min": "0",
        "max": "12",
        "colors": [
            "#ca3838",
            "#0dc50d",
            "#ca3838"
        ],
        "seg1": "2",
        "seg2": "10",
        "diff": false,
        "className": "",
        "x": 3100,
        "y": 300,
        "wires": []
    },
    {
        "id": "e5a702f5454628af",
        "type": "ui_gauge",
        "z": "91731f4ba480b30a",
        "name": "Esp_Sensor3",
        "group": "0ad7ea62b52c2f50",
        "order": 4,
        "width": 3,
        "height": 2,
        "gtype": "gage",
        "title": "<i class=\"fa fa-thermometer-full\" aria-hidden=\"true\"></i> Temperatura ",
        "label": "Cº",
        "format": "{{msg.Temperatura}}",
        "min": "0",
        "max": "12",
        "colors": [
            "#ca3838",
            "#0dc50d",
            "#ca3838"
        ],
        "seg1": "2",
        "seg2": "10",
        "diff": false,
        "className": "",
        "x": 3100,
        "y": 480,
        "wires": []
    },
    {
        "id": "4ac0270e32d6aedf",
        "type": "ui_text",
        "z": "91731f4ba480b30a",
        "group": "155ed888acecbf5d",
        "order": 1,
        "width": 7,
        "height": 1,
        "name": "Sensor 1",
        "label": "",
        "format": "<font size = 4 font color =royalblue>{{msg.Sensor_Nome}}",
        "layout": "row-left",
        "className": "",
        "x": 3080,
        "y": 160,
        "wires": []
    },
    {
        "id": "d3d44174de1e9368",
        "type": "ui_text",
        "z": "91731f4ba480b30a",
        "group": "0ad7ea62b52c2f50",
        "order": 1,
        "width": 7,
        "height": 1,
        "name": "Sensor 3",
        "label": "",
        "format": "<font size = 4 font color =royalblue>{{msg.Sensor_Nome}}",
        "layout": "row-left",
        "className": "",
        "x": 3080,
        "y": 520,
        "wires": []
    },
    {
        "id": "ca4d5c968dadafc7",
        "type": "ui_text",
        "z": "91731f4ba480b30a",
        "group": "155ed888acecbf5d",
        "order": 3,
        "width": 3,
        "height": 1,
        "name": "",
        "label": "Volts:",
        "format": "{{msg.Volts}}",
        "layout": "row-spread",
        "className": "",
        "x": 3070,
        "y": 240,
        "wires": []
    },
    {
        "id": "1fc1675f01f063fb",
        "type": "ui_text",
        "z": "91731f4ba480b30a",
        "group": "64574ae0ae410483",
        "order": 1,
        "width": 7,
        "height": 1,
        "name": "Sensor 2",
        "label": "",
        "format": "<font size = 4 font color =royalblue>{{msg.Sensor_Nome}}",
        "layout": "row-left",
        "className": "",
        "x": 3080,
        "y": 340,
        "wires": []
    },
    {
        "id": "4be2b12a36265c8b",
        "type": "ui_text",
        "z": "91731f4ba480b30a",
        "group": "0ad7ea62b52c2f50",
        "order": 3,
        "width": 3,
        "height": 1,
        "name": "",
        "label": "Volts:",
        "format": "{{msg.Volts}}",
        "layout": "row-spread",
        "className": "",
        "x": 3070,
        "y": 600,
        "wires": []
    },
    {
        "id": "f09d04059bcbeee4",
        "type": "ui_text",
        "z": "91731f4ba480b30a",
        "group": "64574ae0ae410483",
        "order": 3,
        "width": 3,
        "height": 1,
        "name": "",
        "label": "Volts:",
        "format": "{{msg.Volts}}",
        "layout": "row-spread",
        "className": "",
        "x": 3070,
        "y": 420,
        "wires": []
    },
    {
        "id": "fff366ce796d8ddf",
        "type": "mysql",
        "z": "91731f4ba480b30a",
        "mydb": "9b6527f7.cad8b8",
        "name": "BDados",
        "x": 2280,
        "y": 600,
        "wires": [
            [
                "fd79ea893edb5b17"
            ]
        ]
    },
    {
        "id": "78a9d749d384278d",
        "type": "ui_text",
        "z": "91731f4ba480b30a",
        "group": "64574ae0ae410483",
        "order": 9,
        "width": 7,
        "height": 1,
        "name": "Data_Sensor_2",
        "label": "Última Leitura",
        "format": "{{msg.Data}}",
        "layout": "row-spread",
        "className": "",
        "x": 2680,
        "y": 820,
        "wires": []
    },
    {
        "id": "17470c5957cee0c3",
        "type": "function",
        "z": "91731f4ba480b30a",
        "name": "Ultima Leitura",
        "func": "var d = msg.Data.toISOString();\nd = d.replace(\"T\", \" \");\nd = d.slice(0, d.length - 5);\nmsg.Data = d;\n\nif (msg.Sensor == 1) {    return [msg, null, null, null, null];}\nif (msg.Sensor == 2) {    return [null, msg, null, null, null];}\nif (msg.Sensor == 3) {    return [null, null, msg, null, null];}\nif (msg.Sensor == 4) {    return [null, null, null, msg, null];}\nif (msg.Sensor == 5) {    return [null, null, null, null, msg];}",
        "outputs": 5,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2420,
        "y": 860,
        "wires": [
            [
                "a14e68af6f224f31"
            ],
            [
                "78a9d749d384278d"
            ],
            [
                "f18194133cf08a44"
            ],
            [
                "1a7bb8339f54b953"
            ],
            [
                "7c4e1518ac0f6fe7"
            ]
        ]
    },
    {
        "id": "a14e68af6f224f31",
        "type": "ui_text",
        "z": "91731f4ba480b30a",
        "group": "155ed888acecbf5d",
        "order": 9,
        "width": 7,
        "height": 1,
        "name": "Data_Sensor_1",
        "label": "Última Leitura",
        "format": "{{msg.Data}}",
        "layout": "row-spread",
        "className": "",
        "x": 2680,
        "y": 780,
        "wires": []
    },
    {
        "id": "f18194133cf08a44",
        "type": "ui_text",
        "z": "91731f4ba480b30a",
        "group": "0ad7ea62b52c2f50",
        "order": 9,
        "width": 7,
        "height": 1,
        "name": "Data_Sensor_3",
        "label": "Última Leitura",
        "format": "{{msg.Data}}",
        "layout": "row-spread",
        "className": "",
        "x": 2680,
        "y": 860,
        "wires": []
    },
    {
        "id": "f73d81ac5a061e1b",
        "type": "function",
        "z": "91731f4ba480b30a",
        "name": "SQL 24Horas",
        "func": "msg.topic = \"SELECT temperatura, data FROM registos where sensor = '\" + msg.Sensor_ID + \"' ORDER BY data DESC limit 24\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2020,
        "y": 160,
        "wires": [
            [
                "b0056accb0e68746"
            ]
        ]
    },
    {
        "id": "b0056accb0e68746",
        "type": "mysql",
        "z": "91731f4ba480b30a",
        "mydb": "9b6527f7.cad8b8",
        "name": "BDados",
        "x": 2240,
        "y": 160,
        "wires": [
            [
                "43a3f0660fe5ccc4"
            ]
        ]
    },
    {
        "id": "e8afacb2708f4b6d",
        "type": "ui_chart",
        "z": "91731f4ba480b30a",
        "name": "Leitura Sensor 2",
        "group": "64574ae0ae410483",
        "order": 8,
        "width": 7,
        "height": 4,
        "label": "Histórico",
        "chartType": "line",
        "legend": "false",
        "xformat": "dd HH:mm",
        "interpolate": "linear",
        "nodata": "Sem Registos ainda!!!",
        "dot": true,
        "ymin": "0",
        "ymax": "12",
        "removeOlder": "24",
        "removeOlderPoints": "24",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": true,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#24c224",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 2680,
        "y": 120,
        "wires": [
            []
        ]
    },
    {
        "id": "f5d6e6f3c52513a6",
        "type": "function",
        "z": "91731f4ba480b30a",
        "name": "Variaveis",
        "func": "var words = msg.topic.split(\"/\");\nmsg.Zona = words[1];\nmsg.Sensor = words[2].slice(-1);\nmsg.Tipo = msg.payload.Tipo;\nmsg.Ativo = msg.payload.Ativo;\nmsg.Sensor_ID = msg.payload.Sensor_ID;\nmsg.Temperatura = msg.payload.Temperatura;\nmsg.Bateria = msg.payload.Bateria;\nmsg.Versao = msg.payload.VERSAO;\nmsg.Volts = msg.payload.Bateria;\nmsg.ESP_IP = msg.payload.ESP_IP;\nmsg.Var_Payload = msg.payload;\nmsg.Var_Topic = msg.topic;\nmsg.Sensor_Nome = msg.payload.Nome;\nmsg.Wifi = msg.payload.WIFI;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1740,
        "y": 600,
        "wires": [
            [
                "11397dc902d15240",
                "f73d81ac5a061e1b",
                "21a42062f6ed75fd",
                "2c2ae6d9e0a4807b",
                "8ca93ad7ad4073bd",
                "b4868c8fddc8c9c5"
            ]
        ]
    },
    {
        "id": "43a3f0660fe5ccc4",
        "type": "function",
        "z": "91731f4ba480b30a",
        "name": "function 7",
        "func": "var data = [];\nvar series = [\"Temperatura\"];\nvar labels = [\"\"];\nvar i, len, string;\n\nif (msg.Sensor == 1) {\n    for (i = 0, len = msg.payload.length, string = \"\"; i < len; i++) {\n        data.push({ \"x\": Date.parse(msg.payload[i].data), \"y\": Number(msg.payload[i].temperatura) });\n    }\n\n    data = [data];\n    msg.payload = [{ series, data, labels }];\n    return [msg, null, null, null, null];\n}\nif (msg.Sensor == 2) {\n    for (i = 0, len = msg.payload.length, string = \"\"; i < len; i++) {\n        data.push({ \"x\": Date.parse(msg.payload[i].data), \"y\": Number(msg.payload[i].temperatura) });\n    }\n\n    data = [data];\n    msg.payload = [{ series, data, labels }];\n    return [null, msg, null, null, null];\n}\nif (msg.Sensor == 3) {\n    for (i = 0, len = msg.payload.length, string = \"\"; i < len; i++) {\n        data.push({ \"x\": Date.parse(msg.payload[i].data), \"y\": Number(msg.payload[i].temperatura) });\n    }\n\n    data = [data];\n    msg.payload = [{ series, data, labels }];\n    return [null, null, msg, null, null];\n}\nif (msg.Sensor == 4) {\n    for (i = 0, len = msg.payload.length, string = \"\"; i < len; i++) {\n        data.push({ \"x\": Date.parse(msg.payload[i].data), \"y\": Number(msg.payload[i].temperatura) });\n    }\n\n    data = [data];\n    msg.payload = [{ series, data, labels }];\n    return [null, null, null, msg, null];\n}\nif (msg.Sensor == 5) {\n    for (i = 0, len = msg.payload.length, string = \"\"; i < len; i++) {\n        data.push({ \"x\": Date.parse(msg.payload[i].data), \"y\": Number(msg.payload[i].temperatura) });\n    }\n\n    data = [data];\n    msg.payload = [{ series, data, labels }];\n    return [null, null, null, null, msg];\n}",
        "outputs": 5,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2440,
        "y": 160,
        "wires": [
            [
                "cc3028a6d8b49502"
            ],
            [
                "e8afacb2708f4b6d"
            ],
            [
                "fa9d9537d0063a36"
            ],
            [
                "243ef01484c4408e"
            ],
            [
                "7292edaf1c27c215"
            ]
        ]
    },
    {
        "id": "cc3028a6d8b49502",
        "type": "ui_chart",
        "z": "91731f4ba480b30a",
        "name": "Leitura Sensor 1",
        "group": "155ed888acecbf5d",
        "order": 8,
        "width": 7,
        "height": 4,
        "label": "Histórico",
        "chartType": "line",
        "legend": "false",
        "xformat": "dd HH:mm",
        "interpolate": "linear",
        "nodata": "Sem Registos ainda!!!",
        "dot": true,
        "ymin": "0",
        "ymax": "12",
        "removeOlder": "24",
        "removeOlderPoints": "24",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#40eb1e",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 2680,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "fa9d9537d0063a36",
        "type": "ui_chart",
        "z": "91731f4ba480b30a",
        "name": "Leitura Sensor 3",
        "group": "0ad7ea62b52c2f50",
        "order": 8,
        "width": 7,
        "height": 4,
        "label": "Histórico",
        "chartType": "line",
        "legend": "false",
        "xformat": "dd HH:mm",
        "interpolate": "linear",
        "nodata": "Sem Registos ainda!!!",
        "dot": true,
        "ymin": "0",
        "ymax": "12",
        "removeOlder": "24",
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 2680,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "3747d40d2a2a63c0",
        "type": "catch",
        "z": "91731f4ba480b30a",
        "name": "",
        "scope": [
            "a6754513e29925fc"
        ],
        "uncaught": false,
        "x": 1490,
        "y": 980,
        "wires": [
            [
                "730536a24a8dac7e"
            ]
        ]
    },
    {
        "id": "730536a24a8dac7e",
        "type": "debug",
        "z": "91731f4ba480b30a",
        "name": "debug 33",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1640,
        "y": 980,
        "wires": []
    },
    {
        "id": "110828b43e87a0f4",
        "type": "mqtt in",
        "z": "91731f4ba480b30a",
        "name": "Sensor 4",
        "topic": "TFC/Esplanada/Sensor4",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "a22cb5334c925d0b",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 1540,
        "y": 660,
        "wires": [
            [
                "f5d6e6f3c52513a6"
            ]
        ]
    },
    {
        "id": "3e783f2148bc2654",
        "type": "ui_gauge",
        "z": "91731f4ba480b30a",
        "name": "Esp_Sensor4",
        "group": "027aafb04853fa75",
        "order": 4,
        "width": 3,
        "height": 2,
        "gtype": "gage",
        "title": "<i class=\"fa fa-thermometer-full\" aria-hidden=\"true\"></i> Temperatura ",
        "label": "Cº",
        "format": "{{msg.Temperatura}}",
        "min": "-25",
        "max": "-5",
        "colors": [
            "#ca3838",
            "#0dc50d",
            "#ca3838"
        ],
        "seg1": "-22",
        "seg2": "-10",
        "diff": false,
        "className": "",
        "x": 3100,
        "y": 680,
        "wires": []
    },
    {
        "id": "607f7c39f693ea14",
        "type": "ui_text",
        "z": "91731f4ba480b30a",
        "group": "027aafb04853fa75",
        "order": 1,
        "width": 7,
        "height": 1,
        "name": "Sensor 4",
        "label": "",
        "format": "<font size = 4 font color =royalblue>{{msg.Sensor_Nome}}",
        "layout": "row-left",
        "className": "",
        "x": 3080,
        "y": 720,
        "wires": []
    },
    {
        "id": "2e606723a281e6a4",
        "type": "ui_text",
        "z": "91731f4ba480b30a",
        "group": "027aafb04853fa75",
        "order": 3,
        "width": 3,
        "height": 1,
        "name": "",
        "label": "Volts:",
        "format": "{{msg.Volts}}",
        "layout": "row-spread",
        "className": "",
        "x": 3070,
        "y": 800,
        "wires": []
    },
    {
        "id": "1a7bb8339f54b953",
        "type": "ui_text",
        "z": "91731f4ba480b30a",
        "group": "027aafb04853fa75",
        "order": 9,
        "width": 7,
        "height": 1,
        "name": "Data_Sensor_4",
        "label": "Última Leitura",
        "format": "{{msg.Data}}",
        "layout": "row-spread",
        "className": "",
        "x": 2680,
        "y": 900,
        "wires": []
    },
    {
        "id": "243ef01484c4408e",
        "type": "ui_chart",
        "z": "91731f4ba480b30a",
        "name": "Leitura Sensor 4",
        "group": "027aafb04853fa75",
        "order": 8,
        "width": 7,
        "height": 4,
        "label": "Histórico",
        "chartType": "line",
        "legend": "false",
        "xformat": "dd HH:mm",
        "interpolate": "linear",
        "nodata": "Sem Registos ainda!!!",
        "dot": true,
        "ymin": "-22",
        "ymax": "-10",
        "removeOlder": "24",
        "removeOlderPoints": "24",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 2680,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "b91d17c87df9909b",
        "type": "ui_gauge",
        "z": "91731f4ba480b30a",
        "name": "BAT_Sensor1",
        "group": "155ed888acecbf5d",
        "order": 6,
        "width": 3,
        "height": 2,
        "gtype": "gage",
        "title": "Bateria",
        "label": "%",
        "format": "{{msg.Bateria}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#ca3838",
            "#e6e600",
            "#0dc50d"
        ],
        "seg1": "30",
        "seg2": "50",
        "diff": false,
        "className": "",
        "x": 3100,
        "y": 200,
        "wires": []
    },
    {
        "id": "c4094ca23a20a3bf",
        "type": "ui_gauge",
        "z": "91731f4ba480b30a",
        "name": "BAT_Sensor2",
        "group": "64574ae0ae410483",
        "order": 6,
        "width": 3,
        "height": 2,
        "gtype": "gage",
        "title": "Bateria",
        "label": "%",
        "format": "{{msg.Bateria}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#ca3838",
            "#e6e600",
            "#0dc50d"
        ],
        "seg1": "30",
        "seg2": "50",
        "diff": false,
        "className": "",
        "x": 3100,
        "y": 380,
        "wires": []
    },
    {
        "id": "04c1b1316304f21d",
        "type": "ui_gauge",
        "z": "91731f4ba480b30a",
        "name": "BAT_Sensor3",
        "group": "0ad7ea62b52c2f50",
        "order": 6,
        "width": 3,
        "height": 2,
        "gtype": "gage",
        "title": "Bateria",
        "label": "%",
        "format": "{{msg.Bateria}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#ca3838",
            "#e6e600",
            "#0dc50d"
        ],
        "seg1": "30",
        "seg2": "50",
        "diff": false,
        "className": "",
        "x": 3100,
        "y": 560,
        "wires": []
    },
    {
        "id": "520f4b2c665a1d57",
        "type": "ui_gauge",
        "z": "91731f4ba480b30a",
        "name": "BAT_Sensor4",
        "group": "027aafb04853fa75",
        "order": 6,
        "width": 3,
        "height": 2,
        "gtype": "gage",
        "title": "Bateria",
        "label": "%",
        "format": "{{msg.Bateria}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#ca3838",
            "#e6e600",
            "#0dc50d"
        ],
        "seg1": "30",
        "seg2": "50",
        "diff": false,
        "className": "",
        "x": 3100,
        "y": 760,
        "wires": []
    },
    {
        "id": "5785e9f3c21f7fdd",
        "type": "mqtt in",
        "z": "91731f4ba480b30a",
        "name": "Sensor 5",
        "topic": "TFC/Esplanada/Sensor5",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "a22cb5334c925d0b",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 1540,
        "y": 720,
        "wires": [
            [
                "f5d6e6f3c52513a6"
            ]
        ]
    },
    {
        "id": "e79733552cbb3d59",
        "type": "ui_gauge",
        "z": "91731f4ba480b30a",
        "name": "Esp_Sensor5",
        "group": "72c10720b3a93ebf",
        "order": 4,
        "width": 3,
        "height": 2,
        "gtype": "gage",
        "title": "<i class=\"fa fa-thermometer-full\" aria-hidden=\"true\"></i> Temperatura ",
        "label": "Cº",
        "format": "{{msg.Temperatura}}",
        "min": "0",
        "max": "12",
        "colors": [
            "#ca3838",
            "#0dc50d",
            "#ca3838"
        ],
        "seg1": "2",
        "seg2": "10",
        "diff": false,
        "className": "",
        "x": 3100,
        "y": 860,
        "wires": []
    },
    {
        "id": "04333cd4ab48998c",
        "type": "ui_text",
        "z": "91731f4ba480b30a",
        "group": "72c10720b3a93ebf",
        "order": 1,
        "width": 7,
        "height": 1,
        "name": "Sensor 5",
        "label": "",
        "format": "<font size = 4 font color =royalblue>{{msg.Sensor_Nome}}",
        "layout": "row-left",
        "className": "",
        "x": 3080,
        "y": 900,
        "wires": []
    },
    {
        "id": "afc02b5843165f5d",
        "type": "ui_text",
        "z": "91731f4ba480b30a",
        "group": "72c10720b3a93ebf",
        "order": 3,
        "width": 3,
        "height": 1,
        "name": "",
        "label": "Volts:",
        "format": "{{msg.Volts}}",
        "layout": "row-spread",
        "className": "",
        "x": 3070,
        "y": 980,
        "wires": []
    },
    {
        "id": "7c4e1518ac0f6fe7",
        "type": "ui_text",
        "z": "91731f4ba480b30a",
        "group": "72c10720b3a93ebf",
        "order": 9,
        "width": 7,
        "height": 1,
        "name": "Data_Sensor_5",
        "label": "Última Leitura",
        "format": "{{msg.Data}}",
        "layout": "row-spread",
        "className": "",
        "x": 2680,
        "y": 940,
        "wires": []
    },
    {
        "id": "7292edaf1c27c215",
        "type": "ui_chart",
        "z": "91731f4ba480b30a",
        "name": "Leitura Sensor 5",
        "group": "72c10720b3a93ebf",
        "order": 8,
        "width": 7,
        "height": 4,
        "label": "Histórico",
        "chartType": "line",
        "legend": "false",
        "xformat": "dd HH:mm",
        "interpolate": "linear",
        "nodata": "Sem Registos ainda!!!",
        "dot": true,
        "ymin": "0",
        "ymax": "12",
        "removeOlder": "24",
        "removeOlderPoints": "24",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 2680,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "7d08a2f896a94476",
        "type": "ui_gauge",
        "z": "91731f4ba480b30a",
        "name": "BAT_Sensor5",
        "group": "72c10720b3a93ebf",
        "order": 6,
        "width": 3,
        "height": 2,
        "gtype": "gage",
        "title": "Bateria",
        "label": "%",
        "format": "{{msg.Bateria}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#ca3838",
            "#e6e600",
            "#0dc50d"
        ],
        "seg1": "30",
        "seg2": "50",
        "diff": false,
        "className": "",
        "x": 3100,
        "y": 940,
        "wires": []
    },
    {
        "id": "21a42062f6ed75fd",
        "type": "function",
        "z": "91731f4ba480b30a",
        "name": "Sinal Wifi",
        "func": "if (msg.Wifi >= -50) { \n    msg.Sinal = \"Forte\";\n}\nelse if (msg.Wifi < -50 && msg.Wifi > -60) {\n    msg.Sinal = \"Bom\";\n}\nelse if (msg.Wifi <= -61 && msg.Wifi > -75) {\n    msg.Sinal = \"Suficiente\";\n}\nelse if (msg.Wifi <= -76){\n    msg.Sinal = \"Mau\";\n}\n\nif (msg.Sensor == 1) { return [msg, null, null, null, null]; }\nif (msg.Sensor == 2) { return [null, msg, null, null, null]; }\nif (msg.Sensor == 3) { return [null, null, msg, null, null]; }\nif (msg.Sensor == 4) { return [null, null, null, msg, null]; }\nif (msg.Sensor == 5) { return [null, null, null, null, msg]; }",
        "outputs": 5,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2060,
        "y": 380,
        "wires": [
            [
                "b33beb7d028ecc06"
            ],
            [
                "0a83db5bd659e44b"
            ],
            [
                "aedb80445ba917d9"
            ],
            [
                "fecc8410f77a081f"
            ],
            [
                "c74e23ae43ac4226"
            ]
        ]
    },
    {
        "id": "b33beb7d028ecc06",
        "type": "ui_text",
        "z": "91731f4ba480b30a",
        "group": "155ed888acecbf5d",
        "order": 2,
        "width": 4,
        "height": 1,
        "name": "Sinal_AS1",
        "label": "Sinal Wifi:",
        "format": "{{msg.Sinal}}",
        "layout": "row-spread",
        "className": "",
        "x": 2290,
        "y": 300,
        "wires": []
    },
    {
        "id": "0a83db5bd659e44b",
        "type": "ui_text",
        "z": "91731f4ba480b30a",
        "group": "64574ae0ae410483",
        "order": 2,
        "width": 4,
        "height": 1,
        "name": "Sinal_AS2",
        "label": "Sinal Wifi:",
        "format": "{{msg.Sinal}}",
        "layout": "row-spread",
        "className": "",
        "x": 2290,
        "y": 340,
        "wires": []
    },
    {
        "id": "aedb80445ba917d9",
        "type": "ui_text",
        "z": "91731f4ba480b30a",
        "group": "0ad7ea62b52c2f50",
        "order": 2,
        "width": 4,
        "height": 1,
        "name": "Sinal_AS3",
        "label": "Sinal Wifi:",
        "format": "{{msg.Sinal}}",
        "layout": "row-spread",
        "className": "",
        "x": 2290,
        "y": 380,
        "wires": []
    },
    {
        "id": "fecc8410f77a081f",
        "type": "ui_text",
        "z": "91731f4ba480b30a",
        "group": "027aafb04853fa75",
        "order": 2,
        "width": 4,
        "height": 1,
        "name": "Sinal_AS4",
        "label": "Sinal Wifi:",
        "format": "{{msg.Sinal}}",
        "layout": "row-spread",
        "className": "p2",
        "x": 2290,
        "y": 420,
        "wires": []
    },
    {
        "id": "c74e23ae43ac4226",
        "type": "ui_text",
        "z": "91731f4ba480b30a",
        "group": "72c10720b3a93ebf",
        "order": 2,
        "width": 4,
        "height": 1,
        "name": "Sinal_AS5",
        "label": "Sinal Wifi:",
        "format": "{{msg.Sinal}}",
        "layout": "row-spread",
        "className": "",
        "x": 2290,
        "y": 460,
        "wires": []
    },
    {
        "id": "398ce5bc958cb715",
        "type": "mqtt out",
        "z": "91731f4ba480b30a",
        "name": "Sensor 2",
        "topic": "TFC/Esplanada/Sensor2/S2",
        "qos": "2",
        "retain": "true",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "a22cb5334c925d0b",
        "x": 2440,
        "y": 1720,
        "wires": []
    },
    {
        "id": "3077e92079f2ce03",
        "type": "mqtt out",
        "z": "91731f4ba480b30a",
        "name": "Sensor 1",
        "topic": "TFC/Esplanada/Sensor1/S1",
        "qos": "2",
        "retain": "true",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "a22cb5334c925d0b",
        "x": 2440,
        "y": 1520,
        "wires": []
    },
    {
        "id": "804f0dfdd3d7e5f7",
        "type": "mqtt out",
        "z": "91731f4ba480b30a",
        "name": "Sensor 3",
        "topic": "TFC/Esplanada/Sensor3/S3",
        "qos": "2",
        "retain": "true",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "a22cb5334c925d0b",
        "x": 2440,
        "y": 1960,
        "wires": []
    },
    {
        "id": "bcc8c8c53c472a3f",
        "type": "switch",
        "z": "91731f4ba480b30a",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "ativar",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "avaria",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "carregar",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "desativar",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 4,
        "x": 2410,
        "y": 1420,
        "wires": [
            [
                "6412ecd558f62143"
            ],
            [
                "bfc0a083b1b96d45"
            ],
            [
                "391d7f78244db68d"
            ],
            [
                "acb2647ab607ccb1"
            ]
        ]
    },
    {
        "id": "bfc0a083b1b96d45",
        "type": "change",
        "z": "91731f4ba480b30a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "label",
                "pt": "msg",
                "to": "Equipamento Avariado",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2610,
        "y": 1400,
        "wires": [
            [
                "f4336ae46874df26"
            ]
        ]
    },
    {
        "id": "391d7f78244db68d",
        "type": "change",
        "z": "91731f4ba480b30a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "label",
                "pt": "msg",
                "to": "Sensor a Carregar",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2610,
        "y": 1440,
        "wires": [
            [
                "f4336ae46874df26"
            ]
        ]
    },
    {
        "id": "f4336ae46874df26",
        "type": "ui_text",
        "z": "91731f4ba480b30a",
        "group": "155ed888acecbf5d",
        "order": 13,
        "width": 6,
        "height": 1,
        "name": "S_L_1",
        "label": "",
        "format": "<font size = 4 font color =royalblue>{{msg.label}}",
        "layout": "row-left",
        "className": "",
        "x": 2830,
        "y": 1360,
        "wires": []
    },
    {
        "id": "eaa6db3d0cb5f9b0",
        "type": "ui_text",
        "z": "91731f4ba480b30a",
        "group": "64574ae0ae410483",
        "order": 13,
        "width": 6,
        "height": 1,
        "name": "S_L_2",
        "label": "",
        "format": "<font size = 4 font color =royalblue>{{msg.label1}}",
        "layout": "row-left",
        "className": "",
        "x": 2830,
        "y": 1580,
        "wires": []
    },
    {
        "id": "2974a0136767e844",
        "type": "ui_text",
        "z": "91731f4ba480b30a",
        "group": "0ad7ea62b52c2f50",
        "order": 13,
        "width": 6,
        "height": 1,
        "name": "S_L_3",
        "label": "",
        "format": "<font size = 4 font color =royalblue>{{msg.label2}}",
        "layout": "row-left",
        "className": "",
        "x": 2810,
        "y": 1820,
        "wires": []
    },
    {
        "id": "27c21ed76042cf7c",
        "type": "mqtt out",
        "z": "91731f4ba480b30a",
        "name": "Sensor 4",
        "topic": "TFC/Esplanada/Sensor4/S4",
        "qos": "2",
        "retain": "true",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "a22cb5334c925d0b",
        "x": 2440,
        "y": 2200,
        "wires": []
    },
    {
        "id": "6837c970b761f2f1",
        "type": "ui_text",
        "z": "91731f4ba480b30a",
        "group": "027aafb04853fa75",
        "order": 13,
        "width": 6,
        "height": 1,
        "name": "S_L_4",
        "label": "",
        "format": "<font size = 4 font color =royalblue>{{msg.label3}}",
        "layout": "row-left",
        "className": "",
        "x": 2810,
        "y": 2060,
        "wires": []
    },
    {
        "id": "0866bf17ac466afa",
        "type": "function",
        "z": "91731f4ba480b30a",
        "name": "Update Sensor",
        "func": "if (msg.Sensor == 1) {\n    msg.payload == true ? msg.Ativo = \"S\" : msg.Ativo = \"N\";\n}\nelse if (msg.Sensor == 2) {\n    msg.payload == true ? msg.Ativo = \"S\" : msg.Ativo = \"N\";\n}\nelse if (msg.Sensor == 3) {\n    msg.payload == true ? msg.Ativo = \"S\" : msg.Ativo = \"N\";\n}\nelse if (msg.Sensor == 4) {\n    msg.payload == true ? msg.Ativo = \"S\" : msg.Ativo = \"N\";\n}\nelse if (msg.Sensor == 5) {\n    msg.payload == true ? msg.Ativo = \"S\" : msg.Ativo = \"N\";\n}\nmsg.topic = \"UPDATE sensor SET Ativo='\"+ msg.Ativo +\"' where sensor_n=\"+ msg.Sensor +\" and zona=4\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3040,
        "y": 1780,
        "wires": [
            [
                "550dc66835c799b6"
            ]
        ]
    },
    {
        "id": "550dc66835c799b6",
        "type": "mysql",
        "z": "91731f4ba480b30a",
        "mydb": "9b6527f7.cad8b8",
        "name": "BDados",
        "x": 3240,
        "y": 1800,
        "wires": [
            []
        ]
    },
    {
        "id": "a678f25ef9a7074e",
        "type": "ui_button",
        "z": "91731f4ba480b30a",
        "name": "",
        "group": "155ed888acecbf5d",
        "order": 10,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "Ativar",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "check",
        "payload": "ativar",
        "payloadType": "str",
        "topic": "ativar",
        "topicType": "msg",
        "x": 1710,
        "y": 1520,
        "wires": [
            [
                "bcc8c8c53c472a3f",
                "ce66a08c9729d996"
            ]
        ]
    },
    {
        "id": "c761b7ef99e7c519",
        "type": "ui_button",
        "z": "91731f4ba480b30a",
        "name": "",
        "group": "155ed888acecbf5d",
        "order": 12,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "Desativar",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "fa-ban",
        "payload": "desativar",
        "payloadType": "str",
        "topic": "",
        "topicType": "str",
        "x": 1720,
        "y": 1420,
        "wires": [
            [
                "1e06b4a6ed9f1eae"
            ]
        ]
    },
    {
        "id": "1e06b4a6ed9f1eae",
        "type": "change",
        "z": "91731f4ba480b30a",
        "name": "XY",
        "rules": [
            {
                "t": "set",
                "p": "position.x",
                "pt": "msg",
                "to": "event.bbox[2]-150",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "position.y",
                "pt": "msg",
                "to": "event.bbox[3]+40",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1890,
        "y": 1420,
        "wires": [
            [
                "ec6234ad67bd7b20"
            ]
        ]
    },
    {
        "id": "ec6234ad67bd7b20",
        "type": "ui_context_menu",
        "z": "91731f4ba480b30a",
        "group": "155ed888acecbf5d",
        "order": 15,
        "width": 0,
        "height": 0,
        "fontSize": 16,
        "inputPositionXField": "position.x",
        "inputPositionXType": "msg",
        "inputPositionYField": "position.y",
        "inputPositionYType": "msg",
        "outputField": "payload",
        "inputMenuField": "",
        "inputMenuType": "fixed",
        "menuItems": [
            {
                "id": "motivo",
                "icon": "",
                "label": "Motivo",
                "topic": "",
                "payload": "",
                "payloadType": "str",
                "visible": true,
                "enabled": false
            },
            {
                "id": "avaria",
                "icon": "fa-wrench",
                "label": "Avaria",
                "topic": "avaria",
                "payload": "avaria",
                "payloadType": "str",
                "visible": true,
                "enabled": true
            },
            {
                "id": "carregar",
                "icon": "fa-battery-1",
                "label": "Carregar Bateria",
                "topic": "carregar",
                "payload": "carregar",
                "payloadType": "str",
                "visible": true,
                "enabled": true
            },
            {
                "id": "desativar",
                "icon": "fa-ban",
                "label": "Desativar",
                "topic": "desativar",
                "payload": "desativar",
                "payloadType": "str",
                "visible": true,
                "enabled": true
            }
        ],
        "colors": "theme",
        "textColor": "#000000",
        "backgroundColor": "#ffffff",
        "borderColor": "#626262",
        "intervalLength": "0",
        "intervalUnit": "secs",
        "startTimerAtOpen": false,
        "startTimerAtLeave": true,
        "stopTimerAtEnter": true,
        "name": "Menu Sensor 1",
        "x": 2060,
        "y": 1420,
        "wires": [
            [
                "bcc8c8c53c472a3f",
                "ce66a08c9729d996"
            ]
        ]
    },
    {
        "id": "acb2647ab607ccb1",
        "type": "change",
        "z": "91731f4ba480b30a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "label",
                "pt": "msg",
                "to": "Equipamento Desligado",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2610,
        "y": 1480,
        "wires": [
            [
                "f4336ae46874df26"
            ]
        ]
    },
    {
        "id": "6412ecd558f62143",
        "type": "change",
        "z": "91731f4ba480b30a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "label",
                "pt": "msg",
                "to": "Equipamento Ativo",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2610,
        "y": 1360,
        "wires": [
            [
                "f4336ae46874df26"
            ]
        ]
    },
    {
        "id": "ce66a08c9729d996",
        "type": "function",
        "z": "91731f4ba480b30a",
        "name": "function 23",
        "func": "if(msg.payload === \"ativar\"){\n    msg.payload = true;\n    msg.Estado = \"Ativo\";\n}\nif (msg.topic === \"avaria\"){\n    msg.Estado = \"Avaria\";\n    msg.payload = false;\n}\nif(msg.topic === \"desativar\"){\n    msg.Estado = \"Desativado\";\n    msg.payload = false;\n}\nif (msg.topic === \"carregar\"){\n    msg.Estado = \"Em Carregamento\";\n    msg.payload = false;\n}\nmsg.Sensor = 1;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2230,
        "y": 1520,
        "wires": [
            [
                "3077e92079f2ce03",
                "0866bf17ac466afa",
                "00b302331c12b1a3"
            ]
        ]
    },
    {
        "id": "00b302331c12b1a3",
        "type": "function",
        "z": "91731f4ba480b30a",
        "name": "Inserir Estado",
        "func": "msg.payload == true ? msg.Ativo = \"S\" : msg.Ativo = \"N\";\nmsg.topic = \"INSERT into estados(zona, sensor_n, estado, data, motivo) values(4, \" + msg.Sensor + \", '\" + msg.Ativo + \"', now(),'\" + msg.Estado +\"' );\"\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3040,
        "y": 1840,
        "wires": [
            [
                "550dc66835c799b6"
            ]
        ]
    },
    {
        "id": "fa9353f456e24de6",
        "type": "switch",
        "z": "91731f4ba480b30a",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "ativar",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "avaria",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "carregar",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "desativar",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 4,
        "x": 2410,
        "y": 1640,
        "wires": [
            [
                "7dc94ad868dd22a9"
            ],
            [
                "6c3b99ef27e02cb8"
            ],
            [
                "66f568757c699e37"
            ],
            [
                "e90bf33ea563d104"
            ]
        ]
    },
    {
        "id": "6c3b99ef27e02cb8",
        "type": "change",
        "z": "91731f4ba480b30a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "label1",
                "pt": "msg",
                "to": "Equipamento Avariado",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2620,
        "y": 1620,
        "wires": [
            [
                "eaa6db3d0cb5f9b0"
            ]
        ]
    },
    {
        "id": "66f568757c699e37",
        "type": "change",
        "z": "91731f4ba480b30a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "label1",
                "pt": "msg",
                "to": "Sensor a Carregar",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2620,
        "y": 1660,
        "wires": [
            [
                "eaa6db3d0cb5f9b0"
            ]
        ]
    },
    {
        "id": "e90bf33ea563d104",
        "type": "change",
        "z": "91731f4ba480b30a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "label1",
                "pt": "msg",
                "to": "Equipamento Desligado",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2620,
        "y": 1700,
        "wires": [
            [
                "eaa6db3d0cb5f9b0"
            ]
        ]
    },
    {
        "id": "7dc94ad868dd22a9",
        "type": "change",
        "z": "91731f4ba480b30a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "label1",
                "pt": "msg",
                "to": "Equipamento Ativo",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2620,
        "y": 1580,
        "wires": [
            [
                "eaa6db3d0cb5f9b0"
            ]
        ]
    },
    {
        "id": "92639923edf017c3",
        "type": "switch",
        "z": "91731f4ba480b30a",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "ativar",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "avaria",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "carregar",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "desativar",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 4,
        "x": 2410,
        "y": 1880,
        "wires": [
            [
                "e83e9d389ff03b3e"
            ],
            [
                "fcc344f6ea9410ab"
            ],
            [
                "1b9ca83a65b8e9ef"
            ],
            [
                "e9319365b957ec4a"
            ]
        ]
    },
    {
        "id": "fcc344f6ea9410ab",
        "type": "change",
        "z": "91731f4ba480b30a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "label2",
                "pt": "msg",
                "to": "Equipamento Avariado",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2620,
        "y": 1860,
        "wires": [
            [
                "2974a0136767e844"
            ]
        ]
    },
    {
        "id": "1b9ca83a65b8e9ef",
        "type": "change",
        "z": "91731f4ba480b30a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "label2",
                "pt": "msg",
                "to": "Sensor a Carregar",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2620,
        "y": 1900,
        "wires": [
            [
                "2974a0136767e844"
            ]
        ]
    },
    {
        "id": "e9319365b957ec4a",
        "type": "change",
        "z": "91731f4ba480b30a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "label2",
                "pt": "msg",
                "to": "Equipamento Desligado",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2620,
        "y": 1940,
        "wires": [
            [
                "2974a0136767e844"
            ]
        ]
    },
    {
        "id": "e83e9d389ff03b3e",
        "type": "change",
        "z": "91731f4ba480b30a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "label2",
                "pt": "msg",
                "to": "Equipamento Ativo",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2620,
        "y": 1820,
        "wires": [
            [
                "2974a0136767e844"
            ]
        ]
    },
    {
        "id": "9fb70c2d916248ea",
        "type": "switch",
        "z": "91731f4ba480b30a",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "ativar",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "avaria",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "carregar",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "desativar",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 4,
        "x": 2410,
        "y": 2120,
        "wires": [
            [
                "5086ca0552b07928"
            ],
            [
                "65580d4e9bef1a6b"
            ],
            [
                "5e440373df27be49"
            ],
            [
                "c45b8322ac1fb7d2"
            ]
        ]
    },
    {
        "id": "65580d4e9bef1a6b",
        "type": "change",
        "z": "91731f4ba480b30a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "label3",
                "pt": "msg",
                "to": "Equipamento Avariado",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2620,
        "y": 2100,
        "wires": [
            [
                "6837c970b761f2f1"
            ]
        ]
    },
    {
        "id": "5e440373df27be49",
        "type": "change",
        "z": "91731f4ba480b30a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "label3",
                "pt": "msg",
                "to": "Sensor a Carregar",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2620,
        "y": 2140,
        "wires": [
            [
                "6837c970b761f2f1"
            ]
        ]
    },
    {
        "id": "c45b8322ac1fb7d2",
        "type": "change",
        "z": "91731f4ba480b30a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "label3",
                "pt": "msg",
                "to": "Equipamento Desligado",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2620,
        "y": 2180,
        "wires": [
            [
                "6837c970b761f2f1"
            ]
        ]
    },
    {
        "id": "5086ca0552b07928",
        "type": "change",
        "z": "91731f4ba480b30a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "label3",
                "pt": "msg",
                "to": "Equipamento Ativo",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2620,
        "y": 2060,
        "wires": [
            [
                "6837c970b761f2f1"
            ]
        ]
    },
    {
        "id": "34344e1d057b8ef4",
        "type": "ui_button",
        "z": "91731f4ba480b30a",
        "name": "",
        "group": "64574ae0ae410483",
        "order": 10,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "Ativar",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "check",
        "payload": "ativar",
        "payloadType": "str",
        "topic": "ativar",
        "topicType": "msg",
        "x": 1710,
        "y": 1720,
        "wires": [
            [
                "9e59c5a7c3a3dc15",
                "fa9353f456e24de6"
            ]
        ]
    },
    {
        "id": "8f68c2a0cf305acb",
        "type": "ui_button",
        "z": "91731f4ba480b30a",
        "name": "",
        "group": "64574ae0ae410483",
        "order": 12,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "Desativar",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "fa-ban",
        "payload": "desativar",
        "payloadType": "str",
        "topic": "",
        "topicType": "str",
        "x": 1720,
        "y": 1640,
        "wires": [
            [
                "99d8a8553d36d5de"
            ]
        ]
    },
    {
        "id": "99d8a8553d36d5de",
        "type": "change",
        "z": "91731f4ba480b30a",
        "name": "XY",
        "rules": [
            {
                "t": "set",
                "p": "position.x",
                "pt": "msg",
                "to": "event.bbox[2]-150",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "position.y",
                "pt": "msg",
                "to": "event.bbox[3]+40",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1890,
        "y": 1640,
        "wires": [
            [
                "05301bcfbfd1c108"
            ]
        ]
    },
    {
        "id": "05301bcfbfd1c108",
        "type": "ui_context_menu",
        "z": "91731f4ba480b30a",
        "group": "64574ae0ae410483",
        "order": 15,
        "width": 0,
        "height": 0,
        "fontSize": 16,
        "inputPositionXField": "position.x",
        "inputPositionXType": "msg",
        "inputPositionYField": "position.y",
        "inputPositionYType": "msg",
        "outputField": "payload",
        "inputMenuField": "",
        "inputMenuType": "fixed",
        "menuItems": [
            {
                "id": "avaria",
                "icon": "fa-wrench",
                "label": "Avaria",
                "topic": "avaria",
                "payload": "avaria",
                "payloadType": "str",
                "visible": true,
                "enabled": true
            },
            {
                "id": "carregar",
                "icon": "fa-battery-1",
                "label": "Carregar Bateria",
                "topic": "carregar",
                "payload": "carregar",
                "payloadType": "str",
                "visible": true,
                "enabled": true
            },
            {
                "id": "desativar",
                "icon": "fa-ban",
                "label": "Desativar",
                "topic": "desativar",
                "payload": "desativar",
                "payloadType": "str",
                "visible": true,
                "enabled": true
            }
        ],
        "colors": "theme",
        "textColor": "#000000",
        "backgroundColor": "#ffffff",
        "borderColor": "#626262",
        "intervalLength": "0",
        "intervalUnit": "secs",
        "startTimerAtOpen": false,
        "startTimerAtLeave": true,
        "stopTimerAtEnter": true,
        "name": "Menu Sensor 2",
        "x": 2060,
        "y": 1640,
        "wires": [
            [
                "9e59c5a7c3a3dc15",
                "fa9353f456e24de6"
            ]
        ]
    },
    {
        "id": "9e59c5a7c3a3dc15",
        "type": "function",
        "z": "91731f4ba480b30a",
        "name": "function 24",
        "func": "if (msg.payload === \"ativar\") {\n    msg.payload = true;\n    msg.Estado = \"Ativo\";\n}\nif (msg.topic === \"avaria\") {\n    msg.Estado = \"Avaria\";\n    msg.payload = false;\n}\nif (msg.topic === \"desativar\") {\n    msg.Estado = \"Desativado\";\n    msg.payload = false;\n}\nif (msg.topic === \"carregar\") {\n    msg.Estado = \"Em Carregamento\";\n    msg.payload = false;\n}\nmsg.Sensor = 2;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2230,
        "y": 1720,
        "wires": [
            [
                "398ce5bc958cb715",
                "0866bf17ac466afa",
                "00b302331c12b1a3"
            ]
        ]
    },
    {
        "id": "56846030c06a1e2d",
        "type": "ui_button",
        "z": "91731f4ba480b30a",
        "name": "",
        "group": "0ad7ea62b52c2f50",
        "order": 10,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "Ativar",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "check",
        "payload": "ativar",
        "payloadType": "str",
        "topic": "ativar",
        "topicType": "msg",
        "x": 1710,
        "y": 1960,
        "wires": [
            [
                "f9c2dcfb94281998",
                "92639923edf017c3"
            ]
        ]
    },
    {
        "id": "5e3ed79fab13ab38",
        "type": "ui_button",
        "z": "91731f4ba480b30a",
        "name": "",
        "group": "0ad7ea62b52c2f50",
        "order": 12,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "Desativar",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "fa-ban",
        "payload": "desativar",
        "payloadType": "str",
        "topic": "",
        "topicType": "str",
        "x": 1720,
        "y": 1880,
        "wires": [
            [
                "4c544778741e448f"
            ]
        ]
    },
    {
        "id": "4c544778741e448f",
        "type": "change",
        "z": "91731f4ba480b30a",
        "name": "XY",
        "rules": [
            {
                "t": "set",
                "p": "position.x",
                "pt": "msg",
                "to": "event.bbox[2]-150",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "position.y",
                "pt": "msg",
                "to": "event.bbox[3]+40",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1890,
        "y": 1880,
        "wires": [
            [
                "4034e264c40bd002"
            ]
        ]
    },
    {
        "id": "4034e264c40bd002",
        "type": "ui_context_menu",
        "z": "91731f4ba480b30a",
        "group": "0ad7ea62b52c2f50",
        "order": 15,
        "width": 0,
        "height": 0,
        "fontSize": 16,
        "inputPositionXField": "position.x",
        "inputPositionXType": "msg",
        "inputPositionYField": "position.y",
        "inputPositionYType": "msg",
        "outputField": "payload",
        "inputMenuField": "",
        "inputMenuType": "fixed",
        "menuItems": [
            {
                "id": "avaria",
                "icon": "fa-wrench",
                "label": "Avaria",
                "topic": "avaria",
                "payload": "avaria",
                "payloadType": "str",
                "visible": true,
                "enabled": true
            },
            {
                "id": "carregar",
                "icon": "fa-battery-1",
                "label": "Carregar Bateria",
                "topic": "carregar",
                "payload": "carregar",
                "payloadType": "str",
                "visible": true,
                "enabled": true
            },
            {
                "id": "desativar",
                "icon": "fa-ban",
                "label": "Desativar",
                "topic": "desativar",
                "payload": "desativar",
                "payloadType": "str",
                "visible": true,
                "enabled": true
            }
        ],
        "colors": "theme",
        "textColor": "#000000",
        "backgroundColor": "#ffffff",
        "borderColor": "#626262",
        "intervalLength": "0",
        "intervalUnit": "secs",
        "startTimerAtOpen": false,
        "startTimerAtLeave": true,
        "stopTimerAtEnter": true,
        "name": "Menu Sensor 3",
        "x": 2060,
        "y": 1880,
        "wires": [
            [
                "f9c2dcfb94281998",
                "92639923edf017c3"
            ]
        ]
    },
    {
        "id": "f9c2dcfb94281998",
        "type": "function",
        "z": "91731f4ba480b30a",
        "name": "function 25",
        "func": "if (msg.payload === \"ativar\") {\n    msg.payload = true;\n    msg.Estado = \"Ativo\";\n}\nif (msg.topic === \"avaria\") {\n    msg.Estado = \"Avaria\";\n    msg.payload = false;\n}\nif (msg.topic === \"desativar\") {\n    msg.Estado = \"Desativado\";\n    msg.payload = false;\n}\nif (msg.topic === \"carregar\") {\n    msg.Estado = \"Em Carregamento\";\n    msg.payload = false;\n}\nmsg.Sensor = 3;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2230,
        "y": 1960,
        "wires": [
            [
                "0866bf17ac466afa",
                "00b302331c12b1a3",
                "804f0dfdd3d7e5f7"
            ]
        ]
    },
    {
        "id": "5de75a34d6c34052",
        "type": "ui_button",
        "z": "91731f4ba480b30a",
        "name": "",
        "group": "027aafb04853fa75",
        "order": 10,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "Ativar",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "check",
        "payload": "ativar",
        "payloadType": "str",
        "topic": "ativar",
        "topicType": "msg",
        "x": 1710,
        "y": 2200,
        "wires": [
            [
                "a20763f9ec6c5072",
                "9fb70c2d916248ea"
            ]
        ]
    },
    {
        "id": "85f63fce8df9ab86",
        "type": "ui_button",
        "z": "91731f4ba480b30a",
        "name": "",
        "group": "027aafb04853fa75",
        "order": 12,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "Desativar",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "fa-ban",
        "payload": "desativar",
        "payloadType": "str",
        "topic": "",
        "topicType": "str",
        "x": 1720,
        "y": 2120,
        "wires": [
            [
                "38882aee78d67ca5"
            ]
        ]
    },
    {
        "id": "38882aee78d67ca5",
        "type": "change",
        "z": "91731f4ba480b30a",
        "name": "XY",
        "rules": [
            {
                "t": "set",
                "p": "position.x",
                "pt": "msg",
                "to": "event.bbox[2]-150",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "position.y",
                "pt": "msg",
                "to": "event.bbox[3]+40",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1890,
        "y": 2120,
        "wires": [
            [
                "005b508aa691219f"
            ]
        ]
    },
    {
        "id": "005b508aa691219f",
        "type": "ui_context_menu",
        "z": "91731f4ba480b30a",
        "group": "027aafb04853fa75",
        "order": 15,
        "width": 0,
        "height": 0,
        "fontSize": 16,
        "inputPositionXField": "position.x",
        "inputPositionXType": "msg",
        "inputPositionYField": "position.y",
        "inputPositionYType": "msg",
        "outputField": "payload",
        "inputMenuField": "",
        "inputMenuType": "fixed",
        "menuItems": [
            {
                "id": "avaria",
                "icon": "fa-wrench",
                "label": "Avaria",
                "topic": "avaria",
                "payload": "avaria",
                "payloadType": "str",
                "visible": true,
                "enabled": true
            },
            {
                "id": "carregar",
                "icon": "fa-battery-1",
                "label": "Carregar Bateria",
                "topic": "carregar",
                "payload": "carregar",
                "payloadType": "str",
                "visible": true,
                "enabled": true
            },
            {
                "id": "desativar",
                "icon": "fa-ban",
                "label": "Desativar",
                "topic": "desativar",
                "payload": "desativar",
                "payloadType": "str",
                "visible": true,
                "enabled": true
            }
        ],
        "colors": "theme",
        "textColor": "#000000",
        "backgroundColor": "#ffffff",
        "borderColor": "#626262",
        "intervalLength": "0",
        "intervalUnit": "secs",
        "startTimerAtOpen": false,
        "startTimerAtLeave": true,
        "stopTimerAtEnter": true,
        "name": "Menu Sensor 4",
        "x": 2060,
        "y": 2120,
        "wires": [
            [
                "a20763f9ec6c5072",
                "9fb70c2d916248ea"
            ]
        ]
    },
    {
        "id": "a20763f9ec6c5072",
        "type": "function",
        "z": "91731f4ba480b30a",
        "name": "function 26",
        "func": "if (msg.payload === \"ativar\") {\n    msg.payload = true;\n    msg.Estado = \"Ativo\";\n}\nif (msg.topic === \"avaria\") {\n    msg.Estado = \"Avaria\";\n    msg.payload = false;\n}\nif (msg.topic === \"desativar\") {\n    msg.Estado = \"Desativado\";\n    msg.payload = false;\n}\nif (msg.topic === \"carregar\") {\n    msg.Estado = \"Em Carregamento\";\n    msg.payload = false;\n}\nmsg.Sensor = 4;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2230,
        "y": 2200,
        "wires": [
            [
                "0866bf17ac466afa",
                "00b302331c12b1a3",
                "27c21ed76042cf7c"
            ]
        ]
    },
    {
        "id": "363a5334efa6bc72",
        "type": "mqtt out",
        "z": "91731f4ba480b30a",
        "name": "Sensor 5",
        "topic": "TFC/Esplanada/Sensor5/S5",
        "qos": "2",
        "retain": "true",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "a22cb5334c925d0b",
        "x": 2440,
        "y": 2420,
        "wires": []
    },
    {
        "id": "fa0dfe5d938e66a4",
        "type": "ui_text",
        "z": "91731f4ba480b30a",
        "group": "72c10720b3a93ebf",
        "order": 13,
        "width": 6,
        "height": 1,
        "name": "S_L_5",
        "label": "",
        "format": "<font size = 4 font color =royalblue>{{msg.label4}}",
        "layout": "row-left",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 2810,
        "y": 2280,
        "wires": []
    },
    {
        "id": "07b9146b822f188d",
        "type": "switch",
        "z": "91731f4ba480b30a",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "ativar",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "avaria",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "carregar",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "desativar",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 4,
        "x": 2410,
        "y": 2340,
        "wires": [
            [
                "61f7965ed53efe26"
            ],
            [
                "d975cbed6983564c"
            ],
            [
                "41717cd7962aa05a"
            ],
            [
                "3972a57cf46c35fb"
            ]
        ]
    },
    {
        "id": "d975cbed6983564c",
        "type": "change",
        "z": "91731f4ba480b30a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "label4",
                "pt": "msg",
                "to": "Equipamento Avariado",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2620,
        "y": 2320,
        "wires": [
            [
                "fa0dfe5d938e66a4"
            ]
        ]
    },
    {
        "id": "41717cd7962aa05a",
        "type": "change",
        "z": "91731f4ba480b30a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "label4",
                "pt": "msg",
                "to": "Sensor a Carregar",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2620,
        "y": 2360,
        "wires": [
            [
                "fa0dfe5d938e66a4"
            ]
        ]
    },
    {
        "id": "3972a57cf46c35fb",
        "type": "change",
        "z": "91731f4ba480b30a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "label4",
                "pt": "msg",
                "to": "Equipamento Desligado",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2620,
        "y": 2400,
        "wires": [
            [
                "fa0dfe5d938e66a4"
            ]
        ]
    },
    {
        "id": "61f7965ed53efe26",
        "type": "change",
        "z": "91731f4ba480b30a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "label4",
                "pt": "msg",
                "to": "Equipamento Ativo",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2620,
        "y": 2280,
        "wires": [
            [
                "fa0dfe5d938e66a4"
            ]
        ]
    },
    {
        "id": "af6b718a6f458b15",
        "type": "ui_button",
        "z": "91731f4ba480b30a",
        "name": "",
        "group": "72c10720b3a93ebf",
        "order": 10,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "Ativar",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "check",
        "payload": "ativar",
        "payloadType": "str",
        "topic": "ativar",
        "topicType": "msg",
        "x": 1710,
        "y": 2420,
        "wires": [
            [
                "f0d08f4f4627a681",
                "07b9146b822f188d"
            ]
        ]
    },
    {
        "id": "c60d87de91826022",
        "type": "ui_button",
        "z": "91731f4ba480b30a",
        "name": "",
        "group": "72c10720b3a93ebf",
        "order": 12,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "Desativar",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "fa-ban",
        "payload": "desativar",
        "payloadType": "str",
        "topic": "",
        "topicType": "str",
        "x": 1720,
        "y": 2340,
        "wires": [
            [
                "95cd34666425d1f5"
            ]
        ]
    },
    {
        "id": "95cd34666425d1f5",
        "type": "change",
        "z": "91731f4ba480b30a",
        "name": "XY",
        "rules": [
            {
                "t": "set",
                "p": "position.x",
                "pt": "msg",
                "to": "event.bbox[2]-150",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "position.y",
                "pt": "msg",
                "to": "event.bbox[3]+40",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1890,
        "y": 2340,
        "wires": [
            [
                "e95491d5562ee4b0"
            ]
        ]
    },
    {
        "id": "e95491d5562ee4b0",
        "type": "ui_context_menu",
        "z": "91731f4ba480b30a",
        "group": "72c10720b3a93ebf",
        "order": 15,
        "width": 0,
        "height": 0,
        "fontSize": 16,
        "inputPositionXField": "position.x",
        "inputPositionXType": "msg",
        "inputPositionYField": "position.y",
        "inputPositionYType": "msg",
        "outputField": "payload",
        "inputMenuField": "",
        "inputMenuType": "fixed",
        "menuItems": [
            {
                "id": "avaria",
                "icon": "fa-wrench",
                "label": "Avaria",
                "topic": "avaria",
                "payload": "avaria",
                "payloadType": "str",
                "visible": true,
                "enabled": true
            },
            {
                "id": "carregar",
                "icon": "fa-battery-1",
                "label": "Carregar Bateria",
                "topic": "carregar",
                "payload": "carregar",
                "payloadType": "str",
                "visible": true,
                "enabled": true
            },
            {
                "id": "desativar",
                "icon": "fa-ban",
                "label": "Desativar",
                "topic": "desativar",
                "payload": "desativar",
                "payloadType": "str",
                "visible": true,
                "enabled": true
            }
        ],
        "colors": "theme",
        "textColor": "#000000",
        "backgroundColor": "#ffffff",
        "borderColor": "#626262",
        "intervalLength": "0",
        "intervalUnit": "secs",
        "startTimerAtOpen": false,
        "startTimerAtLeave": true,
        "stopTimerAtEnter": true,
        "name": "Menu Sensor 4",
        "x": 2060,
        "y": 2340,
        "wires": [
            [
                "f0d08f4f4627a681",
                "07b9146b822f188d"
            ]
        ]
    },
    {
        "id": "f0d08f4f4627a681",
        "type": "function",
        "z": "91731f4ba480b30a",
        "name": "function 27",
        "func": "if (msg.payload === \"ativar\") {\n    msg.payload = true;\n    msg.Estado = \"Ativo\";\n}\nif (msg.topic === \"avaria\") {\n    msg.Estado = \"Avaria\";\n    msg.payload = false;\n}\nif (msg.topic === \"desativar\") {\n    msg.Estado = \"Desativado\";\n    msg.payload = false;\n}\nif (msg.topic === \"carregar\") {\n    msg.Estado = \"Em Carregamento\";\n    msg.payload = false;\n}\nmsg.Sensor = 5;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2230,
        "y": 2420,
        "wires": [
            [
                "363a5334efa6bc72",
                "0866bf17ac466afa",
                "00b302331c12b1a3"
            ]
        ]
    },
    {
        "id": "151f70c94bb93cd3",
        "type": "e-mail",
        "z": "91731f4ba480b30a",
        "server": "mail.northspot.pt",
        "port": "465",
        "authtype": "BASIC",
        "saslformat": false,
        "token": "",
        "secure": true,
        "tls": true,
        "name": "arimar.sensores@gmail.com",
        "dname": "Email",
        "x": 2830,
        "y": 1060,
        "wires": []
    },
    {
        "id": "be019f4d8d78ba8a",
        "type": "function",
        "z": "91731f4ba480b30a",
        "name": "Verifica Temperatura",
        "func": "msg.topic = \"ALERTA - Zona da Esplanada - Sensor: \" + msg.Sensor;\nvar alta =  \"ALERTA TEMPERATURA ALTA\";\nvar baixa = \"ALERTA TEMPERATURA BAIXA\";\nvar w = \"%0A%0AZona: Esplanada%0ASensor: \" + msg.Sensor + \"%0ATemperatura: \" + msg.Temperatura + \" ºC %0A%0AVerifique o Equipamento.\";\nvar p = \"</h1><p>Temperatura: \" + msg.Temperatura + \"</p><p>Verifique o Equipamento!!!</p>\" \n\n\n\nif (msg.Tipo == 1) {\n    if (msg.Temperatura >= 10){\n        msg.whatsapp = alta + w;\n        msg.payload = \"<h1>\" + alta + p;\n        return [msg, null];\n    }\n    else if (msg.Temperatura <= 2) {\n        msg.whatsapp = baixa + w;\n        msg.payload = \"<h1>\" + baixa + p;\n        return [msg, null];\n    }\n    else\n        return [null, null];\n}\nelse if(msg.Tipo == 2){\n    if (msg.Temperatura >= -5) {\n        msg.whatsapp = alta + w;\n        msg.payload = \"<h1>\" + alta + p;\n        return [msg, null];\n    }\n    else if (msg.Temperatura <= -22) {\n        msg.whatsapp = baixa + w;\n        msg.payload = \"<h1>\" + baixa + p;\n        return [msg, null];\n    }\n    else\n        return [null, null];\n}\n\n",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2540,
        "y": 1080,
        "wires": [
            [
                "0c52edb8c07924ae",
                "151f70c94bb93cd3"
            ],
            []
        ]
    },
    {
        "id": "0c52edb8c07924ae",
        "type": "node-red-contrib-whatsapp-cmb-send-message",
        "z": "91731f4ba480b30a",
        "name": "Whatsapp",
        "account": "b5b4b586aa40dcf0",
        "text": "whatsapp",
        "inputtypemessage": "msg",
        "rejectssl": false,
        "x": 2840,
        "y": 1140,
        "wires": [
            [
                "9c14188a69e99a7a"
            ]
        ]
    },
    {
        "id": "9c14188a69e99a7a",
        "type": "debug",
        "z": "91731f4ba480b30a",
        "name": "debug 58",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 3000,
        "y": 1140,
        "wires": []
    },
    {
        "id": "84878da6bf75b132",
        "type": "function",
        "z": "91731f4ba480b30a",
        "name": "Verifica Bateria",
        "func": "// Bateria\nvar recebido = msg.Bateria;\nvar porcento = ((recebido - 3.2) * 100) / 1;\nif (porcento > 100)\n    msg.Bateria = 100;\nelse\n    msg.Bateria = porcento;\n\nmsg.Bateria = msg.Bateria.toFixed(2);\n\nmsg.topic = \"ALERTA - Zona da Esplanada - Sensor: \" + msg.Sensor;\nvar muito_baixa = \"ALERTA BATERIA MUITO BAIXA\";\nvar baixa = \"ALERTA BATERIA BAIXA\";\nvar whatsapp = \"%0A%0AZona: Esplanada%0ASensor: \" + msg.Sensor + \"%0ABateria: \" + msg.Bateria + \" % %0A%0AVerifique o Equipamento.\";\nvar p = \"</h1><p>Bateria: \" + msg.Bateria + \"</p><p>Verifique o Equipamento!!!</p>\";\n\nif (msg.Bateria < 25) {\n    msg.whatsapp = muito_baixa + whatsapp;\n    msg.payload = \"<h1>\" + muito_baixa + p;\n    return [msg, null];\n}\nelse if (msg.Bateria > 25 && msg.Bateria < 30) {\n    msg.whatsapp = baixa + whatsapp;\n    msg.payload = \"<h1>\" + baixa + p;\n    return [msg, null];\n}\nelse\n    return [null, null];\n\n   \n",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2520,
        "y": 1140,
        "wires": [
            [
                "0c52edb8c07924ae",
                "151f70c94bb93cd3"
            ],
            []
        ]
    },
    {
        "id": "6ef1a3b69dcc1a68",
        "type": "switch",
        "z": "91731f4ba480b30a",
        "name": "S / N",
        "property": "payload[0].Ativo",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "S",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "N",
                "vt": "str"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 2290,
        "y": 1100,
        "wires": [
            [
                "be019f4d8d78ba8a",
                "84878da6bf75b132"
            ],
            []
        ]
    },
    {
        "id": "2c2ae6d9e0a4807b",
        "type": "function",
        "z": "91731f4ba480b30a",
        "name": "Estado Sensor",
        "func": "msg.topic = \"SELECT Ativo FROM sensor where sensor_ID = '\" + msg.Sensor_ID + \"'\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1960,
        "y": 1100,
        "wires": [
            [
                "f1512355ea15883f"
            ]
        ]
    },
    {
        "id": "f1512355ea15883f",
        "type": "mysql",
        "z": "91731f4ba480b30a",
        "mydb": "9b6527f7.cad8b8",
        "name": "BDados",
        "x": 2140,
        "y": 1100,
        "wires": [
            [
                "6ef1a3b69dcc1a68"
            ]
        ]
    },
    {
        "id": "b4868c8fddc8c9c5",
        "type": "function",
        "z": "91731f4ba480b30a",
        "name": "Sensor - S / N",
        "func": "if (msg.Sensor == 1){\n    if(msg.Ativo === \"S\")\n        msg.label = \"Equipamento Ativo\";\n    else\n        msg.label = \"Equipamento Inativo\";\n    return [msg, null, null, null, null];\n}\nif (msg.Sensor == 2) {\n    if (msg.Ativo === \"S\")\n        msg.label1 = \"Equipamento Ativo\";\n    else\n        msg.label1 = \"Equipamento Inativo\";\n    return [null, msg, null, null, null];\n}\nif (msg.Sensor == 3) {\n    if (msg.Ativo === \"S\")\n        msg.label2 = \"Equipamento Ativo\";\n    else\n        msg.label2 = \"Equipamento Inativo\";\n    return [null, null, msg, null, null];\n} \nif (msg.Sensor == 4) {\n    if (msg.Ativo === \"S\")\n        msg.label3 = \"Equipamento Ativo\";\n    else\n        msg.label3 = \"Equipamento Inativo\";\n    return [null, null, null, msg, null];\n} \nif (msg.Sensor == 5) {\n    if (msg.Ativo === \"S\")\n        msg.label4 = \"Equipamento Ativo\";\n    else\n        msg.label4 = \"Equipamento Inativo\";\n    return [null, null, null, null, msg];\n} \nreturn msg;",
        "outputs": 5,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1900,
        "y": 1800,
        "wires": [
            [
                "f4336ae46874df26"
            ],
            [
                "eaa6db3d0cb5f9b0"
            ],
            [
                "2974a0136767e844"
            ],
            [
                "6837c970b761f2f1"
            ],
            [
                "fa0dfe5d938e66a4"
            ]
        ]
    },
    {
        "id": "950722a7be9a16c6",
        "type": "ui_table",
        "z": "36c8992b04a40e1e",
        "group": "2da9c0ea5c1db297",
        "name": "Sensores",
        "order": 1,
        "width": 15,
        "height": 10,
        "columns": [
            {
                "field": "NomeZona",
                "title": "Zona",
                "width": "15%",
                "align": "center",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "sensor_n",
                "title": "Sensor",
                "width": "15%",
                "align": "center",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "temperatura",
                "title": "Temperatura",
                "width": "17%",
                "align": "right",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "bateria",
                "title": "Bateria",
                "width": "17%",
                "align": "right",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "data",
                "title": "Data",
                "width": "20%",
                "align": "right",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            }
        ],
        "outputs": 1,
        "cts": true,
        "x": 1520,
        "y": 940,
        "wires": [
            []
        ]
    },
    {
        "id": "446bbc916dd54db0",
        "type": "function",
        "z": "36c8992b04a40e1e",
        "name": "Registos",
        "func": "var form_data = \"DATE_FORMAT(data, '%d-%m-%Y %H:%i:%s') 'data'\";\nvar inicio = \"SELECT NomeZona, sensor_n, Concat(FORMAT(temperatura, 2), ' º C') AS temperatura, concat(round((((bateria - 3.2) * 100) / 1), 2), ' %') as bateria,\";\nvar from_q = \"FROM registos as r, zona as z, sensor as s WHERE r.zona=\";\nvar sensor = parseInt(msg.topic);\nvar imp_zona = \"\";\nvar imp_zona_sensor = \"\";\n\nif (msg.payload == 0){\n    msg.topic = inicio + form_data +\"FROM registos as r, zona as z, sensor as s where r.zona = z.idzona And s.Sensor_ID = r.sensor ORDER BY r.id desc LIMIT 24;\";\n}else{\n    imp_zona = msg.payload;\n    if (sensor >= 1 && sensor <= 5 ){\n        msg.topic = inicio + form_data + from_q + msg.payload + \" and r.zona = z.idzona And s.Sensor_ID = r.sensor and s.sensor_n = \"+sensor+\" ORDER BY r.id desc LIMIT 24;\";\n        msg.imp_zona_sensor = \"Zona-\"+imp_zona+\"Sensor\"+sensor;\n    }else{ \n        msg.topic = inicio + form_data + from_q + msg.payload + \" and r.zona = z.idzona And s.Sensor_ID = r.sensor ORDER BY r.id desc LIMIT 24;\";\n        msg.imp_zona_sensor = \"Zona-\" + imp_zona;\n    }\n}   \nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1140,
        "y": 940,
        "wires": [
            [
                "a4ac6c3b6cb8ce05"
            ]
        ]
    },
    {
        "id": "a4ac6c3b6cb8ce05",
        "type": "mysql",
        "z": "36c8992b04a40e1e",
        "mydb": "9b6527f7.cad8b8",
        "name": "BD ",
        "x": 1310,
        "y": 940,
        "wires": [
            [
                "950722a7be9a16c6",
                "68ebdd8fef9ed6da"
            ]
        ]
    },
    {
        "id": "71b53111379a6919",
        "type": "ui_button",
        "z": "36c8992b04a40e1e",
        "name": "",
        "group": "7d014fad0e42db08",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "Sala",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "free_breakfast",
        "payload": "{\"group\":{\"show\":[\"Listagem_Sala\"],\"hide\":[\"Listagem_Cozinha\",\"Listagem_Armazem\",\"Listagem_Esplanada\"]}}",
        "payloadType": "json",
        "topic": "",
        "topicType": "str",
        "x": 210,
        "y": 480,
        "wires": [
            [
                "2f4df7a9b81b4f5d",
                "d4d85017d1651f3f"
            ]
        ]
    },
    {
        "id": "fda6ea926981f6d1",
        "type": "ui_button",
        "z": "36c8992b04a40e1e",
        "name": "",
        "group": "7d014fad0e42db08",
        "order": 1,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "Cozinha",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "kitchen",
        "payload": "{\"group\":{\"show\":[\"Listagem_Cozinha\"],\"hide\":[\"Listagem_Sala\",\"Listagem_Armazem\",\"Listagem_Esplanada\"]}}",
        "payloadType": "json",
        "topic": "",
        "topicType": "str",
        "x": 220,
        "y": 420,
        "wires": [
            [
                "d1a658de46b08f40",
                "d4d85017d1651f3f"
            ]
        ]
    },
    {
        "id": "5fe7c41c8094cea0",
        "type": "ui_button",
        "z": "36c8992b04a40e1e",
        "name": "",
        "group": "7d014fad0e42db08",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "Armazém",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "dashboard",
        "payload": "{\"group\":{\"show\":[\"Listagem_Armazem\"],\"hide\":[\"Listagem_Sala\",\"Listagem_Cozinha\",\"Listagem_Esplanada\"]}}",
        "payloadType": "json",
        "topic": "",
        "topicType": "str",
        "x": 220,
        "y": 540,
        "wires": [
            [
                "dd24998281480d16",
                "d4d85017d1651f3f"
            ]
        ]
    },
    {
        "id": "01c3d334369031de",
        "type": "ui_button",
        "z": "36c8992b04a40e1e",
        "name": "",
        "group": "7d014fad0e42db08",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": true,
        "label": "Esplanada",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "room_service",
        "payload": "{\"group\":{\"show\":[\"Listagem_Esplanada\"],\"hide\":[\"Listagem_Sala\",\"Listagem_Armazem\",\"Listagem_Cozinha\"]}}",
        "payloadType": "json",
        "topic": "",
        "topicType": "str",
        "x": 230,
        "y": 600,
        "wires": [
            [
                "55e21b0f8b5ef5a2",
                "d4d85017d1651f3f"
            ]
        ]
    },
    {
        "id": "d1a658de46b08f40",
        "type": "change",
        "z": "36c8992b04a40e1e",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 760,
        "y": 420,
        "wires": [
            [
                "446bbc916dd54db0"
            ]
        ]
    },
    {
        "id": "2f4df7a9b81b4f5d",
        "type": "change",
        "z": "36c8992b04a40e1e",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "2",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 760,
        "y": 480,
        "wires": [
            [
                "446bbc916dd54db0"
            ]
        ]
    },
    {
        "id": "dd24998281480d16",
        "type": "change",
        "z": "36c8992b04a40e1e",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "3",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 760,
        "y": 540,
        "wires": [
            [
                "446bbc916dd54db0"
            ]
        ]
    },
    {
        "id": "55e21b0f8b5ef5a2",
        "type": "change",
        "z": "36c8992b04a40e1e",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "4",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 760,
        "y": 600,
        "wires": [
            [
                "446bbc916dd54db0"
            ]
        ]
    },
    {
        "id": "e8f7a7c4a6d0b014",
        "type": "inject",
        "z": "36c8992b04a40e1e",
        "name": "Registos",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 220,
        "y": 300,
        "wires": [
            [
                "91643a4e5e0e7ab8",
                "d4d85017d1651f3f"
            ]
        ]
    },
    {
        "id": "91643a4e5e0e7ab8",
        "type": "change",
        "z": "36c8992b04a40e1e",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 760,
        "y": 360,
        "wires": [
            [
                "446bbc916dd54db0"
            ]
        ]
    },
    {
        "id": "8dc63ade896d7a06",
        "type": "ui_button",
        "z": "36c8992b04a40e1e",
        "name": "",
        "group": "7d014fad0e42db08",
        "order": 5,
        "width": 0,
        "height": 0,
        "passthru": true,
        "label": "Registos",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "list",
        "payload": "{\"group\":{\"hide\":[\"Listagem_Cozinha\",\"Listagem_Sala\",\"Listagem_Armazem\",\"Listagem_Esplanada\"]}}",
        "payloadType": "json",
        "topic": "",
        "topicType": "str",
        "x": 220,
        "y": 360,
        "wires": [
            [
                "91643a4e5e0e7ab8",
                "d4d85017d1651f3f"
            ]
        ]
    },
    {
        "id": "edb141fa3f04f624",
        "type": "ui_ui_control",
        "z": "36c8992b04a40e1e",
        "name": "",
        "events": "all",
        "x": 700,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "4dc026992b932f78",
        "type": "change",
        "z": "36c8992b04a40e1e",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"tab\":\"Inicio\"}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 460,
        "y": 240,
        "wires": [
            [
                "edb141fa3f04f624"
            ]
        ]
    },
    {
        "id": "85d7c46977c81ccd",
        "type": "ui_button",
        "z": "36c8992b04a40e1e",
        "name": "",
        "group": "7d014fad0e42db08",
        "order": 7,
        "width": 0,
        "height": 0,
        "passthru": true,
        "label": "Voltar ao Inicio",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "list",
        "payload": "Inicio",
        "payloadType": "str",
        "topic": "",
        "topicType": "str",
        "x": 240,
        "y": 240,
        "wires": [
            [
                "4dc026992b932f78"
            ]
        ]
    },
    {
        "id": "b00723e34767c0c7",
        "type": "function",
        "z": "36c8992b04a40e1e",
        "g": "0c6b1c6becf1922d",
        "name": "Relatório",
        "func": "var body = [];\nvar hora = new Date().toLocaleDateString(\"pt\");\nvar d = new Date();\nvar dia = d.getDate();\nvar mes = d.getMonth();\nvar ano = d.getFullYear();\nvar horas = d.getHours();\nvar minutos = d.getMinutes();\nvar segundos = d.getSeconds();\n\nglobal.get(\"imp_zona_sensor\")\n\nmsg.PATH = 'C:/data/';\nmsg.NOME_RELT = msg.PATH + \"Relatório-\"+dia+\"-\"+mes+\"-\"+ano+\"-\"+horas+\"-\"+minutos+\"-\"+segundos+\".pdf\";\n\nvar rows = msg.payload;\nvar headers = {\n\n    top: {\n        col_1: { text: 'Zona', style: 'tableHeader',  alignment: 'center' },\n        col_2: { text: 'Sensor', style: 'tableHeader',  alignment: 'center' },\n        col_3: { text: 'Temperatura', style: 'tableHeader',  alignment: 'center' },\n        col_4: { text: 'Bateria', style: 'tableHeader', alignment: 'center' },\n        col_5: { text: 'Data', style: 'tableHeader', alignment: 'center' }\n    }\n}\n\nfor (var key in headers) {\n    if (headers.hasOwnProperty(key)) {\n        var header = headers[key];\n        var row = new Array();\n        row.push(header.col_1);\n        row.push(header.col_2);\n        row.push(header.col_3);\n        row.push(header.col_4);\n        row.push(header.col_5);\n        body.push(row);\n    }\n}\n \nfor (var key in rows) {\n    if (rows.hasOwnProperty(key)) {\n        var linha = rows[key];\n        var row = new Array();\n        row.push({ text: linha.NomeZona.toString(), alignment: 'center' });\n        row.push({ text: linha.sensor_n.toString(), alignment: 'center' });\n        row.push({ text: linha.temperatura.toString(), alignment: 'right' });\n        row.push({ text: linha.bateria.toString(), alignment: 'right' });\n        row.push({ text: linha.data.toString(), alignment: 'right' });\n        body.push(row);\n    }\n}\n\nvar dd = {\n   content: [\n        { text: 'FICHA DE CONTROLO', style: \"header\"},\n        { text: 'Data do Relatório: '+hora, style: \"subheader\"},\n        { text: 'Monitorização das temperaturas dos equipamentos de frio', fontSize: 14, bold: true, margin: [0, 10, 0, 8] },\n        {\n           style: 'tableExample',\n           table: {\n               headerRows: 1,\n               body: body\n            },\n            layout: 'lightHorizontalLines'\n        },\n        { text: 'Responsável pela monitorização dos equipamentos de frio e os dados: \\n'},\n        { text: 'ROBERTO LUZINDRO' },\n    ],\n    styles: {\n        header: {\n            fontSize: 18,\n            bold: true,\n            color: 'blue',\n            margin: [0, 0, 0, 10]\n        },\n        subheader: {\n            fontSize: 16,\n            bold: true,\n            margin: [0, 10, 0, 5]\n            },\n        tableExample: {\n            margin: [0, 5, 0, 15]\n        },\n        tableOpacityExample: {\n            margin: [0, 5, 0, 15],  \n            fillColor: 'blue',\n            fillOpacity: 0.3\n        },\n        tableHeader: {\n            bold: true,\n            fontSize: 13,\n            color: 'black'\n        }    \n    }\n};\nmsg.payload = dd;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 500,
        "y": 120,
        "wires": [
            [
                "e79c43acd36ae345"
            ]
        ]
    },
    {
        "id": "e79c43acd36ae345",
        "type": "pdfmake",
        "z": "36c8992b04a40e1e",
        "g": "0c6b1c6becf1922d",
        "name": "",
        "outputType": "Buffer",
        "inputProperty": "payload",
        "options": "{}",
        "outputProperty": "payload",
        "x": 760,
        "y": 120,
        "wires": [
            [
                "d16a84f01932309d"
            ]
        ]
    },
    {
        "id": "d16a84f01932309d",
        "type": "file",
        "z": "36c8992b04a40e1e",
        "g": "0c6b1c6becf1922d",
        "name": "PDF",
        "filename": "NOME_RELT",
        "filenameType": "msg",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 950,
        "y": 120,
        "wires": [
            [
                "681b5d9b1d7ed582",
                "1161e1803889a80d"
            ]
        ]
    },
    {
        "id": "681b5d9b1d7ed582",
        "type": "debug",
        "z": "36c8992b04a40e1e",
        "g": "0c6b1c6becf1922d",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1130,
        "y": 120,
        "wires": []
    },
    {
        "id": "f6fdd4d9d4d0cc00",
        "type": "ui_button",
        "z": "36c8992b04a40e1e",
        "g": "0c6b1c6becf1922d",
        "name": "",
        "group": "2da9c0ea5c1db297",
        "order": 2,
        "width": 3,
        "height": 1,
        "passthru": true,
        "label": "Imprimir ",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "imprimir",
        "payloadType": "global",
        "topic": "",
        "topicType": "str",
        "x": 220,
        "y": 120,
        "wires": [
            [
                "b00723e34767c0c7"
            ]
        ]
    },
    {
        "id": "68ebdd8fef9ed6da",
        "type": "change",
        "z": "36c8992b04a40e1e",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "imprimir",
                "pt": "global",
                "to": "payload",
                "tot": "msg",
                "dc": true
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1550,
        "y": 1000,
        "wires": [
            []
        ]
    },
    {
        "id": "7495556c5617a870",
        "type": "comment",
        "z": "36c8992b04a40e1e",
        "name": "Imprimir para Pasta",
        "info": "",
        "x": 230,
        "y": 40,
        "wires": []
    },
    {
        "id": "1161e1803889a80d",
        "type": "ui_toast",
        "z": "36c8992b04a40e1e",
        "position": "bottom left",
        "displayTime": "3",
        "highlight": "blue",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": true,
        "className": "",
        "topic": "Documento Impresso na Pasta",
        "name": "Notificação Impressão",
        "x": 1160,
        "y": 40,
        "wires": []
    },
    {
        "id": "13fcdf9028308c76",
        "type": "ui_button",
        "z": "36c8992b04a40e1e",
        "g": "0f8a26a80991c307",
        "name": "",
        "group": "d62edd72661fa6e4",
        "order": 1,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "Sensor 1",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "1",
        "payloadType": "num",
        "topic": "1",
        "topicType": "str",
        "x": 460,
        "y": 840,
        "wires": [
            [
                "446bbc916dd54db0"
            ]
        ]
    },
    {
        "id": "46b420a7c63a66da",
        "type": "ui_button",
        "z": "36c8992b04a40e1e",
        "g": "0f8a26a80991c307",
        "name": "",
        "group": "d62edd72661fa6e4",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "Sensor 2",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "1",
        "payloadType": "num",
        "topic": "2",
        "topicType": "str",
        "x": 460,
        "y": 880,
        "wires": [
            [
                "446bbc916dd54db0"
            ]
        ]
    },
    {
        "id": "201a253f846fe099",
        "type": "ui_button",
        "z": "36c8992b04a40e1e",
        "g": "0f8a26a80991c307",
        "name": "",
        "group": "d62edd72661fa6e4",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "Sensor 3",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "1",
        "payloadType": "num",
        "topic": "3",
        "topicType": "str",
        "x": 460,
        "y": 920,
        "wires": [
            [
                "446bbc916dd54db0"
            ]
        ]
    },
    {
        "id": "667094cd23d520a3",
        "type": "ui_button",
        "z": "36c8992b04a40e1e",
        "g": "0f8a26a80991c307",
        "name": "",
        "group": "d62edd72661fa6e4",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "Sensor 4",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "1",
        "payloadType": "num",
        "topic": "4",
        "topicType": "str",
        "x": 460,
        "y": 960,
        "wires": [
            [
                "446bbc916dd54db0"
            ]
        ]
    },
    {
        "id": "99a0fe8cc3e0ae7e",
        "type": "comment",
        "z": "36c8992b04a40e1e",
        "g": "0f8a26a80991c307",
        "name": "Sensores Cozinha",
        "info": "",
        "x": 450,
        "y": 780,
        "wires": []
    },
    {
        "id": "a45c7b57dc59ee94",
        "type": "ui_button",
        "z": "36c8992b04a40e1e",
        "g": "1337715c3b617aff",
        "name": "",
        "group": "2bb6283f8d9a7d24",
        "order": 1,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "Sensor 1",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "2",
        "payloadType": "num",
        "topic": "1",
        "topicType": "str",
        "x": 460,
        "y": 1120,
        "wires": [
            [
                "446bbc916dd54db0"
            ]
        ]
    },
    {
        "id": "5df1bfcab848bf99",
        "type": "ui_button",
        "z": "36c8992b04a40e1e",
        "g": "1337715c3b617aff",
        "name": "",
        "group": "2bb6283f8d9a7d24",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "Sensor 2",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "2",
        "payloadType": "num",
        "topic": "2",
        "topicType": "str",
        "x": 460,
        "y": 1160,
        "wires": [
            [
                "446bbc916dd54db0"
            ]
        ]
    },
    {
        "id": "d3d8d41f31773392",
        "type": "ui_button",
        "z": "36c8992b04a40e1e",
        "g": "1337715c3b617aff",
        "name": "",
        "group": "2bb6283f8d9a7d24",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "Sensor 3",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "2",
        "payloadType": "num",
        "topic": "3",
        "topicType": "str",
        "x": 460,
        "y": 1200,
        "wires": [
            [
                "446bbc916dd54db0"
            ]
        ]
    },
    {
        "id": "3bb512f68988f8aa",
        "type": "comment",
        "z": "36c8992b04a40e1e",
        "g": "1337715c3b617aff",
        "name": "Sensores Sala",
        "info": "",
        "x": 440,
        "y": 1060,
        "wires": []
    },
    {
        "id": "1b0790b533e545c0",
        "type": "ui_button",
        "z": "36c8992b04a40e1e",
        "g": "e67fc5d601bdb679",
        "name": "",
        "group": "2e83e67765158d1f",
        "order": 1,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "Sensor 1",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "3",
        "payloadType": "num",
        "topic": "1",
        "topicType": "str",
        "x": 460,
        "y": 1360,
        "wires": [
            [
                "446bbc916dd54db0"
            ]
        ]
    },
    {
        "id": "a759eecdb08b887b",
        "type": "ui_button",
        "z": "36c8992b04a40e1e",
        "g": "e67fc5d601bdb679",
        "name": "",
        "group": "2e83e67765158d1f",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "Sensor 2",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "3",
        "payloadType": "num",
        "topic": "2",
        "topicType": "str",
        "x": 460,
        "y": 1400,
        "wires": [
            [
                "446bbc916dd54db0"
            ]
        ]
    },
    {
        "id": "53172258cb283587",
        "type": "ui_button",
        "z": "36c8992b04a40e1e",
        "g": "e67fc5d601bdb679",
        "name": "",
        "group": "2e83e67765158d1f",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "Sensor 3",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "3",
        "payloadType": "num",
        "topic": "3",
        "topicType": "str",
        "x": 460,
        "y": 1440,
        "wires": [
            [
                "446bbc916dd54db0"
            ]
        ]
    },
    {
        "id": "e432cb28ddf300bd",
        "type": "ui_button",
        "z": "36c8992b04a40e1e",
        "g": "e67fc5d601bdb679",
        "name": "",
        "group": "2e83e67765158d1f",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "Sensor 4",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "3",
        "payloadType": "num",
        "topic": "4",
        "topicType": "str",
        "x": 460,
        "y": 1480,
        "wires": [
            [
                "446bbc916dd54db0"
            ]
        ]
    },
    {
        "id": "ae700d6f1f9bf195",
        "type": "comment",
        "z": "36c8992b04a40e1e",
        "g": "e67fc5d601bdb679",
        "name": "Sensores Armazem",
        "info": "",
        "x": 450,
        "y": 1300,
        "wires": []
    },
    {
        "id": "16924de7a4d6f8fe",
        "type": "ui_button",
        "z": "36c8992b04a40e1e",
        "g": "1590ba15a1cb58f1",
        "name": "",
        "group": "de4f8ddf3439e797",
        "order": 1,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "Sensor 1",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "4",
        "payloadType": "num",
        "topic": "1",
        "topicType": "str",
        "x": 760,
        "y": 1420,
        "wires": [
            [
                "446bbc916dd54db0"
            ]
        ]
    },
    {
        "id": "5c0a837cab816a98",
        "type": "ui_button",
        "z": "36c8992b04a40e1e",
        "g": "1590ba15a1cb58f1",
        "name": "",
        "group": "de4f8ddf3439e797",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "Sensor 2",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "4",
        "payloadType": "num",
        "topic": "2",
        "topicType": "str",
        "x": 760,
        "y": 1460,
        "wires": [
            [
                "446bbc916dd54db0"
            ]
        ]
    },
    {
        "id": "6e40317b21f7b89f",
        "type": "ui_button",
        "z": "36c8992b04a40e1e",
        "g": "1590ba15a1cb58f1",
        "name": "",
        "group": "de4f8ddf3439e797",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "Sensor 3",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "4",
        "payloadType": "num",
        "topic": "3",
        "topicType": "str",
        "x": 760,
        "y": 1500,
        "wires": [
            [
                "446bbc916dd54db0"
            ]
        ]
    },
    {
        "id": "c725f46ed8b41206",
        "type": "ui_button",
        "z": "36c8992b04a40e1e",
        "g": "1590ba15a1cb58f1",
        "name": "",
        "group": "de4f8ddf3439e797",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "Sensor 4",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "4",
        "payloadType": "num",
        "topic": "4",
        "topicType": "str",
        "x": 760,
        "y": 1540,
        "wires": [
            [
                "446bbc916dd54db0"
            ]
        ]
    },
    {
        "id": "6558dbe568fad49d",
        "type": "comment",
        "z": "36c8992b04a40e1e",
        "g": "1590ba15a1cb58f1",
        "name": "Sensores Esplanada",
        "info": "",
        "x": 750,
        "y": 1360,
        "wires": []
    },
    {
        "id": "320975db2844637a",
        "type": "ui_button",
        "z": "36c8992b04a40e1e",
        "g": "1590ba15a1cb58f1",
        "name": "",
        "group": "de4f8ddf3439e797",
        "order": 5,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "Sensor 5",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "4",
        "payloadType": "num",
        "topic": "5",
        "topicType": "str",
        "x": 760,
        "y": 1580,
        "wires": [
            [
                "446bbc916dd54db0"
            ]
        ]
    },
    {
        "id": "7e494df8f9b80107",
        "type": "inject",
        "z": "36c8992b04a40e1e",
        "name": "Esconde Lista",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"group\":{\"hide\":[\"Listagem_Cozinha\",\"Listagem_Sala\",\"Listagem_Armazem\",\"Listagem_Esplanada\"]}}",
        "payloadType": "json",
        "x": 240,
        "y": 680,
        "wires": [
            [
                "d4d85017d1651f3f"
            ]
        ]
    },
    {
        "id": "d4d85017d1651f3f",
        "type": "ui_ui_control",
        "z": "36c8992b04a40e1e",
        "name": "",
        "events": "change",
        "x": 540,
        "y": 680,
        "wires": [
            []
        ]
    }
]